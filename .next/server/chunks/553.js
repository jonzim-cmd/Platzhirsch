exports.id=553,exports.ids=[553],exports.modules={3526:(e,s,a)=>{Promise.resolve().then(a.bind(a,6795))},8804:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},6795:(e,s,a)=>{"use strict";a.d(s,{TopBar:()=>c});var t=a(326),n=a(7577),l=a(3679);let r=n.forwardRef(({label:e,className:s="",...a},n)=>(0,t.jsxs)("label",{className:"grid gap-2 text-sm",children:[e?t.jsx("span",{className:"text-fg-muted",children:e}):null,t.jsx("input",{ref:n,className:"rounded border border-neutral-800 bg-neutral-900 px-3 py-2 outline-none ring-0 focus:border-neutral-600 "+s,...a})]}));r.displayName="Input";var i=a(962);function d({children:e,onClose:s}){let a=(0,t.jsxs)("div",{"aria-modal":"true",role:"dialog",className:"fixed inset-0 z-[1000]",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:s}),t.jsx("div",{className:"absolute inset-0 grid place-items-center p-4",children:e})]});return"undefined"==typeof document?null:(0,i.createPortal)(a,document.body)}function o({createMode:e,profile:s,onClose:a}){let[i,o]=(0,n.useState)(s?.name||""),[c,u]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),[x,m]=(0,n.useState)(!1);async function f(){p(!0);try{let t=s?.id||"";for(let a of(e?t=(await fetch("/api/profiles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i})}).then(e=>e.json())).id:i!==s?.name&&await fetch(`/api/profiles/${s?.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i})}),c)){let e=!!a.assigned;await fetch("/api/profile-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileId:t,classId:a.id,assigned:e})})}for(let e of c){let s=e.leadProfileId===t;await fetch("/api/class/lead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({classId:e.id,leadProfileId:s?t:null})})}m(!0),a(!0)}finally{p(!1)}}return t.jsx(d,{onClose:()=>a(!1),children:(0,t.jsxs)("div",{className:"w-[min(90vw,800px)] rounded border border-neutral-800 bg-bg-soft p-4 shadow-xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-lg font-medium",children:e?"Profil anlegen":"Profil bearbeiten"}),t.jsx("button",{className:"text-fg-muted hover:text-fg",onClick:()=>a(!!x),children:"✕"})]}),(0,t.jsxs)("div",{className:"mt-4 grid gap-4",children:[t.jsx(r,{label:"Name",value:i,onChange:e=>o(e.target.value),placeholder:"z. B. Frau M\xfcller"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"mb-2 text-sm font-medium",children:"Klassen (Zuweisung + Klassenleitung)"}),t.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-900",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-neutral-900/50",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left",children:"Zugewiesen"}),t.jsx("th",{className:"px-3 py-2 text-left",children:"Klasse"}),t.jsx("th",{className:"px-3 py-2 text-left",children:"KL"})]})}),(0,t.jsxs)("tbody",{children:[c.map(e=>(0,t.jsxs)("tr",{className:"border-t border-neutral-900",children:[t.jsx("td",{className:"px-3 py-2",children:t.jsx("input",{type:"checkbox",checked:e.assigned,onChange:()=>{var s;return s=e.id,void(u(e=>e.map(e=>e.id===s?{...e,assigned:!e.assigned}:e)),m(!0))}})}),t.jsx("td",{className:"px-3 py-2",children:e.name}),t.jsx("td",{className:"px-3 py-2",children:t.jsx("input",{type:"checkbox",checked:!!e.leadProfileId&&(!s?.id||e.leadProfileId===s?.id),onChange:()=>{var a;return a=e.id,void(u(e=>e.map(e=>e.id===a?{...e,leadProfileId:e.leadProfileId?null:s?.id||"__temp__"}:e)),m(!0))}})})]},e.id)),0===c.length&&t.jsx("tr",{children:t.jsx("td",{className:"px-3 py-6 text-xs text-fg-muted",colSpan:3,children:"Keine Klassen gefunden."})})]})]})})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-2",children:[!e&&s?.id&&t.jsx(l.z,{variant:"danger",onClick:async()=>{confirm("Profil und zugeh\xf6rige Pl\xe4ne wirklich l\xf6schen?")&&(await fetch(`/api/profiles/${s.id}`,{method:"DELETE"}),a(!0))},children:"Profil l\xf6schen"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(l.z,{onClick:()=>a(!!x),children:"Abbrechen"}),t.jsx(l.z,{variant:"primary",onClick:f,disabled:h||!i.trim(),children:e?"Anlegen":"Speichern"})]})]})]})]})})}function c(){let[e,s]=(0,n.useState)([]),[a,r]=(0,n.useState)([]),[i,d]=(0,n.useState)([]),[c,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[f,b]=(0,n.useState)(!1),[g,j]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),N=(0,n.useMemo)(()=>c?.name??"Profil w\xe4hlen…",[c]);return t.jsx("header",{className:"border-b border-neutral-900 bg-bg-soft/60 backdrop-blur",children:(0,t.jsxs)("div",{className:"container flex h-12 items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(l.z,{"aria-label":"Sidebar umschalten",onClick:()=>{let e=!v;y(e),window.dispatchEvent(new StorageEvent("storage",{key:"sidebar",newValue:JSON.stringify({open:e})}))},children:"☰"}),(0,t.jsxs)("select",{value:c?.id||"",onChange:s=>{if("__new__"===s.target.value){j(!0),b(!0);return}u(e.find(e=>e.id===s.target.value)||null)},className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800",children:[t.jsx("option",{value:"",children:N}),e.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id)),t.jsx("option",{value:"__new__",children:"+ Profil anlegen…"})]}),(0,t.jsxs)("select",{value:h,onChange:e=>p(e.target.value),disabled:!c,className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800 disabled:opacity-50",children:[t.jsx("option",{value:"",children:"Klasse w\xe4hlen…"}),a.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800",children:[t.jsx("option",{value:"",children:"Raum w\xe4hlen…"}),i.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),t.jsx(l.z,{"aria-label":"Einstellungen",onClick:()=>{j(!1),b(!0)},children:"⚙️"}),f&&t.jsx(o,{createMode:g,profile:g?null:c,onClose:async e=>{if(b(!1),e){let[e,a]=await Promise.all([fetch("/api/profiles").then(e=>e.json()),fetch("/api/rooms").then(e=>e.json())]);s(e),d(a),c&&r(await fetch(`/api/classes?profileId=${c.id}`).then(e=>e.json()))}}})]})})}},3679:(e,s,a)=>{"use strict";a.d(s,{z:()=>n});var t=a(326);function n({variant:e="ghost",className:s="",...a}){return t.jsx("button",{className:`inline-flex items-center rounded px-3 py-2 text-sm transition-colors ${{primary:"bg-primary/20 text-primary hover:bg-primary/30",ghost:"bg-neutral-800 text-fg hover:bg-neutral-700",danger:"bg-red-900/40 text-red-300 hover:bg-red-900/60"}[e]} ${s}`,...a})}a(7577)},5254:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c,metadata:()=>o});var t=a(9510);a(7272);var n=a(8570);let l=(0,n.createProxy)(String.raw`/Users/jz/Platzhirsch/components/Layout/TopBar.tsx`),{__esModule:r,$$typeof:i}=l;l.default;let d=(0,n.createProxy)(String.raw`/Users/jz/Platzhirsch/components/Layout/TopBar.tsx#TopBar`),o={title:"Sitzplan",description:"Sitzpl\xe4ne f\xfcr Klassen und R\xe4ume"};function c({children:e}){return t.jsx("html",{lang:"de",className:"dark",children:(0,t.jsxs)("body",{children:[t.jsx(d,{}),e]})})}},7272:()=>{}};