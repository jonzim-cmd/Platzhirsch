exports.id=553,exports.ids=[553],exports.modules={3526:(e,t,s)=>{Promise.resolve().then(s.bind(s,1935))},8804:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},1935:(e,t,s)=>{"use strict";s.d(t,{TopBar:()=>d});var a=s(326),r=s(7577),n=s(3679);let l=r.forwardRef(({label:e,className:t="",...s},r)=>(0,a.jsxs)("label",{className:"grid gap-2 text-sm",children:[e?a.jsx("span",{className:"text-fg-muted",children:e}):null,a.jsx("input",{ref:r,className:"rounded border border-neutral-800 bg-neutral-900 px-3 py-2 outline-none ring-0 focus:border-neutral-600 "+t,...s})]}));function i({createMode:e,profile:t,onClose:s}){let[i,d]=(0,r.useState)(t?.name||""),[o,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(!1);async function m(){h(!0);try{let a=t?.id||"";for(let s of(e?a=(await fetch("/api/profiles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i})}).then(e=>e.json())).id:i!==t?.name&&await fetch(`/api/profiles/${t?.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i})}),o)){let e=!!s.assigned;await fetch("/api/profile-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileId:a,classId:s.id,assigned:e})})}for(let e of o){let t=e.leadProfileId===a;await fetch("/api/class/lead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({classId:e.id,leadProfileId:t?a:null})})}x(!0),s(!0)}finally{h(!1)}}return a.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60",children:(0,a.jsxs)("div",{className:"w-[min(90vw,800px)] rounded border border-neutral-800 bg-bg-soft p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-lg font-medium",children:e?"Profil anlegen":"Profil bearbeiten"}),a.jsx("button",{className:"text-fg-muted hover:text-fg",onClick:()=>s(!!p),children:"✕"})]}),(0,a.jsxs)("div",{className:"mt-4 grid gap-4",children:[a.jsx(l,{label:"Name",value:i,onChange:e=>d(e.target.value),placeholder:"z. B. Frau M\xfcller"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"mb-2 text-sm font-medium",children:"Klassen (Zuweisung + Klassenleitung)"}),a.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-900",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-neutral-900/50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Zugewiesen"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Klasse"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"KL"})]})}),(0,a.jsxs)("tbody",{children:[o.map(e=>(0,a.jsxs)("tr",{className:"border-t border-neutral-900",children:[a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"checkbox",checked:e.assigned,onChange:()=>{var t;return t=e.id,void(c(e=>e.map(e=>e.id===t?{...e,assigned:!e.assigned}:e)),x(!0))}})}),a.jsx("td",{className:"px-3 py-2",children:e.name}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"checkbox",checked:!!e.leadProfileId&&(!t?.id||e.leadProfileId===t?.id),onChange:()=>{var s;return s=e.id,void(c(e=>e.map(e=>e.id===s?{...e,leadProfileId:e.leadProfileId?null:t?.id||"__temp__"}:e)),x(!0))}})})]},e.id)),0===o.length&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6 text-xs text-fg-muted",colSpan:3,children:"Keine Klassen gefunden."})})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx(n.z,{onClick:()=>s(!!p),children:"Abbrechen"}),a.jsx(n.z,{variant:"primary",onClick:m,disabled:u||!i.trim(),children:e?"Anlegen":"Speichern"})]})]})]})})}function d(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[d,o]=(0,r.useState)([]),[c,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[f,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),v=(0,r.useMemo)(()=>c?.name??"Profil w\xe4hlen…",[c]);return a.jsx("header",{className:"border-b border-neutral-900 bg-bg-soft/60 backdrop-blur",children:(0,a.jsxs)("div",{className:"container flex h-12 items-center gap-3",children:[(0,a.jsxs)("select",{value:c?.id||"",onChange:t=>{if("__new__"===t.target.value){j(!0),b(!0);return}u(e.find(e=>e.id===t.target.value)||null)},className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800",children:[a.jsx("option",{value:"",children:v}),e.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id)),a.jsx("option",{value:"__new__",children:"+ Profil anlegen…"})]}),(0,a.jsxs)("select",{value:h,onChange:e=>p(e.target.value),disabled:!c,className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800 disabled:opacity-50",children:[a.jsx("option",{value:"",children:"Klasse w\xe4hlen…"}),s.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800",children:[a.jsx("option",{value:"",children:"Raum w\xe4hlen…"}),d.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),a.jsx(n.z,{"aria-label":"Einstellungen",onClick:()=>{j(!1),b(!0)},children:"⚙️"}),f&&a.jsx(i,{createMode:g,profile:g?null:c,onClose:async e=>{if(b(!1),e){let[e,s]=await Promise.all([fetch("/api/profiles").then(e=>e.json()),fetch("/api/rooms").then(e=>e.json())]);t(e),o(s),c&&l(await fetch(`/api/classes?profileId=${c.id}`).then(e=>e.json()))}}})]})})}l.displayName="Input"},3679:(e,t,s)=>{"use strict";s.d(t,{z:()=>r});var a=s(326);function r({variant:e="ghost",className:t="",...s}){return a.jsx("button",{className:`inline-flex items-center rounded px-3 py-2 text-sm transition-colors ${{primary:"bg-primary/20 text-primary hover:bg-primary/30",ghost:"bg-neutral-800 text-fg hover:bg-neutral-700",danger:"bg-red-900/40 text-red-300 hover:bg-red-900/60"}[e]} ${t}`,...s})}s(7577)},5254:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>o});var a=s(9510);s(7272);var r=s(8570);let n=(0,r.createProxy)(String.raw`/Users/jz/Platzhirsch/components/Layout/TopBar.tsx`),{__esModule:l,$$typeof:i}=n;n.default;let d=(0,r.createProxy)(String.raw`/Users/jz/Platzhirsch/components/Layout/TopBar.tsx#TopBar`),o={title:"Sitzplan",description:"Sitzpl\xe4ne f\xfcr Klassen und R\xe4ume"};function c({children:e}){return a.jsx("html",{lang:"de",className:"dark",children:(0,a.jsxs)("body",{children:[a.jsx(d,{}),e]})})}},7272:()=>{}};