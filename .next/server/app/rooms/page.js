(()=>{var e={};e.id=799,e.ids=[799],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5264:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>i}),t(1016),t(5254),t(5866);var a=t(3191),n=t(8716),d=t(7922),s=t.n(d),o=t(5231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);t.d(r,c);let i=["",{children:["rooms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1016)),"/Users/jz/Platzhirsch/app/rooms/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5254)),"/Users/jz/Platzhirsch/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/jz/Platzhirsch/app/rooms/page.tsx"],u="/rooms/page",f={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/rooms/page",pathname:"/rooms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},4296:(e,r,t)=>{let a={"9eb1f714dcbdb8d1d1ed129c2eb2d942ec4ca6e8":()=>Promise.resolve().then(t.bind(t,1016)).then(e=>e.$$ACTION_1),f4eb825ef11d8792cafec2d539f2d9bbd140581d:()=>Promise.resolve().then(t.bind(t,1016)).then(e=>e.$$ACTION_0),"51a097bff94b6d7bde5cfb7a76cc419ca2d2d897":()=>Promise.resolve().then(t.bind(t,1379)).then(e=>e.createRoom),"88a28fa01bf8eb3ed6954f8a4f4ae43143c0f7e0":()=>Promise.resolve().then(t.bind(t,1379)).then(e=>e.deleteRoom),"8a57dfb094cf75dda1cd39da095655f2cc8d362e":()=>Promise.resolve().then(t.bind(t,1379)).then(e=>e.listRooms)};async function n(e,...r){return(await a[e]()).apply(null,r)}e.exports={"9eb1f714dcbdb8d1d1ed129c2eb2d942ec4ca6e8":n.bind(null,"9eb1f714dcbdb8d1d1ed129c2eb2d942ec4ca6e8"),f4eb825ef11d8792cafec2d539f2d9bbd140581d:n.bind(null,"f4eb825ef11d8792cafec2d539f2d9bbd140581d"),"51a097bff94b6d7bde5cfb7a76cc419ca2d2d897":n.bind(null,"51a097bff94b6d7bde5cfb7a76cc419ca2d2d897"),"88a28fa01bf8eb3ed6954f8a4f4ae43143c0f7e0":n.bind(null,"88a28fa01bf8eb3ed6954f8a4f4ae43143c0f7e0"),"8a57dfb094cf75dda1cd39da095655f2cc8d362e":n.bind(null,"8a57dfb094cf75dda1cd39da095655f2cc8d362e")}},5303:()=>{},1016:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$ACTION_0:()=>l,$$ACTION_1:()=>f,default:()=>u});var a=t(9510),n=t(4330),d=t(166),s=t(1379),o=t(8465),c=t(206);async function i(){let e=await (0,s.listRooms)();return(0,a.jsxs)("ul",{className:"divide-y divide-neutral-900 rounded border border-neutral-900",children:[e.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:e.name}),a.jsx("span",{className:"rounded bg-neutral-800 px-2 py-0.5 text-xs text-fg-muted",children:"ADHOC"===e.type?"Ad-hoc":"Normal"})]}),a.jsx("form",{action:(0,n.j)("f4eb825ef11d8792cafec2d539f2d9bbd140581d",l).bind(null,(0,d.encryptActionBoundArgs)("f4eb825ef11d8792cafec2d539f2d9bbd140581d",[e.id])),children:a.jsx(o.z,{type:"submit",variant:"danger",children:"L\xf6schen"})})]},e.id)),0===e.length&&a.jsx("li",{className:"px-4 py-6 text-sm text-fg-muted",children:"Noch keine R\xe4ume vorhanden."})]})}async function l(e){var[r]=await (0,d.decryptActionBoundArgs)("f4eb825ef11d8792cafec2d539f2d9bbd140581d",e);await (0,s.deleteRoom)(r)}async function u(){return(0,a.jsxs)("main",{className:"container py-8 grid gap-6",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"R\xe4ume"}),a.jsx("section",{className:"grid gap-3",children:(0,a.jsxs)("form",{action:(0,n.j)("9eb1f714dcbdb8d1d1ed129c2eb2d942ec4ca6e8",f),className:"flex items-end gap-3",children:[a.jsx(c.I,{name:"name",label:"Neuer Raum",placeholder:"z. B. W11"}),(0,a.jsxs)("label",{className:"text-sm text-fg-muted grid gap-2",children:[a.jsx("span",{children:"Typ"}),(0,a.jsxs)("select",{name:"type",className:"rounded bg-neutral-900 px-2 py-2 border border-neutral-800",children:[a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"adHoc",children:"Ad-hoc"})]})]}),a.jsx(o.z,{type:"submit",variant:"primary",children:"Anlegen"})]})}),a.jsx(i,{})]})}async function f(e){let r=e.get("name")?.trim(),t=e.get("type");r&&await (0,s.createRoom)(r,t)}},8465:(e,r,t)=>{"use strict";t.d(r,{z:()=>n});var a=t(9510);function n({variant:e="ghost",className:r="",...t}){return a.jsx("button",{className:`inline-flex items-center rounded px-3 py-2 text-sm transition-colors ${{primary:"bg-primary/20 text-primary hover:bg-primary/30",ghost:"bg-neutral-800 text-fg hover:bg-neutral-700",danger:"bg-red-900/40 text-red-300 hover:bg-red-900/60"}[e]} ${r}`,...t})}t(1159)},206:(e,r,t)=>{"use strict";t.d(r,{I:()=>n});var a=t(9510);let n=t(1159).forwardRef(({label:e,className:r="",...t},n)=>(0,a.jsxs)("label",{className:"grid gap-2 text-sm",children:[e?a.jsx("span",{className:"text-fg-muted",children:e}):null,a.jsx("input",{ref:n,className:"rounded border border-neutral-800 bg-neutral-900 px-3 py-2 outline-none ring-0 focus:border-neutral-600 "+r,...t})]}));n.displayName="Input"},1379:(e,r,t)=>{"use strict";t.r(r),t.d(r,{createRoom:()=>i,deleteRoom:()=>l,listRooms:()=>c});var a=t(4330);t(166);var n=t(71),d=t(883),s=t(7708),o=t(3524);async function c(){let e=(0,d.I)();if(!(0,d.u)(e,"read","room"))throw Error("forbidden");try{return await n._.room.findMany({orderBy:{name:"asc"}})}catch(e){return console.warn("listRooms fallback due to DB error:",e),[]}}async function i(e,r="normal"){let t=(0,d.I)();if(!(0,d.u)(t,"create","room"))throw Error("forbidden");let a=await n._.room.create({data:{name:e,type:"adHoc"===r?o.RoomType.ADHOC:o.RoomType.NORMAL}});return(0,s.revalidatePath)("/rooms"),a}async function l(e){let r=(0,d.I)();if(!(0,d.u)(r,"delete","room"))throw Error("forbidden");await n._.room.delete({where:{id:e}}),(0,s.revalidatePath)("/rooms")}(0,t(618).h)([c,i,l]),(0,a.j)("8a57dfb094cf75dda1cd39da095655f2cc8d362e",c),(0,a.j)("51a097bff94b6d7bde5cfb7a76cc419ca2d2d897",i),(0,a.j)("88a28fa01bf8eb3ed6954f8a4f4ae43143c0f7e0",l)},71:(e,r,t)=>{"use strict";t.d(r,{_:()=>n});var a=t(3524);let n=globalThis.prisma??new a.PrismaClient({log:["error"]})},883:(e,r,t)=>{"use strict";function a(){return{id:"anonymous",role:"anonymous"}}function n(e,r,t){return!0}t.d(r,{I:()=>a,u:()=>n})}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,311,708,341,553],()=>t(5264));module.exports=a})();