"use strict";(()=>{var e={};e.id=891,e.ids=[891],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5512:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>m,patchFetch:()=>w,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f});var r={};a.r(r),a.d(r,{DELETE:()=>p,PATCH:()=>d});var i=a(9303),n=a(8716),s=a(670),o=a(7070),l=a(71);async function d(e,{params:t}){let a=t.id,r=await e.json().catch(()=>null),i=r?.name?.trim();if(!a)return o.NextResponse.json({error:"missing id"},{status:400});let n=await l._.profile.update({where:{id:a},data:{name:i??void 0}});return o.NextResponse.json(n)}async function p(e,{params:t}){let a=t.id;return a?(await l._.$transaction(async e=>{await e.class.updateMany({where:{leadProfileId:a},data:{leadProfileId:null}}),await e.profileClass.deleteMany({where:{profileId:a}});let t=(await e.seatingPlan.findMany({where:{ownerProfileId:a},select:{id:!0}})).map(e=>e.id);t.length&&(await e.seatingElement.deleteMany({where:{seatingPlanId:{in:t}}}),await e.seatingPlan.deleteMany({where:{id:{in:t}}})),await e.profile.delete({where:{id:a}})}),o.NextResponse.json({ok:!0})):o.NextResponse.json({error:"missing id"},{status:400})}let u=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/profiles/[id]/route",pathname:"/api/profiles/[id]",filename:"route",bundlePath:"app/api/profiles/[id]/route"},resolvedPagePath:"/Users/jz/Platzhirsch/app/api/profiles/[id]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:f,serverHooks:h}=u,m="/api/profiles/[id]/route";function w(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},71:(e,t,a)=>{a.d(t,{_:()=>i});var r=a(3524);let i=globalThis.prisma??new r.PrismaClient({log:["error"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,59],()=>a(5512));module.exports=r})();