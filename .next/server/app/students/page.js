(()=>{var e={};e.id=759,e.ids=[759],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2929:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>d.a,__next_app__:()=>u,originalPathname:()=>f,pages:()=>o,routeModule:()=>b,tree:()=>c}),t(930),t(5254),t(5866);var s=t(3191),r=t(8716),n=t(7922),d=t.n(n),i=t(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(a,l);let c=["",{children:["students",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,930)),"/Users/jz/Platzhirsch/app/students/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5254)),"/Users/jz/Platzhirsch/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/jz/Platzhirsch/app/students/page.tsx"],f="/students/page",u={require:t,loadChunk:()=>Promise.resolve()},b=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/students/page",pathname:"/students",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2202:(e,a,t)=>{let s={"14db2bbd8a504a72379ee685f2e76e65a54c2286":()=>Promise.resolve().then(t.bind(t,930)).then(e=>e.$$ACTION_0),fbac3b4b4a92923ab2ee0d8454089e37c1f86ce2:()=>Promise.resolve().then(t.bind(t,930)).then(e=>e.$$ACTION_1),"2efb52f1f30f6df827429b650df4e1a1be8533af":()=>Promise.resolve().then(t.bind(t,8451)).then(e=>e.listStudents),"539e361736665a61a3a8c68b0022956be7421a59":()=>Promise.resolve().then(t.bind(t,8451)).then(e=>e.deleteStudent),de6e038437664aa52e2f3537d3459efd68878d5b:()=>Promise.resolve().then(t.bind(t,8451)).then(e=>e.createStudent),"1aad7720052bcbb3c3fff8073038f2a189fc9f98":()=>Promise.resolve().then(t.bind(t,1803)).then(e=>e.deleteClass),"4c018bc9b36e8e4ee0c64573afa34673fa514a06":()=>Promise.resolve().then(t.bind(t,1803)).then(e=>e.createClass),"7914dc5fbc064000e9e7e67beeae2d6d76de8861":()=>Promise.resolve().then(t.bind(t,1803)).then(e=>e.setClassLead),b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d:()=>Promise.resolve().then(t.bind(t,1803)).then(e=>e.listClasses)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"14db2bbd8a504a72379ee685f2e76e65a54c2286":r.bind(null,"14db2bbd8a504a72379ee685f2e76e65a54c2286"),fbac3b4b4a92923ab2ee0d8454089e37c1f86ce2:r.bind(null,"fbac3b4b4a92923ab2ee0d8454089e37c1f86ce2"),"2efb52f1f30f6df827429b650df4e1a1be8533af":r.bind(null,"2efb52f1f30f6df827429b650df4e1a1be8533af"),"539e361736665a61a3a8c68b0022956be7421a59":r.bind(null,"539e361736665a61a3a8c68b0022956be7421a59"),de6e038437664aa52e2f3537d3459efd68878d5b:r.bind(null,"de6e038437664aa52e2f3537d3459efd68878d5b"),"1aad7720052bcbb3c3fff8073038f2a189fc9f98":r.bind(null,"1aad7720052bcbb3c3fff8073038f2a189fc9f98"),"4c018bc9b36e8e4ee0c64573afa34673fa514a06":r.bind(null,"4c018bc9b36e8e4ee0c64573afa34673fa514a06"),"7914dc5fbc064000e9e7e67beeae2d6d76de8861":r.bind(null,"7914dc5fbc064000e9e7e67beeae2d6d76de8861"),b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d:r.bind(null,"b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d")}},5303:()=>{},930:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$ACTION_0:()=>f,$$ACTION_1:()=>b,default:()=>u});var s=t(9510),r=t(4330),n=t(166),d=t(8451),i=t(1803),l=t(8465),c=t(206);async function o(){let e=await (0,d.listStudents)();return(0,s.jsxs)("ul",{className:"divide-y divide-neutral-900 rounded border border-neutral-900",children:[e.map(e=>(0,s.jsxs)("li",{className:"flex items-center justify-between px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-medium",children:e.foreName}),s.jsx("span",{className:"text-xs text-fg-muted",children:e.class?.name})]}),s.jsx("form",{action:(0,r.j)("14db2bbd8a504a72379ee685f2e76e65a54c2286",f).bind(null,(0,n.encryptActionBoundArgs)("14db2bbd8a504a72379ee685f2e76e65a54c2286",[e.id])),children:s.jsx(l.z,{type:"submit",variant:"danger",children:"L\xf6schen"})})]},e.id)),0===e.length&&s.jsx("li",{className:"px-4 py-6 text-sm text-fg-muted",children:"Noch keine Sch\xfcler vorhanden."})]})}async function f(e){var[a]=await (0,n.decryptActionBoundArgs)("14db2bbd8a504a72379ee685f2e76e65a54c2286",e);await (0,d.deleteStudent)(a)}async function u(){let e=await (0,i.listClasses)();return(0,s.jsxs)("main",{className:"container py-8 grid gap-6",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Sch\xfcler"}),(0,s.jsxs)("section",{className:"grid gap-3",children:[(0,s.jsxs)("form",{action:(0,r.j)("fbac3b4b4a92923ab2ee0d8454089e37c1f86ce2",b),className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[(0,s.jsxs)("label",{className:"text-sm text-fg-muted grid gap-2",children:[s.jsx("span",{children:"Klasse"}),(0,s.jsxs)("select",{name:"classId",className:"rounded bg-neutral-900 px-2 py-2 border border-neutral-800",children:[s.jsx("option",{value:"",children:"– w\xe4hlen –"}),e.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsx(c.I,{name:"foreName",label:"Vorname",placeholder:"z. B. Ali"}),s.jsx(c.I,{name:"externalKey",label:"externKey",placeholder:"z. B. 12345"}),s.jsx("div",{className:"flex items-end",children:s.jsx(l.z,{type:"submit",variant:"primary",className:"w-full",children:"Anlegen"})})]}),s.jsx("p",{className:"text-xs text-fg-muted",children:"Hinweis: externKey ist eindeutig und in der UI sonst unsichtbar."})]}),s.jsx(o,{})]})}async function b(e){let a=e.get("classId")||"",t=e.get("foreName")?.trim(),s=e.get("externalKey")?.trim();a&&t&&s&&await (0,d.createStudent)({classId:a,foreName:t,externalKey:s})}},8465:(e,a,t)=>{"use strict";t.d(a,{z:()=>r});var s=t(9510);function r({variant:e="ghost",className:a="",...t}){return s.jsx("button",{className:`inline-flex items-center rounded px-3 py-2 text-sm transition-colors ${{primary:"bg-primary/20 text-primary hover:bg-primary/30",ghost:"bg-neutral-800 text-fg hover:bg-neutral-700",danger:"bg-red-900/40 text-red-300 hover:bg-red-900/60"}[e]} ${a}`,...t})}t(1159)},206:(e,a,t)=>{"use strict";t.d(a,{I:()=>r});var s=t(9510);let r=t(1159).forwardRef(({label:e,className:a="",...t},r)=>(0,s.jsxs)("label",{className:"grid gap-2 text-sm",children:[e?s.jsx("span",{className:"text-fg-muted",children:e}):null,s.jsx("input",{ref:r,className:"rounded border border-neutral-800 bg-neutral-900 px-3 py-2 outline-none ring-0 focus:border-neutral-600 "+a,...t})]}));r.displayName="Input"},1803:(e,a,t)=>{"use strict";t.r(a),t.d(a,{createClass:()=>l,deleteClass:()=>o,listClasses:()=>i,setClassLead:()=>c});var s=t(4330);t(166);var r=t(71),n=t(883),d=t(7708);async function i(){let e=(0,n.I)();if(!(0,n.u)(e,"read","class"))throw Error("forbidden");return r._.class.findMany({orderBy:{name:"asc"},include:{leadProfile:!0}})}async function l(e,a){let t=(0,n.I)();if(!(0,n.u)(t,"create","class"))throw Error("forbidden");let s=await r._.class.create({data:{name:e,leadProfileId:a||null}});return(0,d.revalidatePath)("/classes"),s}async function c(e,a){let t=(0,n.I)();if(!(0,n.u)(t,"update","class"))throw Error("forbidden");await r._.class.update({where:{id:e},data:{leadProfileId:a}}),(0,d.revalidatePath)("/classes")}async function o(e){let a=(0,n.I)();if(!(0,n.u)(a,"delete","class"))throw Error("forbidden");await r._.class.delete({where:{id:e}}),(0,d.revalidatePath)("/classes")}(0,t(618).h)([i,l,c,o]),(0,s.j)("b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d",i),(0,s.j)("4c018bc9b36e8e4ee0c64573afa34673fa514a06",l),(0,s.j)("7914dc5fbc064000e9e7e67beeae2d6d76de8861",c),(0,s.j)("1aad7720052bcbb3c3fff8073038f2a189fc9f98",o)},8451:(e,a,t)=>{"use strict";t.r(a),t.d(a,{createStudent:()=>l,deleteStudent:()=>c,listStudents:()=>i});var s=t(4330);t(166);var r=t(71),n=t(883),d=t(7708);async function i(){let e=(0,n.I)();if(!(0,n.u)(e,"read","student"))throw Error("forbidden");return r._.student.findMany({include:{class:!0},orderBy:[{class:{name:"asc"}},{foreName:"asc"}]})}async function l(e){let a=(0,n.I)();if(!(0,n.u)(a,"create","student"))throw Error("forbidden");let t=await r._.student.create({data:e});return(0,d.revalidatePath)("/students"),t}async function c(e){let a=(0,n.I)();if(!(0,n.u)(a,"delete","student"))throw Error("forbidden");await r._.student.delete({where:{id:e}}),(0,d.revalidatePath)("/students")}(0,t(618).h)([i,l,c]),(0,s.j)("2efb52f1f30f6df827429b650df4e1a1be8533af",i),(0,s.j)("de6e038437664aa52e2f3537d3459efd68878d5b",l),(0,s.j)("539e361736665a61a3a8c68b0022956be7421a59",c)},71:(e,a,t)=>{"use strict";t.d(a,{_:()=>r});var s=t(3524);let r=globalThis.prisma??new s.PrismaClient({log:["error"]})},883:(e,a,t)=>{"use strict";function s(){return{id:"anonymous",role:"anonymous"}}function r(e,a,t){return!0}t.d(a,{I:()=>s,u:()=>r})}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[948,471,562,553],()=>t(2929));module.exports=s})();