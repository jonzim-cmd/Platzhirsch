(()=>{var t={};t.id=219,t.ids=[219],t.modules={53524:t=>{"use strict";t.exports=require("@prisma/client")},47849:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external")},72934:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external")},54580:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},80133:(t,e,r)=>{"use strict";r.r(e),r.d(e,{GlobalError:()=>a.a,__next_app__:()=>d,originalPathname:()=>f,pages:()=>c,routeModule:()=>p,tree:()=>l}),r(55427),r(99540),r(35866);var n=r(23191),i=r(88716),o=r(37922),a=r.n(o),s=r(95231),u={};for(let t in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(t)&&(u[t]=()=>s[t]);r.d(e,u);let l=["",{children:["editor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,55427)),"/Users/jz/Platzhirsch/app/editor/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99540)),"/Users/jz/Platzhirsch/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/jz/Platzhirsch/app/editor/page.tsx"],f="/editor/page",d={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/editor/page",pathname:"/editor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},39363:(t,e,r)=>{let n={"1aad7720052bcbb3c3fff8073038f2a189fc9f98":()=>Promise.resolve().then(r.bind(r,31803)).then(t=>t.deleteClass),"4c018bc9b36e8e4ee0c64573afa34673fa514a06":()=>Promise.resolve().then(r.bind(r,31803)).then(t=>t.createClass),"7914dc5fbc064000e9e7e67beeae2d6d76de8861":()=>Promise.resolve().then(r.bind(r,31803)).then(t=>t.setClassLead),b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d:()=>Promise.resolve().then(r.bind(r,31803)).then(t=>t.listClasses),"51a097bff94b6d7bde5cfb7a76cc419ca2d2d897":()=>Promise.resolve().then(r.bind(r,41379)).then(t=>t.createRoom),"88a28fa01bf8eb3ed6954f8a4f4ae43143c0f7e0":()=>Promise.resolve().then(r.bind(r,41379)).then(t=>t.deleteRoom),"8a57dfb094cf75dda1cd39da095655f2cc8d362e":()=>Promise.resolve().then(r.bind(r,41379)).then(t=>t.listRooms)};async function i(t,...e){return(await n[t]()).apply(null,e)}t.exports={"1aad7720052bcbb3c3fff8073038f2a189fc9f98":i.bind(null,"1aad7720052bcbb3c3fff8073038f2a189fc9f98"),"4c018bc9b36e8e4ee0c64573afa34673fa514a06":i.bind(null,"4c018bc9b36e8e4ee0c64573afa34673fa514a06"),"7914dc5fbc064000e9e7e67beeae2d6d76de8861":i.bind(null,"7914dc5fbc064000e9e7e67beeae2d6d76de8861"),b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d:i.bind(null,"b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d"),"51a097bff94b6d7bde5cfb7a76cc419ca2d2d897":i.bind(null,"51a097bff94b6d7bde5cfb7a76cc419ca2d2d897"),"88a28fa01bf8eb3ed6954f8a4f4ae43143c0f7e0":i.bind(null,"88a28fa01bf8eb3ed6954f8a4f4ae43143c0f7e0"),"8a57dfb094cf75dda1cd39da095655f2cc8d362e":i.bind(null,"8a57dfb094cf75dda1cd39da095655f2cc8d362e")}},26544:(t,e,r)=>{Promise.resolve().then(r.bind(r,12555)),Promise.resolve().then(r.t.bind(r,79404,23))},69371:(t,e,r)=>{Promise.resolve().then(r.bind(r,16643))},18804:(t,e,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},12555:(t,e,r)=>{"use strict";r.d(e,{ActiveProfileNav:()=>o});var n=r(10326),i=r(17577);function o(){let[t,e]=(0,i.useState)(null);return t?n.jsx("span",{className:"ml-2 rounded bg-neutral-800 px-2 py-1 text-xs text-fg",children:t}):null}},16643:(t,e,r)=>{"use strict";r.d(e,{Editor:()=>om});var n,i=r(10326),o=r(17577);function a(t,e){for(var r=t.length,n=0;n<r;++n)if(e(t[n],n))return!0;return!1}function s(t,e){for(var r=t.length,n=0;n<r;++n)if(e(t[n],n))return t[n];return null}function u(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function l(t,e){try{return RegExp(t,"g").exec(e)}catch(t){return null}}function c(t){return t.replace(/_/g,".")}function f(t,e){var r=null,n="-1";return a(t,function(t){var i,o=l("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!!o&&!t.brand&&((r=t,n=o[3]||"-1",t.versionAlias)?n=t.versionAlias:t.versionTest&&(n=((i=l("("+t.versionTest.toLowerCase()+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e))?i[3]:"")||n),n=c(n),!0)}),{preset:r,version:n}}function d(t,e){var r={brand:"",version:"-1"};return a(t,function(t){var n=p(e,t);return!!n&&(r.brand=t.id,r.version=t.versionAlias||n.version,"-1"!==r.version)}),r}function p(t,e){return s(t,function(t){var r=t.brand;return l(""+e.test,r.toLowerCase())})}var h=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],v=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],g=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],m=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],b=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function x(t){return!!f(m,t).preset}function y(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.map(function(e){return e.split(" ").map(function(e){return e?""+t+e:""}).join(" ")}).join(" ")}function S(t,e){return function(r){r&&(t[e]=r)}}function E(t,e,r){return function(n){n&&(t[e][r]=n)}}var D="undefined",C=typeof window!==D,w=typeof document!==D&&document,M=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],P={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function R(t){return typeof t===D}function _(t){return t&&"object"==typeof t}function O(t){return Array.isArray(t)}function T(t){return"string"==typeof t}function z(t){return"number"==typeof t}function G(t){return"function"==typeof t}function k(t,e,r){if(!t.ignore)return null;var n=e.slice(Math.max(r-3,0),r+3).join("");return new RegExp(t.ignore).exec(n)}function I(t,e){var r,n=T(e)?{separator:e}:e,i=n.separator,o=void 0===i?",":i,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,u=n.isSeparateOpenClose,l=void 0===u?s:u,c=n.openCloseCharacters,f=void 0===c?M:c,d=RegExp("(\\s*"+o+"\\s*|"+f.map(function(t){var e=t.open,r=t.close;return e===r?e:e+"|"+r}).join("|")+"|\\s+)","g"),p=t.split(d).filter(function(t){return t&&"undefined"!==t}),h=p.length,v=[],g=[];function m(){return!!g.length&&(v.push(g.join("")),g=[],!0)}for(var b=0;b<h;++b){var x=function(e){var n=p[e].trim(),i=e,u=W(f,function(t){return t.open===n}),c=W(f,function(t){return t.close===n});if(u){if(-1!==(i=function t(e,r,n,i,o){return k(e,r,n)?n:function(e,r,n,i,o){for(var a,s=n;s<i;++s){var u=function(n){var s=r[n].trim();if(s===e.close&&!k(e,r,n))return{value:n};var u=n,l=W(o,function(t){return t.open===s});if(l&&(u=t(l,r,n,i,o)),-1===u)return a=n,"break";a=n=u}(s);if(s=a,"object"==typeof u)return u.value;if("break"===u)break}return -1}(e,r,n+1,i,o)}(u,p,e,h,f))&&l)return m()&&a?(r=e,"break"):(v.push(p.slice(e,i+1).join("")),e=i,a)?(r=e,"break"):(r=e,"continue")}else if(c&&!k(c,p,e)){var d=/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}(f);return d.splice(f.indexOf(c),1),{value:I(t,{separator:o,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:d})}}else if(((""===o||" "==o)&&(""===n||" "==n)||n===o)&&!s)return(m(),a)?(r=e,"break"):(r=e,"continue");-1===i&&(i=h-1),g.push(p.slice(e,i+1).join("")),r=e=i}(b);if(b=r,"object"==typeof x)return x.value;if("break"===x)break}return g.length&&v.push(g.join("")),v}function N(t){return I(t,"")}function A(t){return I(t,",")}function B(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function F(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],n=e[2];return{prefix:r,unit:e[3],value:parseFloat(n)}}function j(){return Date.now?Date.now():new Date().getTime()}function q(t,e,r){void 0===r&&(r=-1);for(var n=t.length,i=0;i<n;++i)if(e(t[i],i,t))return i;return r}function W(t,e,r){var n=q(t,e);return n>-1?t[n]:r}var Y=function(){var t=j(),e=C&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var r=j();return setTimeout(function(){e(r-t)},1e3/60)}}(),X=function(){var t=C&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function L(t){return Object.keys(t)}function H(t,e){var r=F(t),n=r.value,i=r.unit;if(_(e)){var o=e[i];if(o){if(G(o))return o(n);if(P[i])return P[i](n,o)}}else if("%"===i)return n*e/100;return P[i]?P[i](n):n}function V(t,e,r){return Math.max(e,Math.min(t,r))}function U(t,e,r,n){return void 0===n&&(n=t[0]/t[1]),[[tt(e[0],1e-7),tt(e[0]/n,1e-7)],[tt(e[1]*n,1e-7),tt(e[1],1e-7)]].filter(function(t){return t.every(function(t,n){var i=e[n],o=tt(i,1e-7);return r?t<=i||t<=o:t>=i||t>=o})})[0]||t}function $(t,e,r,n){if(!n)return t.map(function(t,n){return V(t,e[n],r[n])});var i=t[0],o=t[1],a=!0===n?i/o:n,s=U(t,e,!1,a),u=s[0],l=s[1],c=U(t,r,!0,a),f=c[0],d=c[1];return i<u||o<l?(i=u,o=l):(i>f||o>d)&&(i=f,o=d),[i,o]}function K(t){for(var e=t.length,r=0,n=e-1;n>=0;--n)r+=t[n];return e?r/e:0}function Z(t,e){var r=e[0]-t[0],n=Math.atan2(e[1]-t[1],r);return n>=0?n:n+2*Math.PI}function J(t){var e=[0,1].map(function(e){return K(t.map(function(t){return t[e]}))}),r=Z(e,t[0]),n=Z(e,t[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function Q(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function tt(t,e){return e?Math.round(t/e)/(1/e):t}function te(t,e){return t.forEach(function(r,n){t[n]=tt(t[n],e)}),t}function tr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(RegExp("(\\s|^)"+e+"(\\s|$)"))}function tn(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function ti(t,e){if(t.classList)t.classList.remove(e);else{var r=RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}}function to(t,e,r,n){t.addEventListener(e,r,n)}function ta(t,e,r,n){t.removeEventListener(e,r,n)}function ts(t){return(null==t?void 0:t.ownerDocument)||w}function tu(t){return ts(t).documentElement}function tl(t){return ts(t).body}function tc(t){var e;return(null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView)||window}function tf(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function td(t){return _(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function tp(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<r;++i)n[i*r+e-1]=0,n[(e-1)*r+i]=0;return n[(e-1)*(r+1)]=1,n}function th(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),n=tz(e),i=0;i<e;++i){var o=e*i+i;if(!tt(r[o],1e-7)){for(var a=i+1;a<e;++a)if(r[e*i+a]){!function(t,e,r,n,i){for(var o=0;o<i;++o){var a=r+o*i,s=n+o*i,u=t[a],l=e[a];t[a]=t[s],t[s]=u,e[a]=e[s],e[s]=l}}(r,n,i,a,e);break}}if(!tt(r[o],1e-7))return[];!function(t,e,r,n,i){for(var o=0;o<n;++o){var a=r+o*n;t[a]/=i,e[a]/=i}}(r,n,i,e,r[o]);for(var a=0;a<e;++a){var s=a,u=r[a+i*e];tt(u,1e-7)&&i!==a&&function(t,e,r,n,i,o){for(var a=0;a<i;++a){var s=r+a*i,u=n+a*i;t[s]+=t[u]*o,e[s]+=e[u]*o}}(r,n,s,i,e,-u)}}return n}function tv(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=t[e*e-1],i=0;i<e-1;++i)r[i]=t[e*(e-1)+i]/n;return r[e-1]=0,r}function tg(t,e){for(var r=t.slice(),n=t.length;n<e-1;++n)r[n]=0;return r[e-1]=1,r}function tm(t,e,r){if(void 0===e&&(e=Math.sqrt(t.length)),e===r)return t;for(var n=tz(r),i=Math.min(e,r),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)n[o*r+a]=t[o*e+a];n[(o+1)*r-1]=t[(o+1)*e-1],n[(r-1)*r+o]=t[(e-1)*e+o]}return n[r*r-1]=t[e*e-1],n}function tb(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=tz(t);return e.forEach(function(e){n=tx(n,e,t)}),n}function tx(t,e,r){void 0===r&&(r=Math.sqrt(t.length));var n=[],i=t.length/r,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<r;++a)for(var s=0;s<o;++s){n[s*r+a]=0;for(var u=0;u<i;++u)n[s*r+a]+=t[u*r+a]*e[s*i+u]}return n}function ty(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]+e[i];return n}function tS(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]-e[i];return n}function tE(t,e){return(void 0===e&&(e=9===t.length),e)?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function tD(t,e,r){void 0===r&&(r=e.length);var n=tx(t,e,r),i=n[r-1];return n.map(function(t){return t/i})}function tC(t,e){return tx(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function tw(t,e){return tx(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function tM(t,e){return tx(t,tT(e,4))}function tP(t,e){var r=e[0],n=e[1],i=e[2];return tx(t,[void 0===r?1:r,0,0,0,0,void 0===n?1:n,0,0,0,0,void 0===i?1:i,0,0,0,0,1],4)}function tR(t,e){return tD(tT(e,3),tg(t,3))}function t_(t,e){var r=e[0],n=e[1],i=e[2];return tx(t,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===r?0:r,void 0===n?0:n,void 0===i?0:i,1],4)}function tO(t,e){return tx(t,e,4)}function tT(t,e){var r=Math.cos(t),n=Math.sin(t),i=tz(e);return i[0]=r,i[1]=n,i[e]=-n,i[e+1]=r,i}function tz(t){for(var e=t*t,r=[],n=0;n<e;++n)r[n]=n%(t+1)?0:1;return r}function tG(t,e){for(var r=tz(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[(e+1)*i]=t[i];return r}function tk(t,e){for(var r=tz(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[e*(e-1)+i]=t[i];return r}function tI(t,e,r,n,i,o,a,s){var u=t[0],l=t[1],c=e[0],f=e[1],d=r[0],p=r[1],h=n[0],v=n[1],g=i[0],m=i[1],b=o[0],x=o[1],y=a[0],S=a[1],E=s[0],D=s[1],C=th([u,0,c,0,d,0,h,0,l,0,f,0,p,0,v,0,1,0,1,0,1,0,1,0,0,u,0,c,0,d,0,h,0,l,0,f,0,p,0,v,0,1,0,1,0,1,0,1,-g*u,-m*u,-b*c,-x*c,-y*d,-S*d,-E*h,-D*h,-g*l,-m*l,-b*f,-x*f,-y*p,-S*p,-E*v,-D*v],8);if(!C.length)return[];var w=tx(C,[g,m,b,x,y,S,E,D],8);return w[8]=1,tm(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e;++n)for(var i=0;i<e;++i)r[i*e+n]=t[e*n+i];return r}(w),3,4)}var tN=function(){return(tN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function tA(t,e){return void 0===e&&(e=0),tB(tF(t,e))}function tB(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var r=t.matrixFunction,n=t.functionValue;r&&(e=r(e,n))}),e}function tF(t,e){return void 0===e&&(e=0),(O(t)?t:N(t)).map(function(t){var r=B(t),n=r.prefix,i=r.value,o=null,a=n,s="";if("translate"===n||"translateX"===n||"translate3d"===n){var u=_(e)?tN(tN({},e),{"o%":e["%"]}):{"%":e,"o%":e},l=A(i).map(function(t,r){return 0===r&&"x%"in u?u["%"]=e["x%"]:1===r&&"y%"in u?u["%"]=e["y%"]:u["%"]=e["o%"],H(t,u)}),c=l[0],f=l[1],d=void 0===f?0:f,p=l[2],h=void 0===p?0:p;o=t_,s=[c,d,h]}else if("translateY"===n){var d=H(i,_(e)?tN({"%":e["y%"]},e):{"%":e});o=t_,s=[0,d,0]}else if("translateZ"===n){var h=parseFloat(i);o=t_,s=[0,0,h]}else if("scale"===n||"scale3d"===n){var v=A(i).map(function(t){return parseFloat(t)}),g=v[0],m=v[1],b=void 0===m?g:m,x=v[2],y=void 0===x?1:x;o=tP,s=[g,b,y]}else if("scaleX"===n){var g=parseFloat(i);o=tP,s=[g,1,1]}else if("scaleY"===n){var b=parseFloat(i);o=tP,s=[1,b,1]}else if("scaleZ"===n){var y=parseFloat(i);o=tP,s=[1,1,y]}else if("rotate"===n||"rotateZ"===n||"rotateX"===n||"rotateY"===n){var S=F(i),E=S.unit,D=S.value,C="rad"===E?D:D*Math.PI/180;"rotate"===n||"rotateZ"===n?(a="rotateZ",o=tM):"rotateX"===n?o=tC:"rotateY"===n&&(o=tw),s=C}else if("matrix3d"===n)o=tO,s=A(i).map(function(t){return parseFloat(t)});else if("matrix"===n){var w=A(i).map(function(t){return parseFloat(t)});o=tO,s=[w[0],w[1],0,0,w[2],w[3],0,0,0,0,1,0,w[4],w[5],0,1]}else a="";return{name:n,functionName:a,value:i,matrixFunction:o,functionValue:s}})}var tj=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var r=this.keys,n=this.values,i=r.indexOf(t),o=-1===i?r.length:i;r[o]=t,n[o]=e},t}(),tq=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),tW="function"==typeof Map,tY=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}(),tX=function(){function t(t,e,r,n,i,o,a,s){this.prevList=t,this.list=e,this.added=r,this.removed=n,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t,e,r,n,i=(t=this.changedBeforeAdded,e=this.fixed,r=[],n=[],t.forEach(function(t){var e=t[0],i=t[1],o=new tY;r[e]=o,n[i]=o}),r.forEach(function(t,e){t.connect(r[e-1])}),t.filter(function(t,r){return!e[r]}).map(function(t,e){var i=t[0],o=t[1];if(i===o)return[0,0];var a=r[i],s=n[o-1],u=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,r[0]),[u,a.getIndex()]})),o=this.changed,a=[];this.cacheOrdered=i.filter(function(t,e){var r=t[0],n=t[1],i=o[e],s=i[0],u=i[1];if(r!==n)return a.push([s,u]),!0}),this.cachePureChanged=a},t}();function tL(t,e,r){var n=tW?Map:r?tq:tj,i=r||function(t){return t},o=[],a=[],s=[],u=t.map(i),l=e.map(i),c=new n,f=new n,d=[],p=[],h={},v=[],g=0,m=0;return u.forEach(function(t,e){c.set(t,e)}),l.forEach(function(t,e){f.set(t,e)}),u.forEach(function(t,e){var r=f.get(t);void 0===r?(++m,a.push(e)):h[r]=m}),l.forEach(function(t,e){var r=c.get(t);void 0===r?(o.push(e),++g):(s.push([r,e]),m=h[e]||0,d.push([r-m,e-g]),p.push(e===r),r!==e&&v.push([r,e]))}),a.reverse(),new tX(t,e,o,a,v,s,d,p)}var tH=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),r=tL(this.list,e,this.findKeyCallback);return this.list=e,r},t}(),tV=function(t,e){return(tV=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},tU="function"==typeof Map?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),t$=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,tU)||this}return function(t,e){function r(){this.constructor=t}tV(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(tH),tK=function(){return(tK=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},tZ=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(_(t))for(var r in t)this.on(r,t[r]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t){if(_(t))for(var r in t)this.off(r);else if(e){var n=this._events[t];if(n){var i=q(n,function(t){return t.listener===e});i>-1&&n.splice(i,1)}}else this._events[t]=[]}else this._events={};return this},e.once=function(t,e){var r=this;return e&&this._addEvent(t,e,{once:!0}),new Promise(function(e){r._addEvent(t,e,{once:!0})})},e.emit=function(t,e){var r=this;void 0===e&&(e={});var n=this._events[t];if(!t||!n)return!0;var i=!1;return e.eventType=t,e.stop=function(){i=!0},e.currentTarget=this,(function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n})(n).forEach(function(n){n.listener(e),n.once&&r.off(t,n.listener)}),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,r){var n=this._events;n[t]=n[t]||[],n[t].push(tK({listener:e},r))},t}(),tJ=function(t,e){return(tJ=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},tQ=function(){return(tQ=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function t0(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function t1(t){return t?T(t)?document.querySelector(t):G(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}var t2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e._flag=!1,e._currentOptions=null,e._lock=!1,e._unregister=null,e._onScroll=function(){var t=e._currentOptions;!e._lock&&t&&e.emit("scrollDrag",{next:function(r){e.checkScroll({container:t.container,inputEvent:r})}})},e}!function(t,e){function r(){this.constructor=t}tJ(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t);var r=e.prototype;return r.dragStart=function(t,e){var r=t1(e.container);if(!r){this._flag=!1;return}var n=0,i=0,o=0,a=0;if(r===document.body)o=window.innerWidth,a=window.innerHeight;else{var s=r.getBoundingClientRect();n=s.top,i=s.left,o=s.width,a=s.height}this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:n,left:i,width:o,height:a},this._prevScrollPos=this._getScrollPosition([0,0],e),this._currentOptions=e,this._registerScrollEvent(e)},r.drag=function(t,e){if(clearTimeout(this._timer),this._flag){var r=t.clientX,n=t.clientY,i=e.threshold,o=void 0===i?0:i,a=this._startRect,s=this._startPos;this._currentOptions=e;var u=[0,0];return a.top>n-o?(s[1]>a.top||n<s[1])&&(u[1]=-1):a.top+a.height<n+o&&(s[1]<a.top+a.height||n>s[1])&&(u[1]=1),a.left>r-o?(s[0]>a.left||r<s[0])&&(u[0]=-1):a.left+a.width<r+o&&(s[0]<a.left+a.width||r>s[0])&&(u[0]=1),(!!u[0]||!!u[1])&&this._continueDrag(tQ(tQ({},e),{direction:u,inputEvent:t,isDrag:!0}))}},r.checkScroll=function(t){var e=this;if(this._isWait)return!1;var r=t.prevScrollPos,n=void 0===r?this._prevScrollPos:r,i=t.direction,o=t.throttleTime,a=void 0===o?0:o,s=t.inputEvent,u=t.isDrag,l=this._getScrollPosition(i||[0,0],t),c=l[0]-n[0],f=l[1]-n[1],d=i||[c?Math.abs(c)/c:0,f?Math.abs(f)/f:0];return this._prevScrollPos=l,this._lock=!1,(!!c||!!f)&&(this.emit("move",{offsetX:d[0]?c:0,offsetY:d[1]?f:0,inputEvent:s}),a&&u&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){e._continueDrag(t)},a)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(t,e){var r=e.container,n=e.getScrollPosition;return(void 0===n?function(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}:n)({container:t1(r),direction:t})},r._continueDrag=function(t){var e,r=this,n=t.container,i=t.direction,o=t.throttleTime,a=t.useScroll,s=t.isDrag,u=t.inputEvent;if(this._flag&&(!s||!this._isWait)){var l=j(),c=Math.max(o+this._prevTime-l,0);if(c>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){r._continueDrag(t)},c),!1;this._prevTime=l;var f=this._getScrollPosition(i,t);this._prevScrollPos=f,s&&(this._isWait=!0),a||(this._lock=!0);var d={container:t1(n),direction:i,inputEvent:u};return null===(e=t.requestScroll)||void 0===e||e.call(t,d),this.emit("scroll",d),this._isWait=!1,a||this.checkScroll(tQ(tQ({},t),{prevScrollPos:f,direction:i,inputEvent:u}))}},r._registerScrollEvent=function(t){this._unregisterScrollEvent();var e=t.checkScrollEvent;if(e){var r=!0===e?t0:e,n=t1(t.container);!0===e&&(n===document.body||n===document.documentElement)?this._unregister=t0(window,this._onScroll):this._unregister=r(n,this._onScroll)}},r._unregisterScrollEvent=function(){var t;null===(t=this._unregister)||void 0===t||t.call(this),this._unregister=null},e}(tZ);function t3(t){return tt(t,1e-7)}function t4(t){return t.length<3?0:Math.abs(function(t){for(var e=t.length,r=0,n=e-1;n>=0;--n)r+=t[n];return r}(t.map(function(e,r){var n=t[r+1]||t[0];return e[0]*n[1]-n[0]*e[1]})))/2}function t5(t,e){var r=e.width,n=e.height,i=e.left,o=e.top,a=t6(t),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,f=r/(l-s),d=n/(c-u);return t.map(function(t){return[i+(t[0]-s)*f,o+(t[1]-u)*d]})}function t6(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,r)}}function t7(t,e,r){var n=t[0],i=t[1],o=t6(e),a=[[o.minX,i],[o.maxX,i]],s=t8(a[0],a[1]),u=ee(e),l=[];if(u.forEach(function(e){var r=t8(e[0],e[1]),n=e[0];s.every(function(t,e){return 0===t3(t-r[e])})?l.push({pos:t,line:e,type:"line"}):et(t9(s,r),[a,e]).forEach(function(t){e.some(function(e){return!t3(e[0]-t[0])&&!t3(e[1]-t[1])})?l.push({pos:t,line:e,type:"point"}):0!==t3(n[1]-i)&&l.push({pos:t,line:e,type:"intersection"})})}),!r&&W(l,function(t){return t[0]===n}))return!0;var c=0,f={};return l.forEach(function(t){var e=t.pos,r=t.type,o=t.line;if(!(e[0]>n)){if("intersection"===r)++c;else if("line"===r)return;else if("point"===r){var a=W(o,function(t){return t[1]!==i}),s=f[e[0]],u=a[1]>i?1:-1;s?s!==u&&++c:f[e[0]]=u}}}),c%2==1}function t8(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],a=i-r,s=o-n;1e-7>Math.abs(a)&&(a=0),1e-7>Math.abs(s)&&(s=0);var u=0,l=0,c=0;return a?s?(l=1,c=-(u=-s/a)*r-n):(l=1,c=-n):s&&(u=-1,c=r),[u,l,c]}function t9(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=0===r&&0===o,l=0===n&&0===a,c=[];if(u&&l)return[];if(u){var f=-i/n;return f!==-s/a?[]:[[-1/0,f],[1/0,f]]}if(l){var d=-i/r;return d!==-s/o?[]:[[d,-1/0],[d,1/0]]}if(0===r){var p=-i/n,h=-(a*p+s)/o;c=[[h,p]]}else if(0===o){var p=-s/a,h=-(n*p+i)/r;c=[[h,p]]}else if(0===n){var h=-i/r,p=-(o*h+s)/a;c=[[h,p]]}else if(0===a){var h=-s/o,p=-(r*h+i)/n;c=[[h,p]]}else{var h=(n*s-a*i)/(a*r-n*o),p=-(r*h+i)/n;c=[[h,p]]}return c.map(function(t){return[t[0],t[1]]})}function et(t,e){var r=e.map(function(t){return[0,1].map(function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]})}),n=[];if(2===t.length){var i=t[0],o=i[0],a=i[1];if(t3(o-t[1][0])){if(!t3(a-t[1][1])){var s=Math.max.apply(Math,r.map(function(t){return t[0][0]})),u=Math.min.apply(Math,r.map(function(t){return t[0][1]}));if(t3(s-u)>0)return[];n=[[s,a],[u,a]]}}else{var l=Math.max.apply(Math,r.map(function(t){return t[1][0]})),c=Math.min.apply(Math,r.map(function(t){return t[1][1]}));if(t3(l-c)>0)return[];n=[[o,l],[o,c]]}}return n.length||(n=t.filter(function(t){var e=t[0],n=t[1];return r.every(function(t){return 0<=t3(e-t[0][0])&&0<=t3(t[0][1]-e)&&0<=t3(n-t[1][0])&&0<=t3(t[1][1]-n)})})),n.map(function(t){return[t3(t[0]),t3(t[1])]})}function ee(t){return(/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n})(t.slice(1),[t[0]]).map(function(e,r){return[t[r],e]}))}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var er=function(t,e){return(er=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},en=function(){return(en=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ei(t){var e,r,n,i;return e=[t[0].clientX,t[0].clientY],n=(r=[t[1].clientX,t[1].clientY])[0]-e[0],((i=Math.atan2(r[1]-e[1],n))>=0?i:i+2*Math.PI)/Math.PI*180}function eo(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),r=[],n=0;n<e;++n)r.push(eu(t[n]));return r}(t.touches):[eu(t)]:[]}function ea(t,e,r){var n=r.length,i=el(t,n),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,l=el(e,n),c=l.clientX,f=l.clientY,d=el(r,n);return{clientX:s,clientY:u,deltaX:o-c,deltaY:a-f,distX:o-d.clientX,distY:a-d.clientY}}function es(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function eu(t){return{clientX:t.clientX,clientY:t.clientY}}function el(t,e){void 0===e&&(e=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(t.length,e),i=0;i<n;++i){var o=t[i];r.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,r.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,r.clientX+=o.clientX,r.clientY+=o.clientY}return e?{clientX:r.clientX/e,clientY:r.clientY/e,originalClientX:r.originalClientX/e,originalClientY:r.originalClientY/e}:r}var ec=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return t.prototype.getAngle=function(t){return void 0===t&&(t=this.prevClients),ei(t)},t.prototype.getRotation=function(t){return void 0===t&&(t=this.prevClients),ei(t)-ei(this.startClients)},t.prototype.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var r=ea(t||this.prevClients,this.prevClients,this.startClients),n=r.deltaX,i=r.deltaY;return this.movement+=Math.sqrt(n*n+i*i),this.prevClients=t,r},t.prototype.getPositions=function(t){void 0===t&&(t=this.prevClients);for(var e=this.prevClients,r=this.startClients,n=Math.min(this.length,e.length),i=[],o=0;o<n;++o)i[o]=ea([t[o]],[e[o]],[r[o]]);return i},t.prototype.getMovement=function(t){var e=this.movement;if(!t)return e;var r=el(t,this.length),n=el(this.prevClients,this.length),i=r.clientX-n.clientX,o=r.clientY-n.clientY;return Math.sqrt(i*i+o*o)+e},t.prototype.getDistance=function(t){return void 0===t&&(t=this.prevClients),es(t)},t.prototype.getScale=function(t){return void 0===t&&(t=this.prevClients),es(t)/es(this.startClients)},t.prototype.move=function(t,e){this.startClients.forEach(function(r){r.clientX-=t,r.clientY-=e}),this.prevClients.forEach(function(r){r.clientX-=t,r.clientY-=e})},t}(),ef=["textarea","input"],ed=function(t){function e(e,r){void 0===r&&(r={});var n=t.call(this)||this;n.options={},n.flag=!1,n.pinchFlag=!1,n.data={},n.isDrag=!1,n.isPinch=!1,n.clientStores=[],n.targets=[],n.prevTime=0,n.doubleFlag=!1,n._useMouse=!1,n._useTouch=!1,n._useDrag=!1,n._dragFlag=!1,n._isTrusted=!1,n._isMouseEvent=!1,n._isSecondaryButton=!1,n._preventMouseEvent=!1,n._prevInputEvent=null,n._isDragAPI=!1,n._isIdle=!0,n._preventMouseEventId=0,n._window=window,n.onDragStart=function(t,e){if(void 0===e&&(e=!0),n.flag||!1!==t.cancelable){var r,i=t.type.indexOf("drag")>=-1;if(!n.flag||!i){n._isDragAPI=!0;var o=n.options,a=o.container,s=o.pinchOutside,u=o.preventWheelClick,l=o.preventRightClick,c=o.preventDefault,f=o.checkInput,d=o.dragFocusedInput,p=o.preventClickEventOnDragStart,h=o.preventClickEventOnDrag,v=o.preventClickEventByCondition,g=n._useTouch,m=!n.flag;if(n._isSecondaryButton=3===t.which||2===t.button,u&&(2===t.which||1===t.button)||l&&(3===t.which||2===t.button))return n.stop(),!1;if(m){var b=n._window.document.activeElement,x=t.target;if(x){var y=x.tagName.toLowerCase(),S=ef.indexOf(y)>-1,E=x.isContentEditable;if(S||E){if(f||!d&&b===x)return!1;if(b&&(b===x||E&&b.isContentEditable&&b.contains(x))){if(!d)return!1;x.blur()}}else if((c||"touchstart"===t.type)&&b){var D=b.tagName.toLowerCase();(b.isContentEditable||ef.indexOf(D)>-1)&&b.blur()}(p||h||v)&&to(n._window,"click",n._onClick,!0)}n.clientStores=[new ec(eo(t))],n._isIdle=!1,n.flag=!0,n.isDrag=!1,n._isTrusted=e,n._dragFlag=!0,n._prevInputEvent=t,n.data={},n.doubleFlag=j()-n.prevTime<200,n._isMouseEvent=t&&(t.type.indexOf("mouse")>-1||"button"in t),!n._isMouseEvent&&n._preventMouseEvent&&n._allowMouseEvent(),!1===(n._preventMouseEvent||n.emit("dragStart",en(en({data:n.data,datas:n.data,inputEvent:t,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,isTrusted:e,isDouble:n.doubleFlag},n.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){n._dragFlag=!1}})))&&n.stop(),n._isMouseEvent&&n.flag&&c&&t.preventDefault()}if(!n.flag)return!1;var C=0;if(m?(n._attchDragEvent(),g&&s&&(C=setTimeout(function(){to(a,"touchstart",n.onDragStart,{passive:!1})}))):g&&s&&ta(a,"touchstart",n.onDragStart),n.flag&&(r=t).touches&&r.touches.length>=2){if(clearTimeout(C),m&&t.touches.length!==t.changedTouches.length)return;n.pinchFlag||n.onPinchStart(t)}}}},n.onDrag=function(t,e){if(n.flag){var r=n.options.preventDefault;!n._isMouseEvent&&r&&t.preventDefault(),n._prevInputEvent=t;var i=eo(t),o=n.moveClients(i,t,!1);if(n._dragFlag){if((n.pinchFlag||o.deltaX||o.deltaY)&&!1===(n._preventMouseEvent||n.emit("drag",en(en({},o),{isScroll:!!e,inputEvent:t})))){n.stop();return}n.pinchFlag&&n.onPinch(t,i)}n.getCurrentStore().getPosition(i,!0)}},n.onDragEnd=function(t){if(n.flag){var e=n.options,r=e.pinchOutside,i=e.container,o=e.preventClickEventOnDrag,a=e.preventClickEventOnDragStart,s=e.preventClickEventByCondition,u=n.isDrag;(o||a||s)&&requestAnimationFrame(function(){n._allowClickEvent()}),s||a||!o||u||n._allowClickEvent(),n._useTouch&&r&&ta(i,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(t);var l=(null==t?void 0:t.touches)?eo(t):[];0!==l.length&&n.options.keepDragging?n._addStore(new ec(l)):n.flag=!1;var c=n._getPosition(),f=j(),d=!u&&n.doubleFlag;n._prevInputEvent=null,n.prevTime=u||d?0:f,n.flag||(n._dettachDragEvent(),n._preventMouseEvent||n.emit("dragEnd",en({data:n.data,datas:n.data,isDouble:d,isDrag:u,isClick:!u,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,inputEvent:t,isTrusted:n._isTrusted},c)),n.clientStores=[],n._isMouseEvent||(n._preventMouseEvent=!0,clearTimeout(n._preventMouseEventId),n._preventMouseEventId=setTimeout(function(){n._preventMouseEvent=!1},200)),n._isIdle=!0)}},n.onBlur=function(){n.onDragEnd()},n._allowClickEvent=function(){ta(n._window,"click",n._onClick,!0)},n._onClick=function(t){n._allowClickEvent(),n._allowMouseEvent();var e=n.options.preventClickEventByCondition;null!=e&&e(t)||(t.stopPropagation(),t.preventDefault())},n._onContextMenu=function(t){n.options.preventRightClick?n.onDragEnd(t):t.preventDefault()},n._passCallback=function(){};var i=[].concat(e),o=i[0];n._window=tf(o)?o:tc(o),n.options=en({checkInput:!1,container:!o||"document"in o?o:tc(o),preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var a=n.options,s=a.container,u=a.events,l=a.checkWindowBlur;if(n._useDrag=u.indexOf("drag")>-1,n._useTouch=u.indexOf("touch")>-1,n._useMouse=u.indexOf("mouse")>-1,n.targets=i,n._useDrag&&i.forEach(function(t){to(t,"dragstart",n.onDragStart)}),n._useMouse&&(i.forEach(function(t){to(t,"mousedown",n.onDragStart),to(t,"mousemove",n._passCallback)}),to(s,"contextmenu",n._onContextMenu)),l&&to(tc(),"blur",n.onBlur),n._useTouch){var c={passive:!1};i.forEach(function(t){to(t,"touchstart",n.onDragStart,c),to(t,"touchmove",n._passCallback,c)})}return n}return function(t,e){function r(){this.constructor=t}er(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,e,r,n){void 0===n&&(n=!0),this.flag&&(this.clientStores[0].move(t,e),n&&this.onDrag(r,!0))},e.prototype.move=function(t,e){var r=t[0],n=t[1],i=this.getCurrentStore().prevClients;return this.moveClients(i.map(function(t){var e=t.clientX,i=t.clientY;return{clientX:e+r,clientY:i+n,originalClientX:e,originalClientY:i}}),e,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var e=this.data;for(var r in t)e[r]=t[r];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return void 0===t&&(t=this._prevInputEvent),en(en({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,e=this.targets,r=this.options.container;this.off(),ta(this._window,"blur",this.onBlur),this._useDrag&&e.forEach(function(e){ta(e,"dragstart",t.onDragStart)}),this._useMouse&&(e.forEach(function(e){ta(e,"mousedown",t.onDragStart)}),ta(r,"contextmenu",this._onContextMenu)),this._useTouch&&(e.forEach(function(e){ta(e,"touchstart",t.onDragStart)}),ta(r,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var e=this,r=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>r)){var n=new ec(eo(t));this.pinchFlag=!0,this._addStore(n),!1===this.emit("pinchStart",en(en({data:this.data,datas:this.data,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){e._dragFlag=!1}}))&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var r=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",en(en({data:this.data,datas:this.data,movement:this.getMovement(e),angle:r.getAngle(e),rotation:r.getRotation(e),touches:r.getPositions(e),scale:r.getScale(e),distance:r.getDistance(e)},r.getPosition(e)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var r=this.getCurrentStore();this.emit("pinchEnd",en(en({data:this.data,datas:this.data,isPinch:e,touches:r.getPositions()},r.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,e,r){var n=this._getPosition(t,r),i=this.isDrag;(n.deltaX||n.deltaY)&&(this.isDrag=!0);var o=!1;return!i&&this.isDrag&&(o=!0),en(en({data:this.data,datas:this.data},n),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,e){var r=this.getCurrentStore().getPosition(t,e),n=this.clientStores.slice(1).reduce(function(t,e){var r=e.getPosition();return t.distX+=r.distX,t.distY+=r.distY,t},r),i=n.distX,o=n.distY;return en(en({},r),{distX:i,distY:o})},e.prototype._attchDragEvent=function(){var t=this._window,e=this.options.container,r={passive:!1};this._isDragAPI&&(to(e,"dragover",this.onDrag,r),to(t,"dragend",this.onDragEnd)),this._useMouse&&(to(e,"mousemove",this.onDrag),to(t,"mouseup",this.onDragEnd)),this._useTouch&&(to(e,"touchmove",this.onDrag,r),to(t,"touchend",this.onDragEnd,r),to(t,"touchcancel",this.onDragEnd,r))},e.prototype._dettachDragEvent=function(){var t=this._window,e=this.options.container;this._isDragAPI&&(ta(e,"dragover",this.onDrag),ta(t,"dragend",this.onDragEnd)),this._useMouse&&(ta(e,"mousemove",this.onDrag),ta(t,"mouseup",this.onDragEnd)),this._useTouch&&(ta(e,"touchstart",this.onDragStart),ta(e,"touchmove",this.onDrag),ta(t,"touchend",this.onDragEnd),ta(t,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(tZ),ep=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>>>0};let eh=function(t){var e="rCS"+ep(t).toString(36);return{className:e,inject:function(r,n){void 0===n&&(n={});var i,o,a,s=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(r),u=(s||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(u){var l=parseFloat(u.getAttribute("data-styled-count"))||0;u.setAttribute("data-styled-count","".concat(l+1))}else i=n,(a=(o=ts(r)).createElement("style")).setAttribute("type","text/css"),a.setAttribute("data-styled-id",e),a.setAttribute("data-styled-count","1"),i.nonce&&a.setAttribute("nonce",i.nonce),a.innerHTML=i.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(t,r){var n=r.trim();return(n?A(n):[""]).map(function(t){var r=t.trim();return 0===r.indexOf("@")?r:r.indexOf(":global")>-1?r.replace(/\:global/g,""):r.indexOf(":host")>-1?"".concat(r.replace(/\:host/g,".".concat(e))):r?".".concat(e," ").concat(r):".".concat(e)}).join(", ")+" {"}),(s||o.head||o.body).appendChild(a),u=a;return{destroy:function(){var t,e=parseFloat(u.getAttribute("data-styled-count"))||0;e<=1?(u.remove?u.remove():null===(t=u.parentNode)||void 0===t||t.removeChild(u),u=null):u.setAttribute("data-styled-count","".concat(e-1))}}}}};var ev=function(){return(ev=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function eg(t,e){var r=eh(e),n=r.className;return(0,o.forwardRef)(function(e,i){var a=e.className,s=(e.cspNonce,function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)0>e.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}(e,["className","cspNonce"])),u=(0,o.useRef)();return(0,o.useImperativeHandle)(i,function(){return u.current},[]),(0,o.useEffect)(function(){var t=r.inject(u.current,{nonce:e.cspNonce});return function(){t.destroy()}},[]),(0,o.createElement)(t,ev({ref:u,"data-styled-id":n,className:"".concat(void 0===a?"":a," ").concat(n)},s))})}var em=function(t,e){return(em=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function eb(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}em(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ex=function(){return(ex=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ey(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function eS(t,e,r){if(r||2==arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}function eE(t,e){return ex({events:[],props:[],name:t},e)}var eD=["n","w","s","e"],eC=["n","w","s","e","nw","ne","sw","se"],ew=!function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}()?function(t){var e=u(t),r=!!/mobi/g.exec(e),n={name:"unknown",version:"-1",majorVersion:-1,webview:x(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=f(h,e),a=o.preset,s=o.version,l=f(b,e),c=l.preset,d=l.version,p=f(v,e);if(n.chromium=!!p.preset,n.chromiumVersion=p.version,!n.chromium){var m=f(g,e);n.webkit=!!m.preset,n.webkitVersion=m.version}return c&&(i.name=c.id,i.version=d,i.majorVersion=parseInt(d,10)),a&&(n.name=a.id,n.version=s,n.webview&&"ios"===i.name&&"safari"!==n.name&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}(void 0):function(t){var e=navigator.userAgentData,r=(e.uaList||e.brands).slice(),n=void 0,i=e.mobile||!1,o=r[0],l=(0,e.platform||navigator.platform).toLowerCase(),f={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!d(m,r).brand||x(u())},y={name:"unknown",version:"-1",majorVersion:-1};f.webkit=!f.chromium&&a(g,function(t){return p(r,t)});var S=d(v,r);if(f.chromium=!!S.brand,f.chromiumVersion=S.version||"-1",!f.chromium){var E=d(g,r);f.webkit=!!E.brand,f.webkitVersion=E.version||"-1"}var D=s(b,function(t){return RegExp(""+t.test,"g").exec(l)});if(y.name=D?D.id:"",t&&(y.version=t.platformVersion||"-1"),n&&n.length){var C=d(h,n);f.name=C.brand||f.name,f.version=C.version||f.version}else{var w=d(h,r);f.name=w.brand||f.name,f.version=w.brand&&t?t.uaFullVersion:w.version}return f.webkit&&(y.name=i?"ios":"mac"),"ios"===y.name&&f.webview&&(f.version="-1"),y.version=c(y.version),f.version=c(f.version),y.majorVersion=parseInt(y.version,10),f.majorVersion=parseInt(f.version,10),{browser:f,os:y,isMobile:i,isHints:!0}}(),eM=ew.browser.webkit,eP=eM&&function(){var t="undefined"==typeof window?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return!!e&&605>parseFloat(e[1])}(),eR=ew.browser.name,e_=parseInt(ew.browser.version,10),eO=ew.browser.chromium,eT=parseInt(ew.browser.chromiumVersion,10)||0,ez="chrome"===eR&&e_>=109||eO&&eT>=109,eG="firefox"===eR,ek=parseInt(ew.browser.webkitVersion,10)>=612||e_>=15,eI="moveable-",eN=eC.map(function(t){var e="",r="",n="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(o,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(r="left: ".concat(o,";"),n="right"),t.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(r).concat(e,"\n        transform-origin: ").concat(n," ").concat(i,";\n    }")}).join("\n"),eA="\n{\nposition: absolute;\nwidth: 1px;\nheight: 1px;\nleft: 0;\ntop: 0;\nz-index: 3000;\n--moveable-color: #4af;\n--zoom: 1;\n--zoompx: 1px;\n--moveable-line-padding: 0;\n--moveable-control-padding: 0;\nwill-change: transform;\noutline: 1px solid transparent;\n}\n.control-box {\nz-index: 0;\n}\n.line, .control {\nposition: absolute;\nleft: 0;\ntop: 0;\nwill-change: transform;\n}\n.control {\nwidth: 14px;\nheight: 14px;\nborder-radius: 50%;\nborder: 2px solid #fff;\nbox-sizing: border-box;\nbackground: #4af;\nbackground: var(--moveable-color);\nmargin-top: -7px;\nmargin-left: -7px;\nborder: 2px solid #fff;\nz-index: 10;\n}\n.around-control {\nposition: absolute;\nwill-change: transform;\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\nheight: calc(var(--moveable-control-padding, 20) * 1px);\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\nbox-sizing: border-box;\nbackground: transparent;\nz-index: 8;\ncursor: alias;\ntransform-origin: center center;\n}\n".concat(eN,"\n.padding {\nposition: absolute;\ntop: 0px;\nleft: 0px;\nwidth: 100px;\nheight: 100px;\ntransform-origin: 0 0;\n}\n.line {\nwidth: 1px;\nheight: 1px;\nbackground: #4af;\nbackground: var(--moveable-color);\ntransform-origin: 0px 50%;\n}\n.line.edge {\nz-index: 1;\nbackground: transparent;\n}\n.line.dashed {\nbox-sizing: border-box;\nbackground: transparent;\n}\n.line.dashed.horizontal {\nborder-top: 1px dashed #4af;\nborder-top-color: #4af;\nborder-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\nborder-left: 1px dashed #4af;\nborder-left-color: #4af;\nborder-left-color: var(--moveable-color);\n}\n.line.vertical {\ntransform: translateX(-50%);\n}\n.line.horizontal {\ntransform: translateY(-50%);\n}\n.line.vertical.bold {\nwidth: 2px;\n}\n.line.horizontal.bold {\nheight: 2px;\n}\n\n.control.origin {\nborder-color: #f55;\nbackground: #fff;\nwidth: 12px;\nheight: 12px;\nmargin-top: -6px;\nmargin-left: -6px;\npointer-events: none;\n}\n").concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){var e,r,n;return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n").concat((e='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>'),n="ns-resize",135==(r=45*Math.round(t/45)%180)?n="nwse-resize":45===r?n="nesw-resize":90===r&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")),"\n}\n")}).join("\n"),'\n\n.line.direction:before {\ncontent: "";\nposition: absolute;\nwidth: 100%;\nheight: calc(var(--moveable-line-padding, 0) * 1px);\nbottom: 0;\nleft: 0;\n}\n.group {\nz-index: -1;\n}\n.area {\nposition: absolute;\n}\n.area-pieces {\nposition: absolute;\ntop: 0;\nleft: 0;\ndisplay: none;\n}\n.area.avoid, .area.pass {\npointer-events: none;\n}\n.area.avoid+.area-pieces {\ndisplay: block;\n}\n.area-piece {\nposition: absolute;\n}\n\n').concat(eP?':global svg *:before {\ncontent:"";\ntransform-origin: inherit;\n}':"","\n"),eB=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],eF={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},ej={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},eq={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},eW=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function eY(t,e,r,n,i,o){void 0===o&&(o="draggable");var a,s,u=null!==(s=null===(a=e.gestos[o])||void 0===a?void 0:a.move(r,t.inputEvent))&&void 0!==s?s:{},l=u.originalDatas||u.datas,c=l[o]||(l[o]={});return ex(ex({},i?it(e,u):u),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var eX=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}return t.prototype.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var r=e.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ex(ex({},this.move(t,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},t.prototype.move=function(t,e){var r,n,i=!1;if(this.isFlag){var o=this.isDrag;r=this.prevX+t[0],n=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!o&&this.isDrag&&(i=!0)}else this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0;return this.prevX=r,this.prevY=n,{type:"drag",clientX:r,clientY:n,inputEvent:e,isFirstDrag:i,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function eL(t,e,r,n){var i=16===t.length?4:3,o=ey(nT(t,r,n,i),4),a=ey(o[0],2),s=a[0],u=a[1],l=ey(o[1],2),c=l[0],f=l[1],d=ey(o[2],2),p=d[0],h=d[1],v=ey(o[3],2),g=v[0],m=v[1],b=ey(nO(t,e,i),2),x=b[0],y=b[1],S=Math.min(s,c,p,g),E=Math.min(u,f,h,m),D=Math.max(s,c,p,g),C=Math.max(u,f,h,m);return s=s-S||0,c=c-S||0,p=p-S||0,g=g-S||0,u=u-E||0,f=f-E||0,h=h-E||0,m=m-E||0,x=x-S||0,y=y-E||0,{left:S,top:E,right:D,bottom:C,origin:[x,y],pos1:[s,u],pos2:[c,f],pos3:[p,h],pos4:[g,m],direction:iv(t[0]*t[i+1])}}function eH(t,e){var r=e.clientX,n=e.clientY,i=e.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=ey(tS(n9(s,[r-a.left,n-a.top],u?4:3),l),2),f=ey(eJ({datas:i,distX:c[0],distY:c[1]}),2);return[f[0],f[1]]}function eV(t,e){var r=e.datas,n=t.state,i=n.allMatrix,o=n.beforeMatrix,a=n.is3d,s=n.left,u=n.top,l=n.origin,c=n.offsetMatrix,f=n.targetMatrix,d=n.transformOrigin,p=a?4:3;r.is3d=a,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=o,r.offsetMatrix=c,r.transformOrigin=d,r.inverseMatrix=th(i,p),r.inverseBeforeMatrix=th(o,p),r.absoluteOrigin=tg(ty([s,u],l),p),r.startDragBeforeDist=tD(r.inverseBeforeMatrix,r.absoluteOrigin,p),r.startDragDist=tD(r.inverseMatrix,r.absoluteOrigin,p)}function eU(t,e,r){var n,i,o,a,s,u,l,c,f,d,p,h,v,g,m,b,x,y,S,E,D=e.datas,C=e.originalDatas.beforeRenderable,w=D.transformIndex,M=C.nextTransforms,P=M.length,R=C.nextTransformAppendedIndexes,_=-1;-1===w?("translate"===r?_=0:"rotate"===r&&(_=q(M,function(t){return t.match(/scale\(/g)})),-1===_&&(_=M.length),D.transformIndex=_):_=W(R,function(t){return t.index===w&&t.functionName===r})?w:w+R.filter(function(t){return t.index<w}).length;var O=(n=t.state,i=_,a=tF(M,{"x%":function(t){return t/100*n.offsetWidth},"y%":function(t){return t/100*n.offsetHeight}}),s=M.slice(0,i<0?void 0:i),u=M.slice(0,i<0?void 0:i+1),l=M[i]||"",c=i<0?[]:M.slice(i),f=i<0?[]:M.slice(i+1),d=a.slice(0,i<0?void 0:i),p=a.slice(0,i<0?void 0:i+1),h=null!==(o=a[i])&&void 0!==o?o:tF([""])[0],v=i<0?[]:a.slice(i),g=i<0?[]:a.slice(i+1),m=h?[h]:[],b=tB(d),x=tB(p),y=tB(v),S=tB(g),E=tx(b,y,4),{transforms:M,beforeFunctionMatrix:b,beforeFunctionMatrix2:x,targetFunctionMatrix:tB(m),afterFunctionMatrix:y,afterFunctionMatrix2:S,allFunctionMatrix:E,beforeFunctions:d,beforeFunctions2:p,targetFunction:m[0],afterFunctions:v,afterFunctions2:g,beforeFunctionTexts:s,beforeFunctionTexts2:u,targetFunctionText:l,afterFunctionTexts:c,afterFunctionTexts2:f}),T=O.targetFunction,z="rotate"===r?"rotateZ":r;D.beforeFunctionTexts=O.beforeFunctionTexts,D.afterFunctionTexts=O.afterFunctionTexts,D.beforeTransform=O.beforeFunctionMatrix,D.beforeTransform2=O.beforeFunctionMatrix2,D.targetTansform=O.targetFunctionMatrix,D.afterTransform=O.afterFunctionMatrix,D.afterTransform2=O.afterFunctionMatrix2,D.targetAllTransform=O.allFunctionMatrix,T.functionName===z?(D.afterFunctionTexts.splice(0,1),D.isAppendTransform=!1):P>_&&(D.isAppendTransform=!0,C.nextTransformAppendedIndexes=eS(eS([],ey(R),!1),[{functionName:r,index:_,isAppend:!0}],!1))}function e$(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function eK(t,e,r){var n=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=r?tx(s,e,4):tx(e,s,4),l=tx(th(r?o:n,4),u,4);return tx(l,th(r?a:i,4),4)}function eZ(t){var e=t.datas,r=t.distX,n=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,a=e.startDragBeforeDist;return tS(tD(i,ty(e.absoluteOrigin,[r,n]),o?4:3),a)}function eJ(t,e){var r=t.datas,n=t.distX,i=t.distY,o=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,u=r.startDragBeforeDist,l=r.startDragDist;return tS(tD(e?o:a,ty(r.absoluteOrigin,[n,i]),s?4:3),e?u:l)}function eQ(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function e0(t,e){var r,n,i,o,a,s,u=(e+1)/2;return[(r=t[0][0],n=t[1][0],(r*(i=1-u)+n*u)/(u+i)),(o=t[0][1],a=t[1][1],(o*(s=1-u)+a*u)/(u+s))]}function e1(t,e){var r=e0([t[0],t[1]],e[0]),n=e0([t[2],t[3]],e[0]);return e0([r,n],e[1])}function e2(t,e,r,n){return tx(t,nE(e,n,r),n)}function e3(t,e){var r=e7(e);return{setTransform:function(n,i){void 0===i&&(i=-1),r.startTransforms=O(n)?n:N(n),e5(t,e,i)},setTransformIndex:function(r){e5(t,e,r)}}}function e4(t,e,r){var n=e7(e).startTransforms;e5(t,e,q(n,function(t){return 0===t.indexOf("".concat(r,"("))}))}function e5(t,e,r){var n=e7(e),i=e.datas;if(i.transformIndex=r,-1!==r){var o=n.startTransforms[r];if(o){var a=t.state,s=tF([o],{"x%":function(t){return t/100*a.offsetWidth},"y%":function(t){return t/100*a.offsetHeight}});i.startValue=s[0].functionValue}}}function e6(t,e){e7(t).nextTransforms=N(e)}function e7(t){return t.originalDatas.beforeRenderable}function e8(t){return t.originalDatas.beforeRenderable.nextTransforms}function e9(t){return(e8(t)||[]).join(" ")}function rt(t){return e7(t).nextStyle}function re(t,e,r,n,i){e6(i,e);var o=r4.drag(t,eY(i,t.state,r,n,!1)),a=o?o.transform:e;return ex(ex({transform:e,drag:o},nK({transform:a},i)),{afterTransform:a})}function rr(t,e,r,n,i,o){var a,s,u,l,c;return void 0===(a=function(t,e,r,n){var i,o=t.transformOrigin,a=t.offsetMatrix,s=t.is3d?4:3;if(T(r)){var u=e.beforeTransform,l=e.afterTransform;i=n?tm(tA(r),4,s):tm(tx(tx(u,tA([r]),4),l,4),4,s)}else i=r;return e2(a,i,o,s)}(t.state,i,e,o))&&(a=t.state.allMatrix),u=(s=t.state).width,l=s.height,c=s.is3d,nO(a,[u/2*(1+r[0])+n[0],l/2*(1+r[1])+n[1]],c?4:3)}function rn(t,e,r,n,i,o,a){var s=rr(t,e,r,i,o,a),u=t.state,l=u.left,c=u.top,f=t.props.groupable,d=tS(n,s);return tS(d,[f?l:0,f?c:0])}function ri(t,e,r){for(var n,i,o,a=t,s=[],u=tu(t)||tl(t),l=!r&&t===e||t===u,c=l,f=!1,d=3,p=!1,h=nw(e,e,!0).offsetParent,v=1;a&&!c;){c=l;var g,m=rl(a),b=m("position"),x=nC(a),y="fixed"===b,S=function(t){var e=t("scale"),r=t("rotate"),n=t("translate"),i=[];return n&&"0px"!==n&&"none"!==n&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&"1"!==r&&"none"!==r&&i.push("rotate(".concat(r,")")),e&&"1"!==e&&"none"!==e&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}(m),E=void 0,D=(g=x&&"none"!==x?_(x)?x:tA(x):[1,0,0,1,0,0],(void 0===E&&(E=6===g.length),E)?[g[0],g[1],0,g[2],g[3],0,g[4],g[5],1]:g),C=void 0,w=!1,M=!1,P=0,O=0,T=0,z=0,G={hasTransform:!1,fixedContainer:null};y&&(p=!0,h=(G=function(t){for(var e=t.parentElement,r=!1,n=tl(t);e;){var i=n2(e).transform;if(i&&"none"!==i){r=!0;break}if(e===n)break;e=e.parentElement}return{fixedContainer:e||n,hasTransform:r}}(a)).fixedContainer);var k=D.length;!f&&(16===k||S.length)&&(f=!0,d=4,nP(s),o&&(o=tm(o,3,4))),f&&9===k&&(D=tm(D,3,4));var I=function(t,e){var r,n,i,o=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop,u=rl(t),l=R(a),c=!l;return!c&&("svg"!==o||t.ownerSVGElement)?(i=(n=eP?nD(n2(t,":before").transformOrigin).map(function(e,r){var n,i=F(e),o=i.value,a=i.unit;return o*(n=0===r,"%"===a?n_(t.ownerSVGElement)[n?"width":"height"]/100:1)}):nD(u("transformOrigin")).map(function(t){return parseFloat(t)})).slice(),c=!0,"svg"===o?(a=0,s=0):(a=(r=ey(function(t,e,r){var n=t.tagName.toLowerCase();if(!t.getBBox||!r&&"g"===n)return[0,0,0,0];var i="fill-box"===rl(t)("transform-box"),o=t.getBBox(),a=n_(t.ownerSVGElement),s=o.x,u=o.y;"foreignobject"!==n||s||u||(s=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var l=s-a.x,c=u-a.y,f=i?e[0]:e[0]-l,d=i?e[1]:e[1]-c;return[l,c,f,d]}(t,n,t===e&&"g"===e.tagName.toLowerCase()),4))[0],s=r[1],n[0]=r[2],n[1]=r[3])):i=(n=nD(u("transformOrigin")).map(function(t){return parseFloat(t)})).slice(),{tagName:o,isSVG:l,hasOffset:c,offset:[a||0,s||0],origin:n,targetOrigin:i}}(a,t),N=I.tagName,A=I.hasOffset,B=I.isSVG,j=I.origin,q=I.targetOrigin,W=ey(I.offset,2),Y=W[0],X=W[1];"svg"===N&&!a.ownerSVGElement&&o&&(s.push({type:"target",target:a,matrix:function(t,e){var r,n=n_(t),i=n.width,o=n.height,a=n.clientWidth,s=n.clientHeight,u=a/i,l=s/o,c=t.preserveAspectRatio.baseVal,f=c.align,d=c.meetOrSlice,p=[0,0],h=[u,l],v=[0,0];if(1!==f){var g=(f-2)%3,m=Math.floor((f-2)/3);p[0]=i*g/2,p[1]=o*m/2;var b=2===d?Math.max(l,u):Math.min(u,l);h[0]=b,h[1]=b,v[0]=(a-i)/2*g,v[1]=(s-o)/2*m}var x=tG(h,e);return r=ey(v,2),x[e*(e-1)]=r[0],x[e*(e-1)+1]=r[1],nE(x,e,p)}(a,d)}),s.push({type:"offset",target:a,matrix:tz(d)}));var L=parseFloat(m("zoom"))||1;if(y)C=G.fixedContainer,w=!0;else{var H=nw(a,e,!1,!0,m),V=H.offsetZoom;if(C=H.offsetParent,w=H.isEnd,M=H.isStatic,v*=V,(H.isCustomElement||1!==V)&&M)Y-=C.offsetLeft,X-=C.offsetTop;else if((eG||ez)&&H.parentSlotElement){for(var U=C,$=0,K=0;U&&function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(U);)$+=U.offsetLeft,K+=U.offsetTop,U=U.offsetParent;Y-=$,X-=K}}if(eM&&!ek&&A&&!B&&M&&("relative"===b||"static"===b)&&(Y-=C.offsetLeft,X-=C.offsetTop,l=l||w),y)A&&G.hasTransform&&(T=C.clientLeft,z=C.clientTop);else if(A&&h!==C&&(P=C.clientLeft,O=C.clientTop),A&&C===u){var Z=nM(a,!1);Y+=Z[0],X+=Z[1]}if(s.push({type:"target",target:a,matrix:nE(D,d,j)}),S.length&&(s.push({type:"offset",target:a,matrix:tz(d)}),s.push({type:"target",target:a,matrix:nE(tA(S),d,j)})),A){var J=a===t,Q=J?0:a.scrollLeft,tt=J?0:a.scrollTop;s.push({type:"offset",target:a,matrix:tk([Y-Q+P-T,X-tt+O-z],d)})}else s.push({type:"offset",target:a,origin:j});if(1!==L&&s.push({type:"zoom",target:a,matrix:nE(tG([L,L],d),d,[0,0])}),o||(o=D),n||(n=j),i||(i=q),c||y)break;a=C,l=w,r&&a!==u||(c=l)}return o||(o=tz(d)),n||(n=[0,0]),i||(i=[0,0]),{zoom:v,offsetContainer:h,matrixes:s,targetMatrix:o,transformOrigin:n,targetOrigin:i,is3d:f,hasFixed:p}}var ro=null,ra=null,rs=null;function ru(t){t?(window.Map&&(ro=new Map,ra=new Map),rs=[]):(ro=null,rs=null,ra=null)}function rl(t){var e=null==ro?void 0:ro.get(t);if(!e){var r=tc(t).getComputedStyle(t);if(!ro)return function(t){return r[t]};e={style:r,cached:{}},ro.set(t,e)}var n=e.cached,i=e.style;return function(t){return t in n||(n[t]=i[t]),n[t]}}function rc(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,n){return o[n]=o[n]||{},o[n][e]=o[n][e]||{},ex(ex({},r),{isRequestChild:!0,datas:o[n][e],originalDatas:o[n]})})}function rf(t,e,r,n,i,o,a){var s=!!r.match(/Start$/g),u=!!r.match(/End$/g),l=i.isPinch,c=i.datas,f=rc(t,e.name,i),d=t.moveables,p=[],h=f.map(function(t,i){var f=d[i],h=f.state,v=h.gestos,g=t;if(s)g=new eX(a).dragStart(n,t),p.push(g);else{if(v[a]||(v[a]=c.childGestos[i]),!v[a])return;g=eY(t,h,n,l,o,a),p.push(g)}var m=e[r](f,ex(ex({},g),{parentFlag:!0}));return u&&(v[a]=null),m});return s&&(c.childGestos=d.map(function(t){return t.state.gestos[a]})),{eventParams:h,childEvents:p}}function rd(t,e,r,n,i,o){void 0===i&&(i=function(t,e){return e});var a=!!r.match(/End$/g),s=rc(t,e.name,n),u=t.moveables;return s.map(function(t,n){var s=u[n],l=t;l=i(s,t);var c=e[r](s,ex(ex({},l),{parentFlag:!0}));return c&&o&&o(s,t,c,n),a&&(s.state.gestos={}),c})}function rp(t,e,r,n){var i=r.fixedDirection,o=r.fixedPosition,a=e1(n.datas.startPositions||nV(e.state),i),s=ey(tD(tT(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),u=s[0],l=s[1];return n.datas.originalX=u,n.datas.originalY=l,n}function rh(t,e,r,n){var i=t.getState(),o=i.renderPoses,a=i.rotation,s=i.direction,u=nA(t.props,e).zoom,l=nv(a/Math.PI*180),c={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;r.forEach(function(t){c[t.dir]=!0});var p=iv(s);return r.map(function(t){var r=t.data,i=t.classNames,s=t.dir,f=ej[s];if(!f||!c[s])return null;d[s]=!0;var h=(tt(l,15)+p*eq[s]+720)%180,v={};return L(r).forEach(function(t){v["data-".concat(t)]=r[t]}),n.createElement("div",ex({className:ny.apply(void 0,eS(["control","direction",s,e],ey(i),!1)),"data-rotation":h,"data-direction":s},v,{key:"direction-".concat(s),style:nN.apply(void 0,eS([a,u],ey(f.map(function(t){return o[t]})),!1))}))})}function rv(t,e,r,n){var i=nA(t.props,r),o=i.renderDirections,a=void 0===o?e:o,s=i.displayAroundControls;if(!a)return[];var u=!0===a?eC:a;return eS(eS([],ey(s?rx(t,n,r,u):[]),!1),ey(rh(t,r,u.map(function(t){return{data:{},classNames:[],dir:t}}),n)),!1)}function rg(t,e,r,n,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=Z(r,n),l=e?tt(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:ny.apply(void 0,eS(["line","direction",e?"edge":"",e],ey(a),!1)),"data-rotation":l,"data-line-key":o,"data-direction":e,style:nI(r,n,i,u)})}function rm(t,e,r,n,i){return(!0===r?eD:r).map(function(r,o){var a=ey(ej[r],2),s=a[0],u=a[1];if(null!=u)return rg(t,r,n[s],n[u],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function rb(t){return function(e,r){var n=nA(e.props,t).edge;return n&&(!0===n||n.length)?eS(eS([],ey(rm(r,t,n,e.getState().renderPoses,e.props.zoom)),!1),ey(rv(e,["nw","ne","sw","se"],t,r)),!1):rv(e,eC,t,r)}}function rx(t,e,r,n){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=t.getState(),a=o.renderPoses,s=o.rotation,u=o.direction,l=i.renderDirectionMap,c=t.props.zoom,f=iv(u),d=s/Math.PI*180;return(n||L(l)).map(function(t){var n=ej[t];if(!n)return null;var i=(tt(d,15)+f*eq[t]+720)%180,o=["around-control"];return r&&o.push("direction",r),e.createElement("div",{className:ny.apply(void 0,eS([],ey(o),!1)),"data-rotation":i,"data-direction":t,key:"direction-around-".concat(t),style:nN.apply(void 0,eS([s,c],ey(n.map(function(t){return a[t]})),!1))})})}function ry(t,e,r){var n=t||{},i=n.position,o=n.left,a=n.top,s=n.right,u=n.bottom,l={position:void 0===i?"client":i,left:void 0===o?-1/0:o,top:void 0===a?-1/0:a,right:void 0===s?1/0:s,bottom:void 0===u?1/0:u};return{vertical:rE(l,e,!0),horizontal:rE(l,r,!1)}}function rS(t,e){var r=t.state,n=r.containerClientRect,i=n.clientHeight,o=n.clientWidth,a=n.clientLeft,s=n.clientTop,u=r.snapOffset,l=u.left,c=u.top,f=u.right,d=u.bottom,p=e||t.props.bounds||{},h="css"===(p.position||"client"),v=p.left,g=p.top,m=p.right,b=void 0===m?h?-1/0:1/0:m,x=p.bottom,y=void 0===x?h?-1/0:1/0:x;return h&&(b=o+f-l-b,y=i+d-c-y),{left:(void 0===v?-1/0:v)+l-a,right:b+l-a,top:(void 0===g?-1/0:g)+c-s,bottom:y+c-s}}function rE(t,e,r){var n=t[r?"left":"top"],i=t[r?"right":"bottom"],o=Math.min.apply(Math,eS([],ey(e),!1)),a=Math.max.apply(Math,eS([],ey(e),!1)),s=[];return n+1>o&&s.push({direction:"start",isBound:!0,offset:o-n,pos:n}),i-1<a&&s.push({direction:"end",isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,e){return ig(e.offset)-ig(t.offset)})}function rD(t,e,r){return(r?t.map(function(t){return tR(t,r)}):t).some(function(t){return t[0]<e.left&&ig(t[0]-e.left)>.1||t[0]>e.right&&ig(t[0]-e.right)>.1||t[1]<e.top&&ig(t[1]-e.top)>.1||t[1]>e.bottom&&ig(t[1]-e.bottom)>.1})}var rC=["left","right","center"],rw=["top","bottom","middle"],rM={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},rP={start:"left",end:"right",center:"center"},rR={start:"top",end:"bottom",center:"middle"};function r_(){return{left:!1,top:!1,right:!1,bottom:!1}}function rO(t,e){var r=t.props,n=r.snappable,i=r.bounds,o=r.innerBounds,a=r.verticalGuidelines,s=r.horizontalGuidelines,u=r.snapGridWidth,l=r.snapGridHeight,c=t.state,f=c.guidelines,d=c.enableSnap;return!(!n||!d||e&&!0!==n&&0>n.indexOf(e))&&(!!u||!!l||!!i||!!o||!!f&&!!f.length||!!a&&!!a.length||!!s&&!!s.length)}function rT(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function rz(t,e){var r=function(t,e){var r=rT(t),n={};for(var i in r)i in e&&r[i]&&(n[i]=e[i]);return n}(t,e),n=rw.filter(function(t){return t in r}),i=rC.filter(function(t){return t in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(t){return r[t]}),vertical:i.map(function(t){return r[t]})}}var rG="snapRotationThreshold",rk="snapRotationDegrees",rI="snapHorizontalThreshold",rN="snapVerticalThreshold";function rA(t,e,r,n,i,o,a){void 0===n&&(n=[]),void 0===i&&(i=[]);var s,u=t.props,l=(null===(s=t.state.snapThresholdInfo)||void 0===s?void 0:s.multiples)||[1,1],c=n5(a,u[rI],5),f=n5(o,u[rN],5);return rB(t.state.guidelines,e,r,n,i,c,f,l)}function rB(t,e,r,n,i,o,a,s){return{vertical:rW(t,"vertical",e,a*s[0],n),horizontal:rW(t,"horizontal",r,o*s[1],i)}}function rF(t){var e="";return -1===t||"top"===t||"left"===t?e="start":0===t||"center"===t||"middle"===t?e="center":(1===t||"right"===t||"bottom"===t)&&(e="end"),e}function rj(t,e,r,n){var i=rz(t.props.snapDirections,e),o=rA(t,i.vertical,i.horizontal,i.verticalNames.map(function(t){return rF(t)}),i.horizontalNames.map(function(t){return rF(t)}),r,n),a=rF(i.horizontalNames[o.horizontal.index]),s=rF(i.verticalNames[o.vertical.index]);return{vertical:ex(ex({},o.vertical),{direction:s}),horizontal:ex(ex({},o.horizontal),{direction:a})}}function rq(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],i=n.offset,o=n.dist,a=n.guideline;return{isSnap:e,offset:i,dist:o,pos:r.pos,guideline:a}}function rW(t,e,r,n,i){if(void 0===i&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o,a,s="vertical"===e?0:1,u=r.map(function(r,o){var a=i[o]||"",u=t.map(function(t){var e=r-t.pos[s];return{offset:e,dist:ig(e),guideline:t,direction:a}}).filter(function(t){var r=t.guideline,i=t.dist;return r.type===e&&!(i>n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,index:o,guidelineInfos:u,direction:a}}).filter(function(t){return t.guidelineInfos.length>0}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}),l=u.length>0;return{isSnap:l,index:l?u[0].index:-1,direction:null!==(a=null===(o=u[0])||void 0===o?void 0:o.direction)&&void 0!==a?a:"",posInfos:u}}function rY(t,e){var r=ig(t.offset),n=ig(e.offset);if(t.isBound&&e.isBound)return n-r;if(t.isBound)return -1;if(e.isBound)return 1;if(t.isSnap&&e.isSnap)return n-r;if(t.isSnap)return -1;if(e.isSnap)return 1;if(r<1e-7)return 1;else if(n<1e-7)return -1;return r-n}function rX(t,e){return t.slice().sort(function(t,r){var n=t.sign[e],i=r.sign[e],o=t.offset[e],a=r.offset[e];return n?i?rY({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:a}):-1:1})[0]}function rL(t,e){var r=K([e[0][0],e[1][0]]),n=K([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function rH(t,e){var r,n,i=ey(e,2),o=i[0],a=i[1],s=a[0]-o[0],u=a[1]-o[1];return 1e-7>ig(s)&&(s=0),1e-7>ig(u)&&(u=0),s?(r=u?u/s*(t[0]-o[0])+o[1]:o[1],n=t[1]):(r=o[0],n=t[0]),r-n}function rV(t,e,r,n){return void 0===n&&(n=1e-7),t.every(function(t){var i=rH(t,e);return i<=0===r||ig(i)<=n})}function rU(t,e,r,n,i){return(void 0===i&&(i=0),n&&e-i<=t||!n&&t<=r+i)?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function r$(t,e,r,n,i,o){var a=ey(e,2),s=a[0],u=a[1],l=t[0],c=r[0],f=r[1],d=ii(f[1]-c[1]),p=ii(f[0]-c[0]),h=-s/u;if(p){if(!d){if(o&&!u);else{if(s)return rU((c[1]-l[1])/h+l[0],c[0],f[0],n,i);var v=c[1]-l[1],g=ig(v)<=(i||0);return{isBound:g,offset:g?v:0}}}}else if(o&&!s);else{if(u)return rU(h*(c[0]-l[0])+l[1],c[1],f[1],n,i);var v=c[0]-l[0],g=ig(v)<=(i||0);return{isBound:g,offset:g?v:0}}return{isBound:!1,offset:0}}function rK(t,e,r){return e.map(function(e){var n=function(t,e){var r=e.line,n=e.centerSign,i=e.verticalSign,o=e.horizontalSign,a=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,c=s.width,f=s.height,d=[[u,l],[u,l+f]],p=[[u,l],[u+c,l]],h=[[u+c,l],[u+c,l+f]],v=[[u,l+f],[u+c,l+f]];if(rV([[u,l],[u+c,l],[u,l+f],[u+c,l+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=r$(r,a,p,i),m=r$(r,a,v,i),b=r$(r,a,d,o),x=r$(r,a,h,o),y=g.isBound&&m.isBound,S=g.isBound||m.isBound,E=b.isBound&&x.isBound,D=b.isBound||x.isBound,C=n8(g.offset,m.offset),w=n8(b.offset,x.offset),M=[0,0],P=!1,R=!1;return ig(w)<ig(C)?(M=[C,0],P=S,R=y):(M=[0,w],P=D,R=E),{isAllBound:R,isVerticalBound:S,isHorizontalBound:D,isBound:P,offset:M}}(t,e),i=n.isBound,o=n.offset,a=n.isVerticalBound,s=n.isHorizontalBound,u=e.multiple,l=eJ({datas:r,distX:o[0],distY:o[1]}).map(function(t,e){return t*(u[e]?2/u[e]:0)});return{sign:u,isBound:i,isVerticalBound:a,isHorizontalBound:s,isSnap:!1,offset:l}})}function rZ(t,e,r,n){var i,o,a,s=t.state,u=nT(s.allMatrix,100,100,s.is3d?4:3),l=e1(u,[0,0]);return(i=[],o=r[0],a=r[1],o&&a?i.push([[0,2*a],r,[-o,a]],[[2*o,0],r,[o,-a]]):o?(i.push([[2*o,0],[o,1],[o,-1]]),n&&i.push([[0,-1],[o,-1],[-o,-1]],[[0,1],[o,1],[-o,1]])):a?(i.push([[0,2*a],[1,a],[-1,a]]),n&&i.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):i.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),i).map(function(t){var r,n,i,o,a,s,c,f,d=ey(t,3),p=d[0],h=d[1],v=d[2],g=[e1(u,h),e1(u,v)],m=(n=(r=ey(g,2))[0],o=(i=r[1])[0]-n[0],a=i[1]-n[1],1e-7>Math.abs(o)&&(o=0),1e-7>Math.abs(a)&&(a=0),s=0,c=0,f=0,o?a?(c=1,f=(s=-a/o)*n[0]-n[1]):(c=1,f=-n[1]):(s=-1,f=n[0]),[s,c,f].map(function(t){return tt(t,1e-7)})),b=rL(l,g),x=b.vertical,y=b.horizontal;return{multiple:p,centerSign:0>=rH(l,g),verticalSign:x,horizontalSign:y,lineConstants:m,line:[e1(e,h),e1(e,v)]}})}function rJ(t,e,r,n){var i=n?t.map(function(t){return tR(t,n)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t){var n=0>=rH(r,t);return!rV(e,t,n)})}function rQ(t,e,r,n,i){var o=function(t,e,r,n){var i=e[0]-t[0],o=e[1]-t[1];if(1e-7>ig(i)&&(i=0),1e-7>ig(o)&&(o=0),!i)return n?[0,0]:[0,r];if(!o)return n?[r,0]:[0,0];var a=o/i,s=t[1]-a*t[0];if(!n)return[(e[1]+r-s)/a-e[0],r];var u=a*(e[0]+r)+s;return[r,u-e[1]]}(t,e,r,n);if(!o)return{isOutside:!1,offset:[0,0]};var a=Q(t,e),s=Q(o,t),u=Q(o,e),l=ey(eJ({datas:i,distX:o[0],distY:o[1]}),2);return{offset:[l[0],l[1]],isOutside:s>a||u>a}}function r0(t,e){return t.isBound?t.offset:e.isSnap?rq(e).offset:0}function r1(t,e,r,n){void 0===n&&(n=r);var i=ry(rS(t),n.vertical,n.horizontal),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:rA(t,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),u=s.horizontal,l=s.vertical,c=r0(o[0],u),f=r0(a[0],l),d=ig(c),p=ig(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:d,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:p,bounds:a,snap:l}}}function r2(t,e,r,n,i,o,a){void 0===a&&(a=[1,1]);var s=ry(e,r,n),u=s.horizontal,l=s.vertical,c=rB(t,r,n,[],[],i,o,a),f=c.horizontal,d=c.vertical,p=r0(u[0],f),h=r0(l[0],d),v=ig(p),g=ig(h);return{horizontal:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:p,dist:v,bounds:u,snap:f},vertical:{isBound:l[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:h,dist:g,bounds:l,snap:d}}}function r3(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}var r4={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,o=r.zoom,a=t.getState(),s=a.dragInfo,u=a.beforeOrigin;if(n||!i||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=nG(l),f=Z(l,[0,0]);return[e.createElement("div",{className:ny("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(f,"rad) scaleY(").concat(o,")")}})]},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,i=e.parentGesto,o=t.state,a=o.gestos,s=o.style;if(a.draggable)return!1;a.draggable=i||t.targetGesto,r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],eV(t,e),e4(t,e,"translate"),r.absolutePoses=nV(t.state),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var u=nJ(t,e,ex({set:function(t){r.startValue=t}},e3(t,e)));return!1!==(n||n1(t,"onDragStart",u))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(a.draggable=null,r.isPinch=!1),!!r.isDrag&&u},drag:function(t,e){if(e){eU(t,e,"translate");var r,n,i,o=e.datas,a=e.parentEvent,s=e.parentFlag,u=e.isPinch,l=e.deltaOffset,c=e.useSnap,f=e.isRequest,d=e.isGroup,p=e.parentThrottleDrag,h=e.distX,v=e.distY,g=o.isDrag,m=o.prevDist,b=o.prevBeforeDist,x=o.startValue;if(g){l&&(h+=l[0],v+=l[1]);var y=t.props,S=y.parentMoveable,E=d?0:y.throttleDrag||p||0,D=a?0:y.throttleDragRotate||0,C=0,w=!1,M=!1,P=!1,R=!1;if(!a&&D>0&&(h||v)){var _=y.startDragRotate||0,O=tt(_+180*Z([0,0],[h,v])/Math.PI,D)-_,T=v*Math.abs(Math.cos((O-90)/180*Math.PI)),z=nG([h*Math.abs(Math.cos(O/180*Math.PI)),T]);h=z*Math.cos(C=O*Math.PI/180),v=z*Math.sin(C)}if(!u&&!a&&!s){var G=ey(function(t,e,r,n,i,o){if(!rO(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,l,c,f,d,p,h,v,g,m,b,x,y,S,E,D,C,w=nH(o.absolutePoses,[e,r]),M=nz(w),P=M.left,R=M.right,_=M.top,O=M.bottom,T={horizontal:w.map(function(t){return t[1]}),vertical:w.map(function(t){return t[0]})},z=rz(rT(t.props.snapDirections),{left:P,right:R,top:_,bottom:O,center:(P+R)/2,middle:(_+O)/2}),G=r1(t,i,z,T),k=G.vertical,I=G.horizontal,N=(m=rZ(t,w,[0,0],!1).map(function(t){return ex(ex({},t),{multiple:t.multiple.map(function(t){return 2*ig(t)})})}),x=rX(b=rK(t,m,o),0),y=rX(b,1),S=0,E=0,D=x.isVerticalBound||y.isVerticalBound,C=x.isHorizontalBound||y.isHorizontalBound,(D||C)&&(S=(g=ey((u=(a={datas:o,distX:-x.offset[0],distY:-y.offset[1]}).datas,l=a.distX,c=a.distY,u.beforeMatrix,f=u.matrix,d=u.is3d,p=u.startDragBeforeDist,h=u.startDragDist,v=u.absoluteOrigin,tS(tD(f,ty(s?p:h,[l,c]),d?4:3),v)),2))[0],E=g[1]),{vertical:{isBound:D,offset:S},horizontal:{isBound:C,offset:E}}),A=N.vertical,B=N.horizontal,F=k.isSnap,j=I.isSnap,q=k.isBound||A.isBound,W=I.isBound||B.isBound,Y=ey(function(t,e,r,n,i){var o=ey(e,2),a=o[0],s=o[1],u=ey(r,2),l=u[0],c=u[1],f=ey(n,2),d=f[0],p=f[1],h=ey(i,2),v=h[0],g=h[1],m=-v,b=-g;if(t&&a&&s){m=0,b=0;var x=[];if(l&&c?x.push([0,g],[v,0]):l?x.push([v,0]):c?x.push([0,g]):d&&p?x.push([0,g],[v,0]):d?x.push([v,0]):p&&x.push([0,g]),x.length){x.sort(function(t,e){return nG(tS([a,s],t))-nG(tS([a,s],e))});var y=x[0];if(y[0]&&ig(a)>1e-7?b=s*ig(a+(m=-y[0]))/ig(a)-s:y[1]&&ig(s)>1e-7&&(m=a*ig(s+(b=-y[1]))/ig(s)-a),t&&c&&l){if(ig(m)>1e-7&&ig(m)<ig(v)){var S=ig(v)/ig(m);m*=S,b*=S}else if(ig(b)>1e-7&&ig(b)<ig(g)){var S=ig(g)/ig(b);m*=S,b*=S}else m=n8(-v,m),b=n8(-g,b)}}}else m=a||l?-v:0,b=s||c?-g:0;return[m,b]}(n,[e,r],[q,W],[F,j],[n8(k.offset,A.offset),n8(I.offset,B.offset)]),2);return[{isBound:q,isSnap:F,offset:Y[0]},{isBound:W,isSnap:j,offset:Y[1]}]}(t,h,v,D,!c&&f||l,o),2),k=G[0],I=G[1];w=k.isSnap,M=k.isBound,P=I.isSnap,R=I.isBound;var N=k.offset,A=I.offset;h+=N,v+=A}var B=ty(eZ({datas:o,distX:h,distY:v}),x),F=ty((i=ey(eZ({datas:n=(r={datas:o,distX:h,distY:v}).datas,distX:r.distX,distY:r.distY}),2),tD(eK(n,function(t,e){for(var r=tz(4),n=0;n<3;++n)r[4*(e-1)+n]=t[n]||0;return r}([i[0],i[1]],4)),tg([0,0,0],4),4)),x);te(F,1e-7),te(B,1e-7),D||(w||M||(F[0]=tt(F[0],E),B[0]=tt(B[0],E)),P||R||(F[1]=tt(F[1],E),B[1]=tt(B[1],E)));var j=tS(B,x),q=tS(F,x),W=tS(q,m),Y=tS(j,b);o.prevDist=q,o.prevBeforeDist=j,o.passDelta=W,o.passDist=q;var X=o.left+j[0],L=o.top+j[1],H=o.right-j[0],V=o.bottom-j[1],U=e$(o,"translate(".concat(F[0],"px, ").concat(F[1],"px)"),"translate(".concat(q[0],"px, ").concat(q[1],"px)"));if(e6(e,U),t.state.dragInfo.dist=a?[0,0]:q,!(!a&&!S&&W.every(function(t){return!t})&&Y.some(function(t){return!t}))){var $=t.state,K=$.width,J=$.height,Q=nJ(t,e,ex({transform:U,dist:q,delta:W,translate:F,beforeDist:j,beforeDelta:Y,beforeTranslate:B,left:X,top:L,right:H,bottom:V,width:K,height:J,isPinch:u},nK({transform:U},e)));return a||n1(t,"onDrag",Q),Q}}}},dragAfter:function(t,e){var r=e.datas,n=r.deltaOffset;return(!!n[0]||!!n[1])&&(r.deltaOffset=[0,0],this.drag(t,ex(ex({},e),{deltaOffset:n})))},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas;if(t.state.dragInfo=null,n.isDrag){n.isDrag=!1;var i=nQ(t,e,{});return r||n1(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var r,n,i=e.datas,o=e.clientX,a=e.clientY,s=this.dragStart(t,e);if(!s)return!1;var u=rf(t,this,"dragStart",[o||0,a||0],e,!1,"draggable"),l=u.childEvents,c=u.eventParams,f=ex(ex({},s),{targets:t.props.targets,events:c}),d=n1(t,"onDragGroupStart",f);i.isDrag=!1!==d;var p=null!==(n=null===(r=l[0])||void 0===r?void 0:r.datas.startValue)&&void 0!==n?n:[0,0];return i.throttleOffset=[p[0]%1,p[1]%1],!!i.isDrag&&s},dragGroup:function(t,e){if(e.datas.isDrag){var r=this.drag(t,ex(ex({},e),{parentThrottleDrag:t.props.throttleDrag})),n=rf(t,this,"drag",e.datas.passDelta,e,!1,"draggable").eventParams;if(r){var i=ex({targets:t.props.targets,events:n},r);return n1(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var n=rf(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return n1(t,"onDragGroupEnd",nQ(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=t.getRect(),n=0,i=0,o=!1;return{isControl:!1,requestStart:function(t){return{datas:e,useSnap:o=t.useSnap}},request:function(t){return"x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:n,distY:i,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function r5(t,e){return{fixedPosition:e1(t,e),fixedDirection:e,fixedOffset:[0,0]}}function r6(t,e){var r=t.allMatrix,n=t.is3d,i=t.width,o=t.height,a=[i?-1+e[0]/(i/2):0,o?-1+e[1]/(o/2):0];return{fixedPosition:nO(r,e,n?4:3),fixedDirection:a,fixedOffset:[i?0:e[0],o?0:e[1]]}}var r7=ia("resizable"),r8={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:rb("resizable"),dragControlCondition:r7,viewClassName:io("resizable"),dragControlStart:function(t,e){var r,n=e.inputEvent,i=e.isPinch,o=e.isGroup,a=e.parentDirection,s=e.parentGesto,u=e.datas,l=e.parentFixedDirection,c=e.parentEvent,f=nX(a,i,n,u),d=t.state,p=d.target,h=d.width,v=d.height,g=d.gestos;if(!f||!p||g.resizable)return!1;g.resizable=s||t.controlGesto,i||eV(t,e),u.datas={},u.direction=f,u.startOffsetWidth=h,u.startOffsetHeight=v,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=d.inlineCSSWidth||d.cssWidth,u.startHeight=d.inlineCSSHeight||d.cssHeight,u.maxSize=[1/0,1/0],o||(u.minSize=[d.minOffsetWidth,d.minOffsetHeight],u.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";function b(t){u.ratio=t&&isFinite(t)?t:0}function x(t){var e=r5(u.startPositions,t);u.fixedDirection=e.fixedDirection,u.fixedPosition=e.fixedPosition,u.fixedOffset=e.fixedOffset}function y(e){var r=r6(t.state,e);u.fixedDirection=r.fixedDirection,u.fixedPosition=r.fixedPosition,u.fixedOffset=r.fixedOffset}function S(t){u.minSize=[H("".concat(t[0]),0)||0,H("".concat(t[1]),0)||0]}function E(t){var e=[t[0]||1/0,t[1]||1/0];(!z(e[0])||isFinite(e[0]))&&(e[0]=H("".concat(e[0]),0)||1/0),(!z(e[1])||isFinite(e[1]))&&(e[1]=H("".concat(e[1]),0)||1/0),u.maxSize=e}u.transformOrigin=m&&T(m)?m.split(" "):m,u.startOffsetMatrix=d.offsetMatrix,u.startTransformOrigin=d.transformOrigin,u.isWidth=null!==(r=null==e?void 0:e.parentIsWidth)&&void 0!==r?r:!f[0]&&!f[1]||f[0]||!f[1],u.startPositions=nV(t.state),b(h/v),x(l||[-f[0],-f[1]]),u.setFixedDirection=x,u.setFixedPosition=y,u.setMin=S,u.setMax=E;var D=nJ(t,e,{direction:f,startRatio:u.ratio,set:function(t){var e=ey(t,2),r=e[0],n=e[1];u.startWidth=r,u.startHeight=n},setMin:S,setMax:E,setRatio:b,setFixedDirection:x,setFixedPosition:y,setOrigin:function(t){u.transformOrigin=t},dragStart:r4.dragStart(t,new eX().dragStart([0,0],e))}),C=c||n1(t,"onResizeStart",D);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,!1!==C&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),!!u.isResize&&D},dragControl:function(t,e){var r,n,i,o,a,s,u,l,c,f,d,p,h,v,g,m,b,x,y,S,E,D,C=e.datas,w=e.parentFlag,M=e.isPinch,P=e.parentKeepRatio,R=e.dragClient,_=e.parentDist,O=e.useSnap,T=e.isRequest,z=e.isGroup,G=e.parentEvent,k=e.resolveMatrix,I=C.isResize,N=C.transformOrigin,A=C.startWidth,B=C.startHeight,j=C.prevWidth,q=C.prevHeight,W=C.minSize,Y=C.maxSize,X=C.ratio,L=C.startOffsetWidth,H=C.startOffsetHeight,V=C.isWidth;if(I){if(k){var U=t.state.is3d,K=C.startOffsetMatrix,Z=C.startTransformOrigin,J=U?4:3,Q=tA(e8(e)),te=Math.sqrt(Q.length);J!==te&&(Q=tm(Q,te,J));var tr=e2(K,Q,Z,J),tn=nT(tr,L,H,J);C.startPositions=tn,C.nextTargetMatrix=Q,C.nextAllMatrix=tr}var ti=nA(t.props,"resizable"),to=ti.resizeFormat,ta=ti.throttleResize,ts=void 0===ta?w?0:1:ta,tu=ti.parentMoveable,tl=ti.keepRatioFinally,tc=C.direction,tf=tc,td=0,tp=0;tc[0]||tc[1]||(tf=[1,1]);var th=X&&(null!=P?P:ti.keepRatio)||!1,tv=ey(tO(),2),tg=tv[0],tb=tv[1];G||(C.setFixedDirection(C.fixedDirection),n1(t,"onBeforeResize",nJ(t,e,{startFixedDirection:C.startFixedDirection,startFixedPosition:C.startFixedPosition,setFixedDirection:function(t){var e;return C.setFixedDirection(t),tg=(e=ey(tO(),2))[0],tb=e[1],[tg,tb]},setFixedPosition:function(t){var e;return C.setFixedPosition(t),tg=(e=ey(tO(),2))[0],tb=e[1],[tg,tb]},boundingWidth:tg,boundingHeight:tb,setSize:function(t){var e;tg=(e=ey(t,2))[0],tb=e[1]}},!0)));var tx=R;R||(!w&&M?(r=[0,0],tx=e1(nV(t.state),r)):tx=C.fixedPosition);var ty=[0,0];if(M||(ty=function(t,e,r,n,i,o,a){if(!rO(t,"resizable"))return[0,0];var s=a.fixedDirection,u=a.nextAllMatrix,l=t.state,c=l.allMatrix,f=l.is3d;return nh(t,function(t,n){return np(u||c,e+t,r+n,s,i,f)},e,r,n,i,o,a)}(t,tg,tb,tc,tx,!O&&T,C)),_&&(_[0]||(ty[0]=0),_[1]||(ty[1]=0)),th){tf[0]&&tf[1]&&ty[0]&&ty[1]&&(ig(ty[0])>ig(ty[1])?ty[1]=0:ty[0]=0);var tE=!ty[0]&&!ty[1];tE&&tT(),tf[0]&&!tf[1]||ty[0]&&!ty[1]||tE&&V?(tg+=ty[0],tb=tg/X):(!tf[0]&&tf[1]||!ty[0]&&ty[1]||tE&&!V)&&(tb+=ty[1],tg=tb*X)}else tg+=ty[0],tb+=ty[1],tg=Math.max(0,tg),tb=Math.max(0,tb);tg=(D=ey($([tg,tb],W,Y,!!th&&X),2))[0],tb=D[1],tT(),th&&(z||tl)&&(V?tb=tg/X:tg=tb*X);var tD=[(td=tg-L)-j,(tp=tb-H)-q];C.prevWidth=td,C.prevHeight=tp;var tC=(n=tg,i=tb,o=tx,a=t.props.groupable,u=(s=t.state).transformOrigin,l=s.offsetMatrix,c=s.is3d,f=s.width,d=s.height,p=s.left,h=s.top,v=C.fixedDirection,g=C.nextTargetMatrix||s.targetMatrix,m=c?4:3,tS((E=e1(nT(e2(l,g,(b=f,x=d,y=u,(void 0===b&&(b=n),void 0===x&&(x=i),void 0===y&&(y=[0,0]),N)?N.map(function(t,e){var r=F(t),o=r.value,a=r.unit,s=e?x:b,u=e?i:n;return"%"===t||isNaN(o)?u*(s?y[e]/s:0):"%"!==a?o:u*o/100}):y),m),n,i,m),v),[o[0]-E[0],o[1]-E[1]]),[a?p:0,a?h:0]));if(!(!tu&&tD.every(function(t){return!t})&&tC.every(function(t){return!t}))){var tw=r4.drag(t,eY(e,t.state,tC,!!M,!1,"draggable")),tM=tw.transform,tP=A+td,tR=B+tp,t_=nJ(t,e,ex({width:tP,height:tR,offsetWidth:Math.round(tg),offsetHeight:Math.round(tb),startRatio:X,boundingWidth:tg,boundingHeight:tb,direction:tc,dist:[td,tp],delta:tD,isPinch:!!M,drag:tw},nZ({style:{width:"".concat(tP,"px"),height:"".concat(tR,"px")},transform:tM},tw,e)));return G||n1(t,"onResize",t_),t_}}function tO(){var t=C.fixedDirection,r=id(tf,th,C,e);td=r.distWidth,tp=r.distHeight;var n=tf[0]-t[0]||th?Math.max(L+td,1e-7):L,i=tf[1]-t[1]||th?Math.max(H+tp,1e-7):H;return th&&L&&H&&(V?i=n/X:n=i*X),[n,i]}function tT(){var t;to&&(tg=(t=ey(to([tg,tb]),2))[0],tb=t[1]),tg=tt(tg,ts),tb=tt(tb,ts)}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,a=r.prevWidth,s=r.prevHeight;if(n&&!1!==t.props.checkResizableError){var u=t.state,l=u.width,c=u.height,f=l-(i+a),d=c-(o+s),p=ig(f)>3,h=ig(d)>3;if(p&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),h&&(r.startHeight+=d,r.startOffsetHeight+=d,r.prevHeight+=d),p||h)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var r=e.datas,n=e.parentEvent;if(r.isResize){r.isResize=!1;var i=nQ(t,e,{});return n||n1(t,"onResizeEnd",i),i}},dragGroupControlCondition:r7,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,ex(ex({},e),{isGroup:!0}));if(!n)return!1;var i=rc(t,"resizable",e),o=r.startOffsetWidth,a=r.startOffsetHeight;function s(){var t=r.minSize;i.forEach(function(e){var r=e.datas,n=r.minSize,i=r.startOffsetWidth,s=r.startOffsetHeight,u=o*(i?n[0]/i:0),l=a*(s?n[1]/s:0);t[0]=Math.max(t[0],u),t[1]=Math.max(t[1],l)})}function u(){var t=r.maxSize;i.forEach(function(e){var r=e.datas,n=r.maxSize,i=r.startOffsetWidth,s=r.startOffsetHeight,u=o*(i?n[0]/i:0),l=a*(s?n[1]/s:0);t[0]=Math.min(t[0],u),t[1]=Math.min(t[1],l)})}var l=rd(t,this,"dragControlStart",e,function(e,n){return rp(t,e,r,n)});s(),u();var c=function(e){n.setFixedDirection(e),l.forEach(function(n,o){n.setFixedDirection(e),rp(t,n.moveable,r,i[o])})};r.setFixedDirection=c;var f=ex(ex({},n),{targets:t.props.targets,events:l.map(function(t){return ex(ex({},t),{setMin:function(e){t.setMin(e),s()},setMax:function(e){t.setMax(e),u()}})}),setFixedDirection:c,setMin:function(t){n.setMin(t),s()},setMax:function(t){n.setMax(t),u()}}),d=n1(t,"onResizeGroupStart",f);return r.isResize=!1!==d,!!r.isResize&&n},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=nA(t.props,"resizable");n0(t,"onBeforeResize",function(r){n1(t,"onBeforeResizeGroup",nJ(t,e,ex(ex({},r),{targets:n.targets}),!0))});var i=this.dragControl(t,ex(ex({},e),{isGroup:!0}));if(i){var o=i.boundingWidth,a=i.boundingHeight,s=i.dist,u=n.keepRatio,l=[o/(o-s[0]),a/(a-s[1])],c=r.fixedPosition,f=rd(t,this,"dragControl",e,function(e,r){var n=ey(tD(tT(t.rotation/180*Math.PI,3),[r.datas.originalX*l[0],r.datas.originalY*l[1],1],3),2),i=n[0],o=n[1];return ex(ex({},r),{parentDist:null,parentScale:l,dragClient:ty(c,[i,o]),parentKeepRatio:u})}),d=ex({targets:n.targets,events:f},i);return n1(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var n=rd(t,this,"dragControlEnd",e),i=nQ(t,e,{targets:t.props.targets,events:n});return n1(t,"onResizeGroupEnd",i),r}},request:function(t){var e={},r=0,n=0,i=!1,o=t.getRect();return{isControl:!0,requestStart:function(t){var r;return i=t.useSnap,{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(r=null==t?void 0:t.horizontal)||void 0===r||r,useSnap:i}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-o.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-o.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[r,n],parentKeepRatio:t.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function r9(t,e,r,n,i){var o=t.props.groupable,a=t.state,s=a.is3d?4:3,u=e.origin,l=nO(t.state.rootMatrix,tS([u[0],u[1]],o?[0,0]:[a.left,a.top]),s),c=ty([i.left,i.top],l);e.startAbsoluteOrigin=c,e.prevDeg=Z(c,[r,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Q(c,[r,n])}function nt(t,e,r){var n=r.defaultDeg,i=r.prevDeg,o=i%360,a=Math.floor(i/360);o<0&&(o+=360),o>t&&o>270&&t<90?++a:o<t&&o<90&&t>270&&--a;var s=e*(360*a+t-n);return r.prevDeg=n+s,s}function ne(t,e,r,n){return nt(Z(n.startAbsoluteOrigin,[t,e])/Math.PI*180,r,n)}function nr(t,e,r,n,i,o){var a=t.props.throttleRotate,s=r.prevSnapDeg,u=0,l=!1;if(o){var c=function(t,e,r,n){var i,o=t.props,a=null!==(i=o[rG])&&void 0!==i?i:5,s=o[rk];if(rO(t,"rotatable")){var u=e.pos1,l=e.pos2,c=e.pos3,f=e.pos4,d=e.origin,p=r*Math.PI/180,h=[u,l,c,f].map(function(t){return tS(t,d)}),v=h.map(function(t){return tR(t,p)}),g=eS(eS([],ey(function(t,e,r,n,i){if(!t.props.bounds)return[];var o=i*Math.PI/180,a=rS(t),s=a.left,u=a.top,l=a.right,c=a.bottom,f=s-n[0],d=l-n[0],p=u-n[1],h=c-n[1],v={left:f,top:p,right:d,bottom:h};if(!rD(r,v,0))return[];var g=[];return[[f,0],[d,0],[p,1],[h,1]].forEach(function(t){var n=ey(t,2),i=n[0],a=n[1];r.forEach(function(t){var r,n,s=Z([0,0],t);g.push.apply(g,eS([],ey([n=Math.sqrt((r=nG(t))*r-i*i)||0,-n].sort(function(e,r){return ig(e-t[a?0:1])-ig(r-t[a?0:1])}).map(function(t){return Z([0,0],a?[t,i]:[i,t])}).map(function(t){return o+t-s}).filter(function(t){return!rD(e,v,t)}).map(function(t){return tt(180*t/Math.PI,1e-7)})),!1))})}),g}(t,h,v,d,r)),!1),ey(function(t,e,r,n,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,f=s-n[0],d=s+l-n[0],p=u-n[1],h=u+c-n[1],v=[[f,p],[d,p],[f,h],[d,h]],g=e1(r,[0,0]);if(!rJ(r,v,g,0))return[];var m=[],b=v.map(function(t){return[nG(t),Z([0,0],t)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(t){var r=Z([0,0],function(t){var e=ey(t,2),r=e[0],n=e[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return[r[0],0];if(!o)return[0,r[1]];var a=o/i,s=-a*r[0]+r[1];return[-s/(a+1/a),s/(a*a+1)]}(t)),n=function(t){var e=ey(t,2),r=e[0],n=e[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return ig(r[0]);if(!o)return ig(r[1]);var a=o/i;return ig((-a*r[0]+r[1])/Math.sqrt(Math.pow(a,2)+1))}(t);m.push.apply(m,eS([],ey(b.filter(function(t){var e=ey(t,1)[0];return e&&n<=e}).map(function(t){var e=ey(t,2),i=e[0],o=e[1],s=Math.acos(i?n/i:0);return[a+(o+s)-r,a+(o-s)-r]}).reduce(function(t,e){return t.push.apply(t,eS([],ey(e),!1)),t},[]).filter(function(t){return!rJ(e,v,g,t)}).map(function(t){return tt(180*t/Math.PI,1e-7)})),!1))}),m}(t,h,v,d,r)),!1);g.sort(function(t,e){return ig(t-r)-ig(e-r)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:r}}if((null==s?void 0:s.length)&&a){var b,x,y,S,E=s.slice().sort(function(t,e){return ng(t,n)-ng(e,n)})[0];if(ng(E,n)<=a)return{isSnap:!0,dist:r+(b=nv(b=E),y=360*(x=Math.floor(n/360))+360-b,S=360*x+b,ig(n-y)<ig(n-S)?y:S)-n}}return{isSnap:!1,dist:r}}(t,e,n,i+n);l=c.isSnap,u=i+c.dist}l||(u=tt(i+n,void 0===a?0:a));var f=u-i;return r.prevSnapDeg=f,[f-s,f,u]}function nn(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var r=e.inputEvent.target;if(tr(r,ny("rotation-control"))||t.props.rotateAroundControls&&tr(r,ny("around-control"))||tr(r,ny("control"))&&tr(r,ny("rotatable")))return!0;var n=t.props.rotationTarget;return!!n&&iu(n,!0).some(function(t){return!!t&&(r===t||r.contains(t))})}function ni(t,e){var r,n,i,o,a,s,u,l,c,f;return i=(r=ex(ex({},t),{classNames:eS([ny("line","guideline",t.direction)],ey(t.classNames),!1).filter(function(t){return t}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(t){return"".concat(tt(t,.1),"px")})})).direction,o=r.classNames,a=r.size,s=r.pos,u=r.zoom,l=r.key,f=(c="horizontal"===i)?"Y":"X",e.createElement("div",{key:l,className:o.join(" "),style:((n={})[c?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(u,")"),n)})}function no(t,e,r,n,i,o,a,s){var u=t.props.zoom;return r.map(function(t,r){var l=t.type,c=t.pos,f=[0,0];return f[a]=n,f[a?0:1]=-i+c,ni({key:"".concat(e,"TargetGuideline").concat(r),classNames:[ny("target","bold",l)],posValue:f,sizeValue:o,zoom:u,direction:e},s)})}function na(t,e,r,n,i,o){var a=t.props,s=a.zoom,u=a.isDisplayInnerSnapDigit,l="horizontal"===e?rP:rR,c=i[l.start],f=i[l.end];return r.filter(function(t){var e=t.hide,r=t.elementRect;if(e)return!1;if(u&&r){var n=r.rect;if(n[l.start]<=c&&f<=n[l.end])return!1}return!0}).map(function(t,r){var i=t.pos,a=t.size,u=t.element,l=t.className,c=[-n[0]+i[0],-n[1]+i[1]];return ni({key:"".concat(e,"-default-guideline-").concat(r),classNames:u?[ny("bold"),l]:[ny("normal"),l],direction:e,posValue:c,sizeValue:a,zoom:s},o)})}function ns(t,e,r,n,i,o,a,s){var u,l=t.props,c=l.snapDigit,f=l.isDisplaySnapDigit,d=l.snapDistFormat,p=l.zoom,h="horizontal"===e?"X":"Y",v="vertical"===e?"height":"width",g=Math.abs(i),m=void 0===f||f?parseFloat(g.toFixed(void 0===c?0:c)):0;return s.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(n),className:ny("guideline-group",e),style:((u={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")})[v]="".concat(g,"px"),u)},ni({direction:e,classNames:[ny(r),a],size:"100%",posValue:[0,0],sizeValue:g,zoom:p},s),s.createElement("div",{className:ny("size-value","gap"),style:{transform:"translate".concat(h,"(-50%) scale(").concat(p,")")}},m>0?(void 0===d?function(t,e){return t}:d)(m,e):""))}function nu(t){var e,r,n,i,o,a,s,u,l,c=t.state,f=c.containerClientRect,d=c.hasFixed,p=f.overflow,h=f.scrollHeight,v=f.scrollWidth,g=f.clientHeight,m=f.clientWidth,b=f.clientLeft,x=f.clientTop,y=t.props,S=y.snapGap,E=y.verticalGuidelines,D=y.horizontalGuidelines,C=y.snapThreshold,w=void 0===C?5:C,M=y.maxSnapElementGuidelineDistance,P=void 0===M?1/0:M,R=y.isDisplayGridGuidelines,O=nz(nV(t.state)),T=O.top,z=O.left,G=O.bottom,k=O.right,I={top:T,left:z,bottom:G,right:k,center:(z+k)/2,middle:(T+G)/2},N=eS([],ey(function(t){var e=t.state,r=t.props.elementGuidelines,n=void 0===r?[]:r;if(!n.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(t){return!t.refresh}),o=n.map(function(t){return _(t)&&"element"in t?ex(ex({},t),{element:is(t.element,!0)}):{element:is(t,!0)}}).filter(function(t){return t.element}),a=tL(i.map(function(t){return t.element}),o.map(function(t){return t.element}),tU),s=a.maintained,u=a.added,l=[];s.forEach(function(t){var e=ey(t,2),r=e[0];l[e[1]]=i[r]}),(function(t,e){if(!e.length)return[];var r,n=t.props.groupable,i=t.state,o=i.containerClientRect,a=i.rootMatrix,s=i.is3d,u=i.offsetDelta,l=s?4:3,c=ey((r=nO(a,[o.clientLeft,o.clientTop],l),[o.left+r[0],o.top+r[1]]),2),f=c[0],d=c[1],p=n?0:u[0],h=n?0:u[1];return e.map(function(t){var e=t.element.getBoundingClientRect(),r=e.left-f-p,n=e.top-d-h,i=n+e.height,o=r+e.width,s=ey(n9(a,[r,n],l),2),u=s[0],c=s[1],v=ey(n9(a,[o,i],l),2),g=v[0],m=v[1];return ex(ex({},t),{rect:{left:u,right:g,top:c,bottom:m,center:(u+g)/2,middle:(c+m)/2}})})})(t,u.map(function(t){return o[t]})).map(function(t,e){l[u[e]]=t}),e.elementRects=l;var c=rT(t.props.elementSnapDirections),f=[];return l.forEach(function(t){var e=t.element,r=t.top,n=void 0===r?c.top:r,i=t.left,o=void 0===i?c.left:i,a=t.right,s=void 0===a?c.right:a,u=t.bottom,l=void 0===u?c.bottom:u,d=t.center,p=void 0===d?c.center:d,h=t.middle,v=void 0===h?c.middle:h,g=t.className,m=t.rect,b=rz({top:n,right:s,left:o,bottom:l,center:p,middle:v},m),x=b.horizontal,y=b.vertical,S=b.horizontalNames,E=b.verticalNames,D=m.top,C=m.left,w=m.right-C,M=m.bottom-D,P=[w,M];y.forEach(function(r,n){f.push({type:"vertical",element:e,pos:[tt(r,.1),D],size:M,sizes:P,className:g,elementRect:t,elementDirection:rM[E[n]]||E[n],direction:""})}),x.forEach(function(r,n){f.push({type:"horizontal",element:e,pos:[C,tt(r,.1)],size:w,sizes:P,className:g,elementRect:t,elementDirection:rM[S[n]]||S[n],direction:""})})}),f}(t)),!1),A=(null!==(l=null===(u=c.snapThresholdInfo)||void 0===u?void 0:u.multiples)&&void 0!==l?l:[1,1]).map(function(t){return t*w});(void 0===S||S)&&N.push.apply(N,eS([],ey((n=void 0===(r=(e=t.props).maxSnapElementGuidelineDistance)?1/0:r,o=void 0===(i=e.maxSnapElementGapDistance)?1/0:i,a=t.state.elementRects,s=[],[["vertical",rP,rR],["horizontal",rR,rP]].forEach(function(t){var e=ey(t,3),r=e[0],i=e[1],u=e[2],l=I[i.start],c=I[i.end],f=I[i.center],d=I[u.start],p=I[u.end],h={left:A[0],top:A[1]};function v(t){var e=t.rect,r=h[i.start];return e[i.end]<l+r?l-e[i.end]:c-r<e[i.start]?e[i.start]-c:-1}var g=a.filter(function(t){var e=t.rect;return!(e[u.start]>p)&&!(e[u.end]<d)&&v(t)>0}).sort(function(t,e){return v(t)-v(e)}),m=[];g.forEach(function(t){g.forEach(function(e){if(t!==e){var r=t.rect,n=e.rect,i=r[u.start],o=r[u.end],a=n[u.start];i>n[u.end]||a>o||m.push([t,e])}})}),m.forEach(function(t){var e=ey(t,2),a=e[0],u=e[1],d=a.rect,p=u.rect,v=d[i.start],g=d[i.end],m=p[i.start],b=p[i.end],x=h[i.start],y=0,S=0,E=!1,D=!1,C=!1;if(g<=l&&c<=m){if(D=!0,y=(m-g-(c-l))/2,ig((S=g+y+(c-l)/2)-f)>x)return}else if(g<m&&b<l+x){if(E=!0,ig((S=b+(y=m-g))-l)>x)return}else if(!(g<m)||!(c-x<v))return;else if(C=!0,ig((S=v-(y=m-g))-c)>x)return;y&&nl(I,p,r,n)&&!(y>o)&&s.push({type:r,pos:"vertical"===r?[S,0]:[0,S],element:u.element,size:0,className:u.className,isStart:E,isCenter:D,isEnd:C,gap:y,hide:!0,gapRects:[a,u],direction:"",elementDirection:""})})}),s)),!1));var B=ex({},c.snapOffset||{left:0,top:0,bottom:0,right:0});if(N.push.apply(N,eS([],ey(function(t,e,r,n,i,o,a){void 0===n&&(n=0),void 0===i&&(i=0);var s=t.props,u=t.state,l=s.snapGridWidth,c=void 0===l?0:l,f=s.snapGridHeight,d=void 0===f?0:f,p=[],h=o.left,v=o.top,g=[0,0];!function(t,e,r,n){var i,o,a=t.props,s=t.state,u=a.snapGridAll,l=a.snapGridWidth,c=void 0===l?0:l,f=a.snapGridHeight,d=void 0===f?0:f,p=s.snapRenderInfo,h=p&&((null===(i=p.direction)||void 0===i?void 0:i[0])||(null===(o=p.direction)||void 0===o?void 0:o[1])),v=t.moveables;if(u&&v&&h&&(c||d)){if(s.snapThresholdInfo)return;s.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=t.getRect(),m=g.children,b=p.direction;if(m){var x=b.map(function(t,i){var o,a,s,u=0===i?{snapSize:c,posName:"left",sizeName:"width",clientOffset:n.left-e}:{snapSize:d,posName:"top",sizeName:"height",clientOffset:n.top-r},l=u.snapSize,f=u.posName,p=u.sizeName,h=u.clientOffset;if(!l)return{dir:t,multiple:1,snapSize:l,snapOffset:0};var v=g[p],b=g[f],x=m.map(function(t){return[t[f]-b,t[p],v-t[p]-t[f]+b]}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t}).sort(function(t,e){return t-e}),y=x[0],S=x.map(function(t){return tt(t/y,.1)*l}),E=1,D=tt(v/y,.1);for(E=1;E<=10&&!S.every(function(t){return t*E%1==0});++E);var C=(-t+1)/2,w=(o=b-h,a=b-h+v,(o*(s=1-C)+a*C)/(C+s));return{multiple:D*E,dir:t,snapSize:l,snapOffset:Math.round(w/l)}}),y=x.map(function(t){return t.multiple||1});s.snapThresholdInfo.multiples=y,s.snapThresholdInfo.offset=x.map(function(t){return t.snapOffset}),x.forEach(function(t,e){t.snapSize})}}else s.snapThresholdInfo=null}(t,n,i,o);var m=u.snapThresholdInfo,b=c,x=d;if(m&&(c*=m.multiples[0]||1,d*=m.multiples[1]||1,g=m.offset),d){for(var y=function(t){p.push({type:"horizontal",pos:[h,tt(g[1]*x+t-i+v,.1)],className:ny("grid-guideline"),size:e,hide:!a,direction:"",grid:!0})},S=0;S<=2*r;S+=d)y(S);for(var S=-d;S>=-r;S-=d)y(S)}if(c){for(var y=function(t){p.push({type:"vertical",pos:[tt(g[0]*b+t-n+h,.1),v],className:ny("grid-guideline"),size:r,hide:!a,direction:"",grid:!0})},S=0;S<=2*e;S+=c)y(S);for(var S=-c;S>=-e;S-=c)y(S)}return p}(t,p?v:m,p?h:g,b,x,B,R)),!1)),d){var F=f.left,j=f.top;B.left+=F,B.top+=j,B.right+=F,B.bottom+=j}return N.push.apply(N,eS([],ey(nf(D||!1,E||!1,p?v:m,p?h:g,b,x,B)),!1)),N=N.filter(function(t){var e=t.element,r=t.elementRect,n=t.type;return!e||!r||nl(I,r.rect,n,P)})}function nl(t,e,r,n){return"horizontal"===r?ig(t.right-e.left)<=n||ig(t.left-e.right)<=n||t.left<=e.right&&e.left<=t.right:"vertical"!==r||ig(t.bottom-e.top)<=n||ig(t.top-e.bottom)<=n||t.top<=e.bottom&&e.top<=t.bottom}function nc(t,e){return t?t.map(function(t){var r=_(t)?t:{pos:t},n=r.pos;return z(n)?r:ex(ex({},r),{pos:H(n,e)})}):[]}function nf(t,e,r,n,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],u=a.left,l=a.top,c=a.bottom,f=r+a.right-u,d=n+c-l;return nc(t,d).forEach(function(t){s.push({type:"horizontal",pos:[u,tt(t.pos-o+l,.1)],size:f,className:t.className,direction:""})}),nc(e,f).forEach(function(t){s.push({type:"vertical",pos:[tt(t.pos-i+u,.1),l],size:d,className:t.className,direction:""})}),s}function nd(t){var e=t.state,r=e.container,n=t.props.snapContainer||r;if(e.snapContainer===n&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(r!==n){var a=is(n,!0);if(a){var s=nY(a),u=il(e,[s.left-i.left,s.top-i.top]),l=il(e,[s.right-i.right,s.bottom-i.bottom]);o.left=tt(u[0],1e-5),o.top=tt(u[1],1e-5),o.right=tt(l[0],1e-5),o.bottom=tt(l[1],1e-5)}}return e.snapContainer=n,e.snapOffset=o,e.guidelines=nu(t),e.enableSnap=!0,!0}function np(t,e,r,n,i,o){var a=nT(t,e,r,o?4:3),s=e1(a,n);return nH(a,tS(i,s))}function nh(t,e,r,n,i,o,a,s){for(var u=nV(t.state),l=t.props.keepRatio,c=0,f=0,d=0;d<2;++d){var p=function(t,e,r,n,i,o){var a=function(t,e,r){var n=[];if(r)1!==ig(e[0])||1!==ig(e[1])?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(t){[1,-1].forEach(function(r){var o=[t*i[0],r*i[1]];(e[0]!==o[0]||e[1]!==o[1])&&n.push([e,o])})})}else if(t[0]){var o=1===ig(e[0])?[1]:[1,-1];o.forEach(function(r){n.push([[e[0],-1],[r*t[0],-1]],[[e[0],0],[r*t[0],0]],[[e[0],1],[r*t[0],1]])})}else if(t[1]){var o=1===ig(e[1])?[1]:[1,-1];o.forEach(function(r){n.push([[-1,e[1]],[-1,r*t[1]]],[[0,e[1]],[0,r*t[1]]],[[1,e[1]],[1,r*t[1]]])})}return n}(r,o.fixedDirection,n),s=rZ(t,e,r,n),u=eS(eS([],ey(a.map(function(r){var a,s,u,l,c,f,d,p,h,v,g,m,b=ey(r,2),x=b[0],y=b[1],S=e1(e,x),E=e1(e,y),D=n?function(t,e,r,n){var i=function(t,e,r){var n=rS(t),i=n.left,o=n.top,a=n.right,s=n.bottom,u=ey(r,2),l=u[0],c=u[1],f=ey(tS(r,e),2),d=f[0],p=f[1];1e-7>ig(d)&&(d=0),1e-7>ig(p)&&(p=0);var h=p>0,v=d>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(0===d&&0===p);else if(0===d)h?s<c&&(m.pos=s,m.offset=c-s):o>c&&(m.pos=o,m.offset=c-o);else if(0===p)v?a<l&&(g.pos=a,g.offset=l-a):i>l&&(g.pos=i,g.offset=l-i);else{var b=p/d,x=r[1]-b*l,y=0,S=0,E=!1;v&&a<=l?(y=b*a+x,S=a,E=!0):!v&&l<=i&&(y=b*i+x,S=i,E=!0),E&&(y<o||y>s)&&(E=!1),E||(h&&s<=c?(S=((y=s)-x)/b,E=!0):h||!(c<=o)||(S=((y=o)-x)/b,E=!0)),E&&(g.isBound=!0,g.pos=S,g.offset=l-S,m.isBound=!0,m.pos=y,m.offset=c-y)}return{vertical:g,horizontal:m}}(t,e,r),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var n=ey(r,2),i=n[0],o=n[1],a=ey(e,2),s=a[0],u=a[1],l=ey(tS(r,e),2),c=l[0],f=l[1],d=f>0,p=c>0;c=ii(c),f=ii(f);var h={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(0===c&&0===f)return{vertical:h,horizontal:v};var g=rA(t,c?[i]:[],f?[o]:[],[],[],void 0,void 0),m=g.vertical,b=g.horizontal;m.posInfos.filter(function(t){var e=t.pos;return p?e>=s:e<=s}),b.posInfos.filter(function(t){var e=t.pos;return d?e>=u:e<=u}),m.isSnap=m.posInfos.length>0,b.isSnap=b.posInfos.length>0;var x=rq(m),y=x.isSnap,S=x.guideline,E=rq(b),D=E.isSnap,C=E.guideline,w=D?C.pos[1]:0,M=y?S.pos[0]:0;if(0===c)D&&(v.isSnap=!0,v.pos=C.pos[1],v.offset=o-v.pos);else if(0===f)y&&(h.isSnap=!0,h.pos=M,h.offset=i-M);else{var P=f/c,R=r[1]-P*i,_=0,O=0,T=!1;y?(_=P*(O=M)+R,T=!0):D&&(O=((_=w)-R)/P,T=!0),T&&(h.isSnap=!0,h.pos=O,h.offset=i-O,v.isSnap=!0,v.pos=_,v.offset=o-_)}return{vertical:h,horizontal:v}}(t,e,r),u=s.horizontal,l=s.vertical,c=r3(o,u),f=r3(a,l),d=ig(c),p=ig(f);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:d},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:p}}}(t,S,E,i):r1(t,i,{vertical:[E[0]],horizontal:[E[1]]}),C=D.horizontal,w=C.offset,M=C.isBound,P=C.isSnap,R=D.vertical,_=R.offset,O=R.isBound,T=R.isSnap,z=tS(y,x);if(!_&&!w)return{isBound:O||M,isSnap:T||P,sign:z,offset:[0,0]};var G=(a=Z(S,E)/Math.PI*180,u=(s=D.vertical).isBound,l=s.isSnap,c=s.dist,d=(f=D.horizontal).isBound,p=f.isSnap,h=f.dist,g=(v=a%180)<3||v>177,m=v>87&&v<93,h<c&&(u||l&&!m&&(!n||!g))?"vertical":!d&&(!p||g||n&&m)?"":"horizontal");if(!G)return{sign:z,isBound:!1,isSnap:!1,offset:[0,0]};var k="vertical"===G,I=[0,0];return I=(I=n||1!==ig(y[0])||1!==ig(y[1])||x[0]===y[0]||x[1]===y[1]?rQ(S,E,-(k?_:w),k,o).offset:eJ({datas:o,distX:-_,distY:-w})).map(function(t,e){return t*(z[e]?2/z[e]:0)}),{sign:z,isBound:k?O:M,isSnap:k?T:P,offset:I}})),!1),ey(rK(t,s,o)),!1),l=rX(u,0),c=rX(u,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}(t,e(c,f),i,l,a,s),h=p.width,v=p.height,g=h.isBound,m=v.isBound,b=h.offset,x=v.offset;if(1!==d||(g||(b=0),m||(x=0)),0===d&&a&&!g&&!m)return[0,0];if(l){var y=ig(b)*(r?1/r:1),S=ig(x)*(n?1/n:1);(g&&m?y<S:m||!g&&y<S)?b=r*x/n:x=n*b/r}c+=b,f+=x}if(!l&&i[0]&&i[1]){var E=function(t,e,r,n,i){var o=[-r[0],-r[1]],a=t.state,s=a.width,u=a.height,l=t.props.bounds,c=1/0,f=1/0;if(l){var d=[[r[0],-r[1]],[-r[0],r[1]]],p=l.left,h=void 0===p?-1/0:p,v=l.top,g=void 0===v?-1/0:v,m=l.right,b=void 0===m?1/0:m,x=l.bottom,y=void 0===x?1/0:x;d.forEach(function(t){var r=t[0]!==o[0],a=t[1]!==o[1],l=e1(e,t),d=360*Z(n,l)/Math.PI;if(a){var p=l.slice();(2>ig(d-360)||2>ig(d-180))&&(p[1]=n[1]);var v=rQ(n,p,(n[1]<l[1]?y:g)-l[1],!1,i),m=ey(v.offset,2)[1],x=v.isOutside;isNaN(m)||(f=u+(x?1:-1)*ig(m))}if(r){var p=l.slice();(2>ig(d-90)||2>ig(d-270))&&(p[0]=n[0]);var S=rQ(n,p,(n[0]<l[0]?b:h)-l[0],!0,i),E=ey(S.offset,1)[0],D=S.isOutside;isNaN(E)||(c=s+(D?1:-1)*ig(E))}})}return{maxWidth:c,maxHeight:f}}(t,u,i,o,s),D=E.maxWidth,C=E.maxHeight,w=ey(function(t,e,r,n,i,o,a,s,u){var l=e1(e,a),c=r1(t,s,{vertical:[l[0]],horizontal:[l[1]]}),f=c.horizontal.offset,d=c.vertical.offset;if(tt(d,1e-4)||tt(f,1e-4)){var p=ey(eJ({datas:u,distX:-d,distY:-f}),2),h=p[0],v=p[1];return[Math.min(i||1/0,r+a[0]*h)-r,Math.min(o||1/0,n+a[1]*v)-n]}return[0,0]}(t,e(c,f).map(function(t){return t.map(function(t){return tt(t,1e-4)})}),r+c,n+f,D,C,i,a,s),2),b=w[0],x=w[1];c+=b,f+=x}return[c,f]}function nv(t){return t<0&&(t=t%360+360),t%=360}function ng(t,e){t=nv(t),e=nv(e);var r=nv(t-e);return Math.min(r,360-r)}function nm(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(r){var n=r.guideline;W(e,function(t){return t.guideline===n})||(n.direction="",e.push({guideline:n,posInfo:t}))})}),e.map(function(t){var e=t.guideline,r=t.posInfo;return ex(ex({},e),{direction:r.direction})})}function nb(t,e,r,n,i,o){var a=ry(rS(t,o),e,r),s=a.vertical,u=a.horizontal,l=r_();s.forEach(function(t){t.isBound&&("start"===t.direction&&(l.left=!0),"end"===t.direction&&(l.right=!0),n.push({type:"bounds",pos:t.pos}))}),u.forEach(function(t){t.isBound&&("start"===t.direction&&(l.top=!0),"end"===t.direction&&(l.bottom=!0),i.push({type:"bounds",pos:t.pos}))});var c=function(t){var e=t.props.innerBounds,r=r_();if(!e)return{boundMap:r,vertical:[],horizontal:[]};var n=t.getRect(),i=[n.pos1,n.pos2,n.pos3,n.pos4],o=e1(i,[0,0]),a=e.left,s=e.top,u=e.width,l=e.height,c=[[a,s],[a,s+l]],f=[[a,s],[a+u,s]],d=[[a+u,s],[a+u,s+l]],p=[[a,s+l],[a+u,s+l]],h=rZ(t,i,[0,0],!1),v=[],g=[];return h.forEach(function(t){var e=t.line,n=t.lineConstants,i=rL(o,e),h=i.horizontal,m=i.vertical,b=r$(e,n,f,m,1,!0),x=r$(e,n,p,m,1,!0),y=r$(e,n,c,h,1,!0),S=r$(e,n,d,h,1,!0);b.isBound&&!r.top&&(v.push(s),r.top=!0),x.isBound&&!r.bottom&&(v.push(s+l),r.bottom=!0),y.isBound&&!r.left&&(g.push(a),r.left=!0),S.isBound&&!r.right&&(g.push(a+u),r.right=!0)}),{boundMap:r,horizontal:v,vertical:g}}(t),f=c.boundMap,d=c.vertical,p=c.horizontal;return d.forEach(function(t){q(n,function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t})>=0||n.push({type:"bounds",pos:t})}),p.forEach(function(t){q(i,function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t})>=0||i.push({type:"bounds",pos:t})}),{boundMap:l,innerBoundMap:f}}var nx=ia("",["resizable","scalable"]);function ny(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y.apply(void 0,eS([eI],ey(t),!1))}function nS(t){t()}function nE(t,e,r){return tb(e,tk(r,e),t,tk(r.map(function(t){return-t}),e))}function nD(t){return t?t.split(" "):["0","0"]}function nC(t){var e=rl(t)("transform");if(e&&"none"!==e)return e;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var n=r.length;if(!n)return"";for(var i=[],o=0;o<n;++o)!function(t){var e=r[t].matrix;i.push("matrix(".concat(["a","b","c","d","e","f"].map(function(t){return e[t]}).join(", "),")"))}(o);return i.join(" ")}return""}function nw(t,e,r,n,i){var o,a,s,u,l=tu(t)||tl(t),c=!1;if(!t||r)s=t;else{var f=null===(o=null==t?void 0:t.assignedSlot)||void 0===o?void 0:o.parentElement,d=t.parentElement;f?(c=!0,u=d,s=f):s=d}for(var p=!1,h=t===e||s===e,v="relative",g=1,m=parseFloat(null==i?void 0:i("zoom"))||1,b=null==i?void 0:i("position");s&&s!==l;){e===s&&(h=!0);var x=rl(s),y=s.tagName.toLowerCase(),S=nC(s),E=x("willChange"),D=parseFloat(x("zoom"))||1;if(v=x("position"),n&&1!==D){g=D;break}if(!r&&n&&1!==m&&b&&"absolute"!==b||"svg"===y||"foreignobject"===y||"static"!==v||S&&"none"!==S||"transform"===E)break;var C=null===(a=null==t?void 0:t.assignedSlot)||void 0===a?void 0:a.parentNode,w=s.parentNode;if(C&&(c=!0,u=w),w&&11===w.nodeType){s=w.host,p=!0,v=rl(s)("position");break}s=w,v="relative"}return{offsetZoom:g,hasSlot:c,parentSlotElement:u,isCustomElement:p,isStatic:"static"===v,isEnd:h||!s||s===l,offsetParent:s||l}}function nM(t,e){var r=rl(t),n=rl(tl(t)),i=n("position");if(!e&&(!i||"static"===i))return[0,0];var o=parseInt(n("marginLeft"),10),a=parseInt(n("marginTop"),10);return"absolute"===r("position")&&(("auto"!==r("top")||"auto"!==r("bottom"))&&(a=0),("auto"!==r("left")||"auto"!==r("right"))&&(o=0)),[o,a]}function nP(t){t.forEach(function(t){var e=t.matrix;e&&(t.matrix=tm(e,3,4))})}function nR(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(tE(t,!e).join(","),")")}function n_(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||r,clientWidth:e,clientHeight:r}}function nO(t,e,r){return tD(t,tg(e,r),r)}function nT(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map(function(e){return nO(t,e,n)})}function nz(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]}),n=Math.min.apply(Math,eS([],ey(e),!1)),i=Math.min.apply(Math,eS([],ey(r),!1)),o=Math.max.apply(Math,eS([],ey(e),!1)),a=Math.max.apply(Math,eS([],ey(r),!1));return{left:n,top:i,right:o,bottom:a,width:o-n,height:a-i}}function nG(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function nk(t,e){return nG([e[0]-t[0],e[1]-t[1]])}function nI(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=Z(t,e));var i=nk(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function nN(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,o=r.reduce(function(t,e){return t+e[0]},0)/i,a=r.reduce(function(t,e){return t+e[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(a,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function nA(t,e){var r=t[e];return _(r)?ex(ex({},t),r):t}function nB(t){var e=t&&!R(t.offsetWidth),r=0,n=0,i=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,d=0,p=0,h=1/0,v=1/0,g=1/0,m=1/0,b=0,x=0,y=!1;if(t){if(!e&&t.ownerSVGElement){var S=t.getBBox();y=!0,r=S.width,n=S.height,a=r,s=n,u=r,l=n,i=r,o=n}else{var E=rl(t),D=t.style,C="border-box"===E("boxSizing"),w=parseFloat(E("borderLeftWidth"))||0,M=parseFloat(E("borderRightWidth"))||0,P=parseFloat(E("borderTopWidth"))||0,_=parseFloat(E("borderBottomWidth"))||0,O=parseFloat(E("paddingLeft"))||0,T=parseFloat(E("paddingRight"))||0,z=parseFloat(E("paddingTop"))||0,G=parseFloat(E("paddingBottom"))||0,k=O+T,I=z+G,N=k+(w+M),A=I+(P+_),B=E("position"),F=0,j=0;if("clientLeft"in t){var q=null;if(q="absolute"===B?nw(t,tl(t)).offsetParent:t.parentElement){var W=rl(q);F=parseFloat(W("width")),j=parseFloat(W("height"))}}c=Math.max(k,H(E("minWidth"),F)||0),f=Math.max(I,H(E("minHeight"),j)||0),h=H(E("maxWidth"),F),v=H(E("maxHeight"),j),isNaN(h)&&(h=1/0),isNaN(v)&&(v=1/0),b=H(D.width,0)||0,x=H(D.height,0)||0,a=parseFloat(E("width"))||0,s=parseFloat(E("height"))||0,u=1>ig(a-b)?V(c,b||a,h):a,l=1>ig(s-x)?V(f,x||s,v):s,r=u,n=l,i=u,o=l,C?(g=h,m=v,d=c,p=f,u=r-N,l=n-A):(g=h+N,m=v+A,d=c+N,p=f+A,r=u+N,n=l+A),i=u+k,o=l+I}}return{svg:y,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:o,contentWidth:u,contentHeight:l,inlineCSSWidth:b,inlineCSSHeight:x,cssWidth:a,cssHeight:s,minWidth:c,minHeight:f,maxWidth:h,maxHeight:v,minOffsetWidth:d,minOffsetHeight:p,maxOffsetWidth:g,maxOffsetHeight:m}}function nF(t,e){return Z(e>0?t[0]:t[1],e>0?t[1]:t[0])}function nj(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function nq(t,e){var r=t===tl(t)||t===tu(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(e.height,n.clientHeight),n.scrollHeight=Math.max(e.height,n.scrollHeight)),n.overflow="visible"!==rl(t)("overflow"),ex(ex({},e),n)}function nW(t,e,r,n){var i=t.left,o=t.right,a=t.top,s=t.bottom,u=e.top,l=e.left,c={left:l+i,top:u+a,right:l+o,bottom:u+s,width:o-i,height:s-a};return r&&n?nq(r,c):c}function nY(t,e){var r=0,n=0,i=0,o=0;if(t){var a=t.getBoundingClientRect();r=a.left,n=a.top,i=a.width,o=a.height}var s={left:r,top:n,width:i,height:o,right:r+i,bottom:n+o};return t&&e?nq(t,s):s}function nX(t,e,r,n){return t||(e?[0,0]:nL(r.target,n))}function nL(t,e){if(t){var r=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(e.deg=r,n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function nH(t,e){return[ty(e,t[0]),ty(e,t[1]),ty(e,t[2]),ty(e,t[3])]}function nV(t){var e=t.left,r=t.top;return nH([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function nU(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(e){e.unset&&e.unset(t)})}function n$(t,e){var r=e?"controlGesto":"targetGesto",n=t[r];(null==n?void 0:n.isIdle())===!1&&nU(t,e),null==n||n.unset(),t[r]=null}function nK(t,e){if(e){var r=e7(e);r.nextStyle=ex(ex({},r.nextStyle),t)}return{style:t,cssText:L(t).map(function(e){return"".concat(e.replace(/([a-z])([A-Z])/g,function(t,e,r){return""+e+"-"+r.toLowerCase()}),": ").concat(t[e],";")}).join("")}}function nZ(t,e,r){var n=e.afterTransform||e.transform;return ex(ex({},nK(ex(ex(ex({},t.style),e.style),{transform:n}),r)),{afterTransform:n,transform:t.transform})}function nJ(t,e,r,n){var i=e.datas;i.datas||(i.datas={});var o=ex(ex({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:!1!==e.isTrusted,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return i.isStartEvent?n||(i.lastEvent=o):i.isStartEvent=!0,o}function nQ(t,e,r){var n=e.datas,i="isDrag"in r?r.isDrag:e.isDrag;return n.datas||(n.datas={}),ex(ex({isDrag:i},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas,isFirstDrag:!!e.isFirstDrag})}function n0(t,e,r){t._emitter.on(e,r)}function n1(t,e,r,n,i){return t.triggerEvent(e,r,n,i)}function n2(t,e){return tc(t).getComputedStyle(t,e)}function n3(t,e,r){var n={},i={};return t.filter(function(t){var o=t.name;if(n[o]||!e.some(function(e){return t[e]}))return!1;if(!r&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return n[o]=!0,!0})}function n4(t,e){return t===e||null==t&&null==e}function n5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var i=t[n];if(!R(i))return i}return t[r]}function n6(t,e){var r=[],n=[];return t.forEach(function(i,o){var a=e(i,o,t),s=n.indexOf(a),u=r[s]||[];-1===s&&(n.push(a),r.push(u)),u.push(i)}),r}function n7(t){return t.reduce(function(t,e){return t.concat(e)},[])}function n8(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return ig(e)-ig(t)}),t[0]}function n9(t,e,r){return tD(th(t,r),tg(e,r),r)}function it(t,e){var r,n=t.is3d;return r=ey(n9(t.rootMatrix,[e.distX,e.distY],n?4:3),2),e.distX=r[0],e.distY=r[1],e}function ie(t,e,r,n){if(!r[0]&&!r[1])return e;var i,o,a=nO(t,[(i=r[0]||1)/ig(i),0],n),s=nO(t,[0,(o=r[1]||1)/ig(o)],n);return ty(e,nO(t,[r[0]/nG(a),r[1]/nG(s)],n))}function ir(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function ii(t){return 1e-7>=ig(t)?0:t}function io(t){return function(e){if(!e.isDragging(t))return"";var r,n,i,o=(n=e.targetGesto,i=e.controlGesto,(null==n?void 0:n.isFlag())&&(r=n.getEventData()[t]),!r&&(null==i?void 0:i.isFlag())&&(r=i.getEventData()[t]),r||{}).deg;return o?ny("view-control-rotation".concat(o)):""}}function ia(t,e){return void 0===e&&(e=[t]),function(r,n){if(n.isRequest)return!!e.some(function(t){return n.requestAble===t})&&n.parentDirection;var i=n.inputEvent.target;return tr(i,ny("direction"))&&(!t||tr(i,ny(t)))}}function is(t,e){return t?td(t)?t:T(t)?e?document.querySelector(t):t:G(t)?t():tf(t)?t:"current"in t?t.current:t:null}function iu(t,e){return t?(!(!t||!_(t)||td(t))&&(O(t)||"length"in t)?[].slice.call(t):[t]).reduce(function(t,r){return T(r)&&e?eS(eS([],ey(t),!1),ey([].slice.call(document.querySelectorAll(r))),!1):(O(r)?t.push(iu(r,e)):t.push(is(r,e)),t)},[]):[]}function il(t,e){var r,n,i=t.rootMatrix,o=t.is3d,a=th(i,o?4:3);return o||(a=tm(a,3,4)),a[12]=0,a[13]=0,a[14]=0,n=(r=tD(a,[e[0],e[1]||0,e[2]||0,1],4))[3]||1,[r[0]/n,r[1]/n,r[2]/n]}function ic(t,e,r,n,i){var o=ey(t,2),a=o[0],s=o[1],u=0,l=0;if(i&&a&&s){var c=Math.cos(Z([0,0],e)-Z([0,0],n))*nG(e);if(n[0]){if(n[1]){var f=n[0]*a,d=n[1]*s,p=Math.atan2(f+e[0],d+e[1]),h=Math.atan2(f,d);p<0&&(p+=2*Math.PI),h<0&&(h+=2*Math.PI);var v=0;ig(p-h)<Math.PI/2||ig(p-h)>Math.PI/2*3||(h+=Math.PI),(v=p-h)>2*Math.PI?v-=2*Math.PI:v>Math.PI?v=2*Math.PI-v:v<-Math.PI&&(v=-2*Math.PI-v);var g=nG([f+e[0],d+e[1]])*Math.cos(v);u=g*Math.sin(h)-f,l=g*Math.cos(h)-d,n[0]<0&&(u*=-1),n[1]<0&&(l*=-1)}else l=(u=c)/r}else u=(l=c)*r}else u=n[0]*e[0],l=n[1]*e[1];return[u,l]}function id(t,e,r,n){var i,o=r.ratio,a=r.startOffsetWidth,s=r.startOffsetHeight,u=0,l=0,c=n.distX,f=n.distY,d=n.pinchScale,p=n.parentDistance,h=n.parentDist,v=n.parentScale,g=r.fixedDirection,m=[0,1].map(function(e){return ig(t[e]-g[e])}),b=[0,1].map(function(t){var e=m[t];return 0!==e&&(e=2/e),e});if(h)u=h[0],l=h[1],e&&(u?l||(l=u/o):u=l*o);else if(z(d))u=(d-1)*a,l=(d-1)*s;else if(v)u=(v[0]-1)*a,l=(v[1]-1)*s;else if(p){var x=a*m[0],y=s*m[1],S=nG([x,y]);u=p/S*x*b[0],l=p/S*y*b[1]}else{var E=eJ({datas:r,distX:c,distY:f});u=(i=ey(ic([a,s],E=b.map(function(t,e){return E[e]*t}),o,t,e),2))[0],l=i[1]}return{distWidth:u,distHeight:l}}function ip(t,e,r){var n=function t(e,r){if(r){if("left"===e)return{x:"0%",y:"50%"};if("top"===e)return{x:"50%",y:"50%"};if("center"===e)return{x:"50%",y:"50%"};if("right"===e)return{x:"100%",y:"50%"};else if("bottom"===e)return{x:"50%",y:"100%"};var n=ey(e.split(" "),2),i=n[0],o=n[1],a=t(i||""),s=t(o||""),u=ex(ex({},a),s),l={x:"50%",y:"50%"};return u.x&&(l.x=u.x),u.y&&(l.y=u.y),u.value&&(u.x&&!u.y&&(l.y=u.value),!u.x&&u.y&&(l.x=u.value)),l}return"left"===e?{x:"0%"}:"right"===e?{x:"100%"}:"top"===e?{y:"0%"}:"bottom"===e?{y:"100%"}:e?"center"===e?{value:"50%"}:{value:e}:{}}(t,!0),i=n.x,o=n.y;return[H(i,e)||0,H(o,r)||0]}function ih(t,e,r,n,i){var o=t._store,a=o[e];if(!(e in o)){if(null==i)return o[e]=r,r;o[e]=i,a=i}return a===r||n(a)===n(r)?a:(o[e]=r,r)}function iv(t){return t>=0?1:-1}function ig(t){return Math.abs(t)}function im(t,e){return(function(t){for(var e=[],r=0;r<t;++r)e.push(r);return e})(t).map(function(t){return e(t)})}function ib(t){return z(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var ix=eE("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,n=e.targets,i=e.angle,o=e.originalDatas,a=t.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="drag".concat(n?"Group":"","ControlStart"),c=(!0===s?t.controlAbles:u.filter(function(t){return s.indexOf(t.name)>-1})).filter(function(t){return t.canPinch&&t[l]}),f=nJ(t,e,{});n&&(f.targets=n);var d=n1(t,"onPinch".concat(n?"Group":"","Start"),f);r.isPinch=!1!==d,r.ables=c;var p=r.isPinch;return!!p&&(c.forEach(function(r){if(o[r.name]=o[r.name]||{},r[l]){var n=ex(ex({},e),{datas:o[r.name],parentRotate:i,isPinch:!0});r[l](t,n)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p)},pinch:function(t,e){var r=e.datas,n=e.scale,i=e.distance,o=e.originalDatas,a=e.inputEvent,s=e.targets,u=e.angle;if(r.isPinch){var l=i*(1-1/n),c=nJ(t,e,{});s&&(c.targets=s),n1(t,"onPinch".concat(s?"Group":""),c);var f=r.ables,d="drag".concat(s?"Group":"","Control");return f.forEach(function(r){r[d]&&r[d](t,ex(ex({},e),{datas:o[r.name],inputEvent:a,resolveMatrix:!0,pinchScale:n,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,o=e.targets,a=e.originalDatas;if(r.isPinch){var s=nQ(t,e,{isDrag:n});o&&(s.targets=o),n1(t,"onPinch".concat(o?"Group":"","End"),s);var u=r.ables,l="drag".concat(o?"Group":"","ControlEnd");return u.forEach(function(r){r[l]&&r[l](t,ex(ex({},e),{isDrag:n,datas:a[r.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,ex(ex({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ex(ex({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ex(ex({},e),{targets:t.props.targets}))}}),iy=ia("scalable"),iS={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:rb("scalable"),dragControlCondition:iy,viewClassName:io("scalable"),dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,o=nX(e.parentDirection,n,i,r),a=t.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,f=a.pos1,d=a.pos2,p=a.pos4;if(!o||!c)return!1;n||eV(t,e),r.datas={},r.transform=l,r.prevDist=[1,1],r.direction=o,r.startOffsetWidth=s,r.startOffsetHeight=u,r.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];function v(t){r.ratio=t&&isFinite(t)?t:0}function g(t){var e=r5(r.startPositions,t);r.fixedDirection=e.fixedDirection,r.fixedPosition=e.fixedPosition,r.fixedOffset=e.fixedOffset}e4(t,e,"scale"),r.isWidth=h,r.startPositions=nV(t.state),r.setFixedDirection=g,v(Q(f,d)/Q(d,p)),g([-o[0],-o[1]]);var m=function(t){r.minScaleSize=t},b=function(t){r.maxScaleSize=t};m([-1/0,-1/0]),b([1/0,1/0]);var x=nJ(t,e,ex(ex({direction:o,set:function(t){r.startValue=t},setRatio:v,setFixedDirection:g,setMinScaleSize:m,setMaxScaleSize:b},e3(t,e)),{dragStart:r4.dragStart(t,new eX().dragStart([0,0],e))})),y=n1(t,"onScaleStart",x);return r.startFixedDirection=r.fixedDirection,!1!==y&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!r.isScale&&x},dragControl:function(t,e){eU(t,e,"scale");var r,n,i=e.datas,o=e.parentKeepRatio,a=e.parentFlag,s=e.isPinch,u=e.dragClient,l=e.isRequest,c=e.useSnap,f=e.resolveMatrix,d=i.prevDist,p=i.direction,h=i.startOffsetWidth,v=i.startOffsetHeight,g=i.isScale,m=i.startValue,b=i.isWidth,x=i.ratio;if(!g)return!1;var y=t.props,S=y.throttleScale,E=y.parentMoveable,D=p;p[0]||p[1]||(D=[1,1]);var C=x&&(null!=o?o:y.keepRatio)||!1,w=t.state,M=[m[0],m[1]];function P(){var t=id(D,C,i,e),r=t.distWidth,n=t.distHeight,o=h?(h+r)/h:1,a=v?(v+n)/v:1;m[0]||(M[0]=r/h),m[1]||(M[1]=n/v);var s=(D[0]||C?o:1)*M[0],u=(D[1]||C?a:1)*M[1];return 0===s&&(s=1e-9*iv(d[0])),0===u&&(u=1e-9*iv(d[1])),[s,u]}var R=P();if(!s&&t.props.groupable){var _=(w.snapRenderInfo||{}).direction;O(_)&&(_[0]||_[1])&&(w.snapRenderInfo={direction:p,request:e.isRequest})}n1(t,"onBeforeScale",nJ(t,e,{scale:R,setFixedDirection:function(t){return i.setFixedDirection(t),R=P()},startFixedDirection:i.startFixedDirection,setScale:function(t){R=t}},!0));var T=[R[0]/M[0],R[1]/M[1]],z=u,G=[0,0],k=iv(T[0]*T[1]),I=!u&&!a&&s;if(I||f?z=rr(t,i.targetAllTransform,[0,0],[0,0],i):u||(z=i.fixedPosition),s||(G=function(t,e,r,n,i){if(!rO(t,"scalable"))return[0,0];var o=i.startOffsetWidth,a=i.startOffsetHeight,s=i.fixedPosition,u=i.fixedDirection,l=i.is3d,c=nh(t,function(t,r){var n,c,f,d,p,h;return np((n=ty(e,[t/o,r/a]),c=i.transformOrigin,f=i.offsetMatrix,d=i.is3d,p=i.targetMatrix,e2(f,tx(i.targetAllTransform||p,tG(n,h=d?4:3),h),c,h)),o,a,u,s,l)},o,a,r,s,n,i);return[c[0]/o,c[1]/a]}(t,T,p,!c&&l,i)),C){D[0]&&D[1]&&G[0]&&G[1]&&(Math.abs(G[0]*h)>Math.abs(G[1]*v)?G[1]=0:G[0]=0);var N=!G[0]&&!G[1];if(N&&(b?T[0]=tt(T[0]*M[0],S)/M[0]:T[1]=tt(T[1]*M[1],S)/M[1]),D[0]&&!D[1]||G[0]&&!G[1]||N&&b){T[0]+=G[0];var A=h*T[0]*M[0]/x;T[1]=iv(k*T[0])*ig(A/v/M[1])}else if(!D[0]&&D[1]||!G[0]&&G[1]||N&&!b){T[1]+=G[1];var B=v*T[1]*M[1]*x;T[0]=iv(k*T[1])*ig(B/h/M[0])}}else T[0]+=G[0],T[1]+=G[1],G[0]||(T[0]=tt(T[0]*M[0],S)/M[0]),G[1]||(T[1]=tt(T[1]*M[1],S)/M[1]);0===T[0]&&(T[0]=1e-9*iv(d[0])),0===T[1]&&(T[1]=1e-9*iv(d[1])),r=T,n=[M[0],M[1]];var F=[h,v],j=[h*(R=[r[0]*n[0],r[1]*n[1]])[0],v*R[1]];j=$(j,i.minScaleSize,i.maxScaleSize,!!C&&x),R=im(2,function(t){return F[t]?j[t]/F[t]:j[t]}),T=im(2,function(t){return R[t]/M[t]});var q=im(2,function(t){return d[t]?T[t]/d[t]:T[t]}),W="scale(".concat(T.join(", "),")"),Y="scale(".concat(R.join(", "),")"),X=e$(i,Y,W),L=!m[0]||!m[1],H=rn(t,L?Y:W,i.fixedDirection,z,i.fixedOffset,i,L),V=I?H:tS(H,i.prevInverseDist||[0,0]);if(i.prevDist=T,i.prevInverseDist=H,R[0]===d[0]&&R[1]===d[1]&&V.every(function(t){return!t})&&!E&&!I)return!1;var U=nJ(t,e,ex({offsetWidth:h,offsetHeight:v,direction:p,scale:R,dist:T,delta:q,isPinch:!!s},re(t,X,V,s,e)));return n1(t,"onScale",U),U},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var n=nQ(t,e,{});return n1(t,"onScaleEnd",n),n},dragGroupControlCondition:iy,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var i=rc(t,"resizable",e);r.moveableScale=t.scale;var o=rd(t,this,"dragControlStart",e,function(e,n){return rp(t,e,r,n)}),a=function(e){n.setFixedDirection(e),o.forEach(function(n,o){n.setFixedDirection(e),rp(t,n.moveable,r,i[o])})};r.setFixedDirection=a;var s=ex(ex({},n),{targets:t.props.targets,events:o,setFixedDirection:a}),u=n1(t,"onScaleGroupStart",s);return r.isScale=!1!==u,!!r.isScale&&s},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){n0(t,"onBeforeScale",function(r){n1(t,"onBeforeScaleGroup",nJ(t,e,ex(ex({},r),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=n.dist,o=r.moveableScale;t.scale=[i[0]*o[0],i[1]*o[1]];var a=t.props.keepRatio,s=r.fixedPosition,u=rd(t,this,"dragControl",e,function(e,r){var n=ey(tD(tT(t.rotation/180*Math.PI,3),[r.datas.originalX*i[0],r.datas.originalY*i[1],1],3),2),o=n[0],u=n[1];return ex(ex({},r),{parentDist:null,parentScale:i,parentKeepRatio:a,dragClient:ty(s,[o,u])})}),l=ex({targets:t.props.targets,events:u},n);return n1(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var n=rd(t,this,"dragControlEnd",e),i=nQ(t,e,{targets:t.props.targets,events:n});return n1(t,"onScaleGroupEnd",i),r}},request:function(){var t={},e=0,r=0,n=!1;return{isControl:!0,requestStart:function(e){return n=e.useSnap,{datas:t,parentDirection:e.direction||[1,1],useSnap:n}},request:function(i){return e+=i.deltaWidth,r+=i.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function iE(t,e){return t.map(function(t,r){return(2*t+1*e[r])/3})}function iD(t,e,r){var n=Z(t,e),i=Z(t,r)-n;return i>=0?i:i+2*Math.PI}var iC={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:io("warpable"),render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.warpable,a=r.zoom;if(n||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,d=iE(u,l),p=iE(l,u),h=iE(u,c),v=iE(c,u),g=iE(c,f),m=iE(f,c),b=iE(l,f),x=iE(f,l);return eS([e.createElement("div",{className:ny("line"),key:"middeLine1",style:nI(d,g,a)}),e.createElement("div",{className:ny("line"),key:"middeLine2",style:nI(p,m,a)}),e.createElement("div",{className:ny("line"),key:"middeLine3",style:nI(h,b,a)}),e.createElement("div",{className:ny("line"),key:"middeLine4",style:nI(v,x,a)})],ey(rv(t,eC,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return tr(r,ny("direction"))&&tr(r,ny("warpable"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,o=nL(n.target,r);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,f=a.width,d=a.height,p=a.left,h=a.top;r.datas={},r.targetTransform=l,r.warpTargetMatrix=u?c:tm(c,3,4),r.targetInverseMatrix=tp(th(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=p,r.top=h,r.poses=[[0,0],[f,0],[0,d],[f,d]].map(function(t){return tS(t,s)}),r.nextPoses=r.poses.map(function(t){var e=ey(t,2),n=e[0],i=e[1];return tD(r.warpTargetMatrix,[n,i,0,1],4)}),r.startValue=tz(4),r.prevMatrix=tz(4),r.absolutePoses=nV(a),r.posIndexes=eQ(o),eV(t,e),e4(t,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:o};var v=nJ(t,e,ex({set:function(t){r.startValue=t}},e3(t,e)));return!1!==n1(t,"onWarpStart",v)&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,i=e.distX,o=e.distY,a=r.targetInverseMatrix,s=r.prevMatrix,u=r.isWarp,l=r.startValue,c=r.poses,f=r.posIndexes,d=r.absolutePoses;if(!u)return!1;if(eU(t,e,"matrix3d"),rO(t,"warpable")){var p=f.map(function(t){return d[t]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var h=r1(t,n,{horizontal:p.map(function(t){return t[1]+o}),vertical:p.map(function(t){return t[0]+i})}),v=h.horizontal,g=h.vertical;o-=v.offset,i-=g.offset}var m=eJ({datas:r,distX:i,distY:o},!0),b=r.nextPoses.slice();if(f.forEach(function(t){b[t]=ty(b[t],m)}),!eB.every(function(t){var e,r,n,i,o;return e=t.map(function(t){return c[t]}),r=t.map(function(t){return b[t]}),n=iD(e[0],e[1],e[2]),i=iD(r[0],r[1],r[2]),(!(n>=(o=Math.PI))||!(i<=o))&&(!(n<=o)||!(i>=o))}))return!1;var x=tI(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var y=eK(r,tx(a,x,4),!0),S=tx(th(s,4),y,4);r.prevMatrix=y;var E=tx(l,y,4),D=e$(r,"matrix3d(".concat(E.join(", "),")"),"matrix3d(".concat(y.join(", "),")"));return e6(e,D),n1(t,"onWarp",nJ(t,e,ex({delta:S,matrix:E,dist:y,multiply:tx,transform:D},nK({transform:D},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,n1(t,"onWarpEnd",nQ(t,e,{})),n)}},iw=ny("area-pieces"),iM=ny("area-piece"),iP=ny("avoid"),iR=ny("view-dragging");function i_(t){var e=t.areaElement;if(e){var r=t.state,n=r.width,i=r.height;ti(e,iP),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function iO(t){return t.createElement("div",{key:"area_pieces",className:iw},t.createElement("div",{className:iM}),t.createElement("div",{className:iM}),t.createElement("div",{className:iM}),t.createElement("div",{className:iM}))}var iT={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,o=r.groupable,a=r.passDragArea,s=t.getState(),u=s.width,l=s.height,c=s.renderPoses,f=a?ny("area","pass"):ny("area");if(o)return[e.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f}),iO(e)];if(!n||!i)return[];var d=tI([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),p=d.length?nR(d,!0):"none";return[e.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:p}}),iO(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;r.isDragArea=!1;var o=t.areaElement,a=t.state,s=a.moveableClientRect,u=a.renderPoses,l=a.rootMatrix,c=a.is3d,f=s.left,d=s.top,p=nz(u),h=p.left,v=p.top,g=p.width,m=p.height,b=ey(n9(l,[n-f,i-d],c?4:3),2),x=b[0],y=b[1];x-=h,y-=v;var S=[{left:h,top:v,width:g,height:y-10},{left:h,top:v,width:x-10,height:m},{left:h,top:v+y+10,width:g,height:m-y-10},{left:h+x+10,top:v,width:g-x-10,height:m}],E=[].slice.call(o.nextElementSibling.children);S.forEach(function(t,e){E[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")}),tn(o,iP),a.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;r.isDragArea||(r.isDragArea=!0,i_(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,n=e.datas;if(!r)return!1;n.isDragArea||i_(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){i_(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Y(function(){e.disableNativeEvent=!1})}},iz=eE("origin",{props:["origin","svgOrigin"],render:function(t,e){var r,n=t.props,i=n.zoom,o=n.svgOrigin,a=n.groupable,s=t.getState(),u=s.beforeOrigin,l=s.rotation,c=s.svg,f=s.allMatrix,d=s.is3d,p=s.left,h=s.top,v=s.offsetWidth,g=s.offsetHeight;if(!a&&c&&o){var m=ey(ip(o,v,g),2);r=nN(l,i,tS(nO(f,[m[0],m[1]],d?4:3),[p,h]))}else r=nN(l,i,u);return[e.createElement("div",{className:ny("control","origin"),style:r,key:"beforeOrigin"})]}});function iG(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ik={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},iI=eE("padding",{props:["padding"],render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=ib(r.padding||{}),i=n.left,o=n.top,a=n.right,s=n.bottom,u=t.getState(),l=u.renderPoses,c=[u.pos1,u.pos2,u.pos3,u.pos4],f=[];return i>0&&f.push([0,2]),o>0&&f.push([0,1]),a>0&&f.push([1,3]),s>0&&f.push([2,3]),f.map(function(t,r){var n=ey(t,2),i=n[0],o=n[1],a=tI([0,0],[100,0],[0,100],[100,100],c[i],c[o],l[i],l[o]);if(a.length)return e.createElement("div",{key:"padding".concat(r),className:ny("padding"),style:{transform:nR(a,!0)}})})}}),iN=["nw","ne","se","sw"];function iA(t,e){var r=t[0]+t[1],n=r>e?e/r:1;return t[0]*=n,t[1]=e-t[1]*n,t}var iB=[1,2,5,6],iF=[0,3,4,7],ij=[1,-1,-1,1],iq=[1,1,-1,-1];function iW(t,e,r,n,i,o,a,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=r),void 0===s&&(s=n);var u=[],l=!1,c=t.filter(function(t){return!t.virtual}),f=c.map(function(t){var c=t.horizontal,f=t.vertical,d=t.pos;if(f&&!l&&(l=!0,u.push("/")),l){var p=Math.max(0,1===f?d[1]-o:s-d[1]);return u.push(ir(p,n,e)),p}var p=Math.max(0,1===c?d[0]-i:a-d[0]);return u.push(ir(p,r,e)),p});return{radiusPoses:c,styles:u,raws:f}}function iY(t){for(var e=[0,0],r=[0,0],n=t.length,i=0;i<n;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,r[0]=i+1),o.vertical&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function iX(t,e,r,n,i,o,a){void 0===o&&(o=[0,0]),void 0===a&&(a=!1);var s,u,l,c,f=t.indexOf("/"),d=(f>-1?t.slice(0,f):t).length,p=t.slice(0,d),h=t.slice(d+1),v=p.length,g=h.length,m=g>0,b=ey(p,4),x=b[0],y=void 0===x?"0px":x,S=b[1],E=void 0===S?y:S,D=b[2],C=void 0===D?y:D,w=b[3],M=void 0===w?E:w,P=ey(h,4),R=P[0],_=void 0===R?y:R,O=P[1],T=void 0===O?m?_:E:O,z=P[2],G=P[3],k=[y,E,C,M].map(function(t){return H(t,e)}),I=[_,T,void 0===z?m?_:C:z,void 0===G?m?T:M:G].map(function(t){return H(t,r)}),N=k.slice(),A=I.slice();s=ey(iA([N[0],N[1]],e),2),N[0]=s[0],N[1]=s[1],u=ey(iA([N[3],N[2]],e),2),N[3]=u[0],N[2]=u[1],l=ey(iA([A[0],A[3]],r),2),A[0]=l[0],A[3]=l[1],c=ey(iA([A[1],A[2]],r),2),A[1]=c[0],A[2]=c[1];var B=a?N:N.slice(0,Math.max(o[0],v)),F=a?A:A.slice(0,Math.max(o[1],g));return eS(eS([],ey(B.map(function(t,e){var o=iN[e];return{virtual:e>=v,horizontal:ij[e],vertical:0,pos:[n+t,i+(-1===iq[e]?r:0)],sub:!0,raw:k[e],direction:o}})),!1),ey(F.map(function(t,r){var o=iN[r];return{virtual:r>=g,horizontal:0,vertical:iq[r],pos:[n+(-1===ij[r]?e:0),i+t],sub:!0,raw:I[r],direction:o}})),!1)}var iL=[[0,-1,"n"],[1,0,"e"]],iH=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function iV(t,e,r){var n=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=e.type,u=e.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return r.map(function(t){return"".concat(ir(t[0],o,n)," ").concat(ir(t[1],a,n))});if(l||"inset"===s){var f=r[1][1],d=r[3][0],p=r[7][0],h=r[5][1];if(l)return[f,d,h,p].map(function(t){return"".concat(t,"px")});var v=[f,o-d,a-h,p].map(function(t,e){return ir(t,e%2?o:a,n)});if(r.length>8){var g=ey(tS(r[4],r[0]),2),m=g[0],b=g[1];v.push.apply(v,eS(["round"],ey(iW(u.slice(8).map(function(t,e){return ex(ex({},t),{pos:r[e]})}),n,m,b,p,f,d,h).styles),!1))}return v}if(c||"ellipse"===s){var x=r[0],y=ir(ig(r[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,n),v=c?[y]:[ir(ig(r[2][0]-x[0]),o,n),y];return v.push("at",ir(x[0],o,n),ir(x[1],a,n)),v}}function iU(t,e,r,n){var i=[n,(n+e)/2,e],o=[t,(t+r)/2,r];return iH.map(function(t){var e=ey(t,3),r=e[0],n=e[1],a=e[2],s=i[r+1],u=o[n+1];return{vertical:ig(n),horizontal:ig(r),direction:a,pos:[s,u]}})}function i$(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach(function(t){var n=t.pos;e[0]=Math.min(e[0],n[0]),e[1]=Math.max(e[1],n[0]),r[0]=Math.min(r[0],n[1]),r[1]=Math.max(r[1],n[1])}),[ig(e[1]-e[0]),ig(r[1]-r[0])]}function iK(t,e,r,n,i){if(t){var o,a,s,u,l,c,f,d,p,h=i;if(!h){var v=rl(t),g=v("clipPath");h="none"!==g?g:v("clip")}if(h&&"none"!==h&&"auto"!==h||(h=n)){var m=B(h),b=m.prefix,x=void 0===b?h:b,y=m.value,S=void 0===y?"":y,E="circle"===x,D=" ";if("polygon"===x){var C=A(S||"0% 0%, 100% 0%, 100% 100%, 0% 100%");D=",";var w=C.map(function(t){var n=ey(t.split(" "),2),i=n[0],o=n[1];return{vertical:1,horizontal:1,pos:[H(i,e),H(o,r)]}}),M=t6(w.map(function(t){return t.pos}));return{type:x,clipText:h,poses:w,splitter:D,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}if(E||"ellipse"===x){var P="",R="",_=0,O=0,C=N(S);if(E){var T="";T=void 0===(a=(o=ey(C,4))[0])?"50%":a,P=void 0===(s=o[2])?"50%":s,R=void 0===(u=o[3])?"50%":u,O=_=H(T,Math.sqrt((e*e+r*r)/2))}else{var z="",G="";z=void 0===(c=(l=ey(C,5))[0])?"50%":c,G=void 0===(f=l[1])?"50%":f,P=void 0===(d=l[3])?"50%":d,R=void 0===(p=l[4])?"50%":p,_=H(z,e),O=H(G,r)}var k=[H(P,e),H(R,r)],w=eS([{vertical:1,horizontal:1,pos:k,direction:"nesw"}],ey(iL.slice(0,E?1:2).map(function(t){return{vertical:ig(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[k[0]+t[0]*_,k[1]+t[1]*O]}})),!1);return{type:x,clipText:h,radiusX:_,radiusY:O,left:k[0]-_,top:k[1]-O,right:k[0]+_,bottom:k[1]+O,poses:w,splitter:D}}if("inset"===x){var C=N(S||"0 0 0 0"),I=C.indexOf("round"),j=(I>-1?C.slice(0,I):C).length,q=C.slice(j+1),W=ey(C.slice(0,j),4),Y=W[0],X=W[1],L=void 0===X?Y:X,V=W[2],U=W[3],$=ey([Y,void 0===V?Y:V].map(function(t){return H(t,r)}),2),K=$[0],Z=$[1],J=ey([void 0===U?L:U,L].map(function(t){return H(t,e)}),2),Q=J[0],tt=J[1],te=e-tt,tr=r-Z,tn=iX(q,te-Q,tr-K,Q,K),w=eS(eS([],ey(iU(K,te,tr,Q)),!1),ey(tn),!1);return{type:"inset",clipText:h,poses:w,top:K,left:Q,right:te,bottom:tr,radius:q,splitter:D}}if("rect"===x){var C=A(S||"0px, ".concat(e,"px, ").concat(r,"px, 0px"));D=",";var ti=ey(C.map(function(t){return F(t).value}),4),to=ti[0],tt=ti[1],Z=ti[2],Q=ti[3],w=iU(to,tt,Z,Q);return{type:"rect",clipText:h,poses:w,top:to,right:tt,bottom:Z,left:Q,values:C,splitter:D}}}}}function iZ(t,e,r,n,i){return void 0===n&&(n=[0,0]),iX(t&&"0px"!==t?N(t):[],e,r,0,0,n,i)}function iJ(t,e,r,n,i){var o,a,s=t.state,u=s.width,l=s.height,c=iW(i,t.props.roundRelative,u,l),f=c.raws,d=c.styles,p=(o=c.radiusPoses,void 0===(a=f)&&(a=o.map(function(t){return t.raw})),{horizontals:o.map(function(t,e){return t.horizontal?a[e]:null}).filter(function(t){return null!=t}),verticals:o.map(function(t,e){return t.vertical?a[e]:null}).filter(function(t){return null!=t})}),h=p.horizontals,v=p.verticals,g=d.join(" ");s.borderRadiusState=g;var m=nJ(t,e,ex({horizontals:h,verticals:v,borderRadius:g,width:u,height:l,delta:n,dist:r},nK({borderRadius:g},e)));return n1(t,"onRound",m),m}function iQ(t){var e,r,n=t.getState().style,i=n.borderRadius||"";if(!i&&t.props.groupable){var o=t.moveables[0],a=t.getTargets()[0];a&&(i=(null==o?void 0:o.props.target)===a?null!==(r=null===(e=t.moveables[0])||void 0===e?void 0:e.state.style.borderRadius)&&void 0!==r?r:"":n2(a).borderRadius,n.borderRadius=i)}return i}var i0={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var r,n=t.state,i=n.is3d,o=n.targetMatrix,a=n.inlineTransform,s=i?"matrix3d(".concat(o.join(","),")"):"matrix(".concat(tE(o,!0),")"),u=a&&"none"!==a?a:s;r=tz(i?4:3),e.datas.startTransforms=u==="matrix".concat(i?"3d":"","(").concat(r.join(","),")")||"matrix(1,0,0,1,0,0)"===u?[]:N(u)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return nJ(t,e,{setTransform:function(t){e.datas.startTransforms=O(t)?t:N(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return nJ(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),n1(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),n1(t,"onBeforeRender",nJ(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),n1(t,"onBeforeRenderEnd",nJ(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=rc(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.setTransform(n,t),r.resetStyle(t),r.fillDragStartParams(n,t)});n1(t,"onBeforeRenderGroupStart",nJ(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=rc(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.resetStyle(t),r.fillDragParams(n,t)});n1(t,"onBeforeRenderGroup",nJ(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),n1(t,"onBeforeRenderGroupEnd",nJ(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},i1={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){n1(t,"onRenderStart",nJ(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){n1(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){n1(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){n1(t,"onRenderGroupStart",nJ(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=rc(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.fillDragParams(n,t)});n1(t,"onRenderGroup",nJ(t,e,ex(ex({isPinch:!!e.isPinch,targets:t.props.targets,transform:e9(e),transformObject:{}},nK(rt(e))),{events:o})))},dragGroupEnd:function(t,e){var r=this,n=rc(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.fillDragEndParams(n,t)});n1(t,"onRenderGroupEnd",nJ(t,e,ex({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transformObject:{},transform:e9(e)},nK(rt(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var r={};return tF(e8(e)||[]).forEach(function(t){r[t.name]=t.functionValue}),nJ(t,e,ex({isPinch:!!e.isPinch,transformObject:r,transform:e9(e)},nK(rt(e))))},fillDragEndParams:function(t,e){var r={};return tF(e8(e)||[]).forEach(function(t){r[t.name]=t.functionValue}),nJ(t,e,ex({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:r,transform:e9(e)},nK(rt(e))))}};function i2(t,e,r,n,i,o,a){o.clientDistX=o.distX,o.clientDistY=o.distY;var s,u="Start"===i,l="End"===i,c="After"===i,f=t.state.target,d=o.isRequest,p=n.indexOf("Control")>-1;if(!f||u&&p&&!d&&t.areaElement===o.inputEvent.target)return!1;var h=eS([],ey(e),!1);if(d){var v=o.requestAble;h.some(function(t){return t.name===v})||h.push.apply(h,eS([],ey(t.props.ables.filter(function(t){return t.name===v})),!1))}if(!h.length||h.every(function(t){return t.dragRelation}))return!1;var g=o.inputEvent;l&&g&&(s=document.elementFromPoint(o.clientX,o.clientY)||g.target);var m=!1,b=function(){var t;m=!0,null===(t=o.stop)||void 0===t||t.call(o)},x=u&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());x&&t.updateRect(i,!0,!1);var y=o.datas,S=p?"controlGesto":"targetGesto",E=t[S],D=function(e,r,n){if(!(r in e)||E!==t[S])return!1;var i=e.name,a=y[i]||(y[i]={});if(u&&(a.isEventStart=!n||!e[n]||e[n](t,o)),!a.isEventStart)return!1;var l=e[r](t,ex(ex({},o),{stop:b,datas:a,originalDatas:y,inputTarget:s}));return t._emitter.off(),u&&!1===l&&(a.isEventStart=!1),l};x&&h.forEach(function(e){e.unset&&e.unset(t)}),D(i0,"drag".concat(n).concat(i));var C=0,w=0;r.forEach(function(e){if(m)return!1;var r="".concat(e).concat(n).concat(i),a="".concat(e).concat(n,"Condition");""!==i||d||it(t.state,o);var s=h.filter(function(t){return t[r]}),l=(s=s.filter(function(t,e){return t.name&&s.indexOf(t)===e})).filter(function(t){return D(t,r,a)}).length;m&&++C,l&&++w,!m&&u&&s.length&&!l&&(C+=s.filter(function(t){return!!y[t.name].isEventStart&&"strong"!==t.dragRelation}).length?1:0)}),(!c||w)&&D(i1,"drag".concat(n).concat(i));var M=E!==t[S]||C===r.length;return(l||m||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(t){t.state.gestos={}}),h.forEach(function(e){e.unset&&e.unset(t)})),u&&!M&&!d&&w&&t.props.preventDefault&&(null==o||o.preventDefault()),!t.isUnmounted&&!M&&((!u&&w&&!a||l)&&(t.props.flushSync||nS)(function(){t.updateRect(l?i:"",!0,!1),t.forceUpdate()}),u||l||c||!w||a||i2(t,e,r,n,i+"After",o),!0)}function i3(t,e){return function(r,n){void 0===n&&(n=r.inputEvent.target);var i,o=n,a=t.areaElement,s=t._dragTarget;return!(!s||!e&&(null===(i=t.controlGesto)||void 0===i?void 0:i.isFlag()))&&(o===s||s.contains(o)||o===a||!t.isMoveableElement(o)&&!t.controlBox.contains(o)||tr(o,"moveable-area")||tr(o,"moveable-padding")||tr(o,"moveable-edgeDraggable"))}}function i4(t,e,r){var n=t.controlBox,i=[],o=t.props,a=o.dragArea,s=t.state.target,u=o.dragTarget;i.push(n),(!a||u)&&i.push(e),!a&&u&&s&&e!==s&&o.dragTargetSelf&&i.push(s);var l=i3(t);return i6(t,i,"targetAbles",r,{dragStart:l,pinchStart:l})}function i5(t,e){var r=t.controlBox,n=[];n.push(r);var i=i3(t,!0),o=function(t,e){return void 0===e&&(e=t.inputEvent.target),e===r||!i(t,e)};return i6(t,n,"controlAbles",e,{dragStart:o,pinchStart:o})}function i6(t,e,r,n,i){void 0===i&&(i={});var o="targetAbles"===r,a=t.props,s=a.pinchOutside,u=a.pinchThreshold,l=a.preventClickEventOnDrag,c=a.preventClickDefault,f=a.checkInput,d=a.dragFocusedInput,p=a.preventDefault,h=a.preventRightClick,v=a.preventWheelClick,g=new ed(e,{preventDefault:void 0===p||p,preventRightClick:void 0===h||h,preventWheelClick:void 0===v||v,container:is(a.dragContainer,!0)||tc(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:!!o&&l,preventClickEventOnDragStart:!!o&&c,preventClickEventByCondition:o?null:function(e){return t.controlBox.contains(e.target)},checkInput:!!o&&f,dragFocusedInput:d}),m="Control"===n;return["drag","pinch"].forEach(function(e){["Start","","End"].forEach(function(o){g.on("".concat(e).concat(o),function(a){var s,u=a.eventType,l="drag"===e&&a.isPinch;if(i[u]&&!i[u](a)){a.stop();return}if(!l){var c=eS([],ey(t[r]),!1);i2(t,c,"drag"===e?[e]:["drag",e],n,o,a)?(t.props.stopPropagation||"Start"===o&&m)&&(null===(s=null==a?void 0:a.inputEvent)||void 0===s||s.stopPropagation()):a.stop()}})})}),g}var i7=function(){function t(t,e,r){var n=this;this.target=t,this.moveable=e,this.eventName=r,this.ables=[],this._onEvent=function(t){var e=n.eventName,r=n.moveable;r.state.disableNativeEvent||n.ables.forEach(function(n){n[e](r,{inputEvent:t})})},t.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(t){this.ables=t},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function i8(t,e,r,n,i,o){void 0===o&&(o=[]);var a=1,s=[0,0],u=nj(),l=nj(),c=nj(),f=nj(),d=[0,0],p={},h=function(t,e,r,n){void 0===r&&(r=e);var i=0,o=0,a=0,s={},u=nB(t);if(t&&(i=u.offsetWidth,o=u.offsetHeight),t){var l,c,f,d,p,h,v,g,m,b,x,y,S,E,D,C,w,M,P,R,_,O,T,z,G,k,I,N,A,B,F,j,q=(void 0===(l=r)&&(l=e),d=(f=ri(t,e)).matrixes,p=f.is3d,h=f.targetMatrix,v=f.transformOrigin,g=f.targetOrigin,m=f.offsetContainer,b=f.hasFixed,x=f.zoom,S=(y=function(t,e){if(rs){var r=W(rs,function(r){return r[0][0]==t&&r[0][1]==e});if(r)return r[1]}var n=ri(t,e,!0);return rs&&rs.push([[t,e],n]),n}(m,l)).matrixes,E=y.is3d,D=y.offsetContainer,C=y.zoom,M=(w=n||E||p)?4:3,P="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,R=h,_=tz(M),O=tz(M),T=tz(M),z=tz(M),G=d.length,k=S.map(function(t){return ex(ex({},t),{matrix:t.matrix?eS([],ey(t.matrix),!1):void 0})}).reverse(),d.reverse(),!p&&w&&(R=tm(R,3,4),nP(d)),!E&&w&&nP(k),k.forEach(function(t){O=tx(O,t.matrix,M)}),I=l||tl(t),N=(null===(c=k[0])||void 0===c?void 0:c.target)||nw(I,I,!0).offsetParent,A=k.slice(1).reduce(function(t,e){return tx(t,e.matrix,M)},tz(M)),d.forEach(function(t,e){if(G-2===e&&(T=_.slice()),G-1===e&&(z=_.slice()),!t.matrix){var r=function(t,e,r,n,i){var o,a=t.target,s=t.origin,u=e.matrix,l=nB(a),c=l.offsetWidth,f=l.offsetHeight,d=r.getBoundingClientRect(),p=[0,0];r===tl(r)&&(p=nM(a,!0));for(var h=a.getBoundingClientRect(),v=h.left-d.left+r.scrollLeft-(r.clientLeft||0)+p[0],g=h.top-d.top+r.scrollTop-(r.clientTop||0)+p[1],m=h.width,b=h.height,x=tb(n,i,u),y=nz(nT(x,c,f,n)),S=y.left,E=y.top,D=y.width,C=y.height,w=nO(x,s,n),M=tS(w,[S,E]),P=[v+M[0]*m/D,g+M[1]*b/C],R=[0,0],_=0;++_<10;){var O=th(i,n);o=ey(tS(nO(O,P,n),nO(O,w,n)),2),R[0]=o[0],R[1]=o[1];var T=nz(nT(tb(n,i,tk(R,n),u),c,f,n)),z=T.left,G=T.top,k=z-v,I=G-g;if(2>ig(k)&&2>ig(I))break;P[0]-=k,P[1]-=I}return R.map(function(t){return Math.round(t)})}(t,d[e+1],N,M,tx(A,_,M));t.matrix=tk(r,M)}_=tx(_,t.matrix,M)}),B=!P&&p,R||(R=tz(B?4:3)),F=nR(P&&16===R.length?tm(R,4,3):R,B),j=O,{hasZoom:1!==x||1!==C,hasFixed:b,matrixes:d,rootMatrix:O=tp(O,M,M),originalRootMatrix:j,beforeMatrix:T,offsetMatrix:z,allMatrix:_,targetMatrix:R,targetTransform:F,inlineTransform:t.style.transform,transformOrigin:v,targetOrigin:g,is3d:w,offsetContainer:m,offsetRootContainer:D}),Y=eL(q.allMatrix,q.transformOrigin,i,o);s=ex(ex({},q),Y);var X=eL(q.allMatrix,[50,50],100,100);a=nF([X.pos1,X.pos2],X.direction)}var L=n?4:3;return ex(ex(ex({hasZoom:!1,width:i,height:o,rotation:a},u),{originalRootMatrix:tz(L),rootMatrix:tz(L),beforeMatrix:tz(L),offsetMatrix:tz(L),allMatrix:tz(L),targetMatrix:tz(L),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}(e,r,i,!0);if(e){var v=rl(e);o.forEach(function(t){p[t]=v(t)});var g=h.is3d?4:3,m=eL(h.offsetMatrix,ty(h.transformOrigin,tv(h.targetMatrix,g)),h.width,h.height);a=m.direction,s=ty(m.origin,[m.left-h.left,m.top-h.top]),f=nY(h.offsetRootContainer);var b=nw(n,n,!0).offsetParent||h.offsetRootContainer;if(h.hasZoom){var x=eL(tx(h.originalRootMatrix,h.allMatrix),h.transformOrigin,h.width,h.height),y=eL(h.originalRootMatrix,nD(rl(b)("transformOrigin")).map(function(t){return parseFloat(t)}),b.offsetWidth,b.offsetHeight);if(u=nW(x,f),c=nW(y,f,b,!0),t){var S=x.left,E=x.top;l=nW({left:S,top:E,bottom:E,right:E},f)}}else{u=nY(e),c=function(t){var e=null==ra?void 0:ra.get(t);if(e)return e;var r=nY(t,!0);return ra&&ra.set(t,r),r}(b),t&&(l=nY(t));var D=c.left,C=c.top,w=c.clientLeft,M=c.clientTop,P=[u.left-D,u.top-C];d=tS(n9(h.rootMatrix,P,4),[w+h.left,M+h.top])}}return ex({targetClientRect:u,containerClientRect:c,moveableClientRect:l,rootContainerClientRect:f,beforeDirection:a,beforeOrigin:s,originalBeforeOrigin:s,target:e,style:p,offsetDelta:d},h)}function i9(t){var e=t.pos1,r=t.pos2,n=t.pos3,i=t.pos4;if(!e||!r||!n||!i)return null;var o=t6([e,r,n,i]),a=[o.minX,o.minY],s=tS(t.origin,a);return e=tS(e,a),r=tS(r,a),n=tS(n,a),i=tS(i,a),ex(ex({},t),{left:t.left,top:t.top,posDelta:a,pos1:e,pos2:r,pos3:n,pos4:i,origin:s,beforeOrigin:s,isPersisted:!0})}var ot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=ex({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},i8(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new tZ,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;if(t){t.checkUpdateRect();return}X(e._observerId),e._observerId=Y(function(){e.isDragging()||e.updateRect()})}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}return eb(e,t),e.prototype.render=function(){var t=this.props,e=this.getState(),r=t.parentPosition,n=t.className,i=t.target,a=t.zoom,s=t.cspNonce,u=t.translateZ,l=t.cssStyled,c=t.groupable,f=t.linePadding,d=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=ey(r||[0,0],2),h=p[0],v=p[1],g=e.left,m=e.top,b=e.target,x=e.direction,y=e.hasFixed,E=e.offsetDelta,D=t.targets,C=this.isDragging(),w={};this.getEnabledAbles().forEach(function(t){w["data-able-".concat(t.name.toLowerCase())]=!0});var M=this._getAbleClassName(),P=D&&D.length&&(b||c)||i||!this._hasFirstTarget&&this.state.isPersisted,R=this.controlBox||this.props.firstRenderState||this.props.persistData,_=[g-h,m-v];!c&&t.useAccuratePosition&&(_[0]+=E[0],_[1]+=E[1]);var O={position:y?"fixed":"absolute",display:P?"block":"none",visibility:R?"visible":"hidden",transform:"translate3d(".concat(_[0],"px, ").concat(_[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return f&&(O["--moveable-line-padding"]=f),d&&(O["--moveable-control-padding"]=d),o.createElement(l,ex({cspNonce:s,ref:S(this,"controlBox"),className:"".concat(ny("control-box",-1===x?"reverse":"",C?"dragging":"")," ").concat(M," ").concat(n)},w,{onClick:this._onPreventClick,style:O}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,e=t.parentMoveable,r=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),r||e||this.state.isPersisted||(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),null===(t=this._reiszeObserver)||void 0===t||t.disconnect(),null===(e=this._mutationObserver)||void 0===e||e.disconnect(),this._viewContainer&&this._changeAbleViewClassNames([]),n$(this,!1),n$(this,!0);var t,e,r=this.events;for(var n in r){var i=r[n];i&&i.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){return W(this.props.ables||[],function(e){return e.name===t})},e.prototype.getContainer=function(){var t=this.props,e=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||e&&e.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(eI)>-1},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var r=this.targetGesto,n=this.controlGesto;return r&&i3(this)({inputEvent:t},e)?r.isFlag()||r.triggerDragStart(t):n&&this.isMoveableElement(e)&&!n.isFlag()&&n.triggerDragStart(t),this},e.prototype.hitTest=function(t){var e,r,n,i,o,a,s,u,l,c,f=this.state,d=f.target,p=f.pos1,h=f.pos2,v=f.pos3,g=f.pos4,m=f.targetClientRect;if(!d)return 0;if(td(t)){var b=t.getBoundingClientRect();c={left:b.left,top:b.top,width:b.width,height:b.height}}else c=ex({width:0,height:0},t);var x=c.left,y=c.top,S=c.width,E=c.height,D=t5([p,h,g,v],m),C=(e=[[x,y],[x+S,y],[x+S,y+E],[x,y+E]],t4((r=D.slice(),n=e.slice(),-1===J(r)&&r.reverse(),-1===J(n)&&n.reverse(),i=ee(r),o=ee(n),a=i.map(function(t){return t8(t[0],t[1])}),s=o.map(function(t){return t8(t[0],t[1])}),u=[],a.forEach(function(t,e){var r=i[e],a=[];s.forEach(function(n,i){var s=et(t9(t,n),[r,o[i]]);a.push.apply(a,s.map(function(t){return{index1:e,index2:i,pos:t,type:"intersection"}}))}),a.sort(function(t,e){return Q(r[0],t.pos)-Q(r[0],e.pos)}),u.push.apply(u,a),t7(r[1],n)&&u.push({index1:e,index2:-1,pos:r[1],type:"inside"})}),o.forEach(function(t,e){if(t7(t[1],r)){var n=!1,i=q(u,function(t){return t.index2===e?(n=!0,!1):!!n});-1===i&&(n=!1,i=q(u,function(t){var r=t.index1,i=t.index2;return -1===r&&i+1===e?(n=!0,!1):!!n})),-1===i?u.push({index1:-1,index2:e,pos:t[1],type:"inside"}):u.splice(i,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}),l={},u.filter(function(t){var e=t.pos,r=e[0]+"x"+e[1];return!l[r]&&(l[r]=!0,!0)})).map(function(t){return t.pos}))),w=t4(D);return C&&w?Math.min(100,C/w*100):0},e.prototype.isInside=function(t,e){var r=this.state,n=r.target,i=r.pos1,o=r.pos2,a=r.pos3,s=r.pos4,u=r.targetClientRect;return!!n&&t7([t,e],t5([i,o,s,a],u))},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props,i=!n.parentPosition&&!n.wrapperMoveable;i&&ru(!0);var o=n.parentMoveable,a=this.state.target||n.target,s=this.getContainer(),u=o?o._rootContainer:this._rootContainer,l=i8(this.controlBox,a,s,s,u||s,this._getRequestStyles());if(!a&&this._hasFirstTarget&&n.persistData){var c=i9(n.persistData);for(var f in c)l[f]=c[f]}i&&ru(),this.updateState(l,!o&&r)},e.prototype.isDragging=function(t){var e,r,n=this.targetGesto,i=this.controlGesto;if(null==n?void 0:n.isFlag()){if(!t)return!0;var o=n.getEventData();return!!(null===(e=o[t])||void 0===e?void 0:e.isEventStart)}if(null==i?void 0:i.isFlag()){if(!t)return!0;var o=i.getEventData();return!!(null===(r=o[t])||void 0===r?void 0:r.isEventStart)}return!1},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,e=nV(this.state),r=ey(e,4),n=r[0],i=r[1],o=r[2],a=r[3],s=nz(e),u=t.width,l=t.height,c=s.width,f=s.height,d=s.left,p=s.top,h=[t.left,t.top],v=ty(h,t.origin);return{width:c,height:f,left:d,top:p,pos1:n,pos2:i,pos3:o,pos4:a,offsetWidth:u,offsetHeight:l,beforeOrigin:ty(h,t.beforeOrigin),origin:v,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){if(!t||"target"===t){var e=this.targetGesto;(null==e?void 0:e.isIdle())===!1&&nU(this,!1),null==e||e.stop()}if(!t||"control"===t){var e=this.controlGesto;(null==e?void 0:e.isIdle())===!1&&nU(this,!0),null==e||e.stop()}},e.prototype.getRotation=function(){var t,e=this.state,r=e.pos1,n=e.pos2,i=e.direction;return t=Z(r,n)/Math.PI*180,t=(t=i>=0?t:180-t)>=0?t:360+t},e.prototype.request=function(t,e,r){void 0===e&&(e={});var n=this,i=n.props,o=i.parentMoveable||i.wrapperMoveable||n,a=o.props.ables,s=i.groupable,u=W(a,function(e){return e.name===t});if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var l=u.request(n),c=r||e.isInstant,f=l.isControl?"controlAbles":"targetAbles",d="".concat(s?"Group":"").concat(l.isControl?"Control":""),p=eS([],ey(o[f]),!1),h={request:function(e){return i2(n,p,["drag"],d,"",ex(ex({},l.request(e)),{requestAble:t,isRequest:!0}),c),h},requestEnd:function(){return i2(n,p,["drag"],d,"End",ex(ex({},l.requestEnd()),{requestAble:t,isRequest:!0}),c),h}};return i2(n,p,["drag"],d,"Start",ex(ex({},l.requestStart(e)),{requestAble:t,isRequest:!0}),c),c?h.request(e).requestEnd():h},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),e=this.props,r=e.padding,n=t.originalBeforeOrigin,i=t.transformOrigin,o=t.allMatrix,a=t.is3d,s=t.pos1,u=t.pos2,l=t.pos3,c=t.pos4,f=t.left,d=t.top,p=t.isPersisted,h=e.zoom||1;if(!r&&h<=1){t.renderPoses=[s,u,l,c],t.renderLines=[[s,u],[u,c],[c,l],[l,s]];return}var v=ib(r||{}),g=v.left,m=v.top,b=v.bottom,x=v.right,y=a?4:3,S=tb(y,tk((p?i:this.controlBox&&e.groupable?n:ty(n,[f,d])).map(function(t){return-t}),y),o,tk(i,y)),E=ie(S,s,[-g,-m],y),D=ie(S,u,[x,-m],y),C=ie(S,l,[-g,b],y),w=ie(S,c,[x,b],y);if(t.renderPoses=[E,D,C,w],t.renderLines=[[E,D],[D,w],[w,C],[C,E]],h){var M=h/2;t.renderLines=[[ie(S,s,[-g-M,-m],y),ie(S,u,[x+M,-m],y)],[ie(S,u,[x,-m-M],y),ie(S,c,[x,b+M],y)],[ie(S,c,[x+M,b],y),ie(S,l,[-g-M,b],y)],[ie(S,l,[-g,b+M],y),ie(S,s,[-g,-m-M],y)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,r=t.container,n=t.parentMoveable,i=this.state,o=i.target,a=i.container;if(o||e){this.updateAbles();var s=!n4(o,e);if(s||!n4(a,r)){var u=r||this.controlBox;u&&this.unsetAbles(),this.updateState({target:e,container:r}),!n&&u&&this.updateRect("End",!1,!1),this._isPropTargetChanged=s}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(t,e){var r=this.props;if(this._emitter.trigger(t,e),r.parentMoveable&&e.isRequest&&!e.isRequestChild)return r.parentMoveable.triggerEvent(t,e,!0);var n=r[t];return n&&n(e)},e.prototype.useCSS=function(t,e){var r=this.props.customStyledMap,n=t+e;return r[n]||(r[n]=eg(t,e)),r[n]},e.prototype.getState=function(){var t,e=this.props;(e.target||(null===(t=e.targets)||void 0===t?void 0:t.length))&&(this._hasFirstTarget=!0);var r=this.controlBox,n=e.persistData,i=e.firstRenderState;if(i&&!r)return i;if(!this._hasFirstTarget&&n){var o=i9(n);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach(function(e){e.unset&&e.unset(t)})},e.prototype.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props.triggerAblesSimultaneously,n=this.getEnabledAbles(t),i="drag".concat(e,"Start"),o="pinch".concat(e,"Start"),a="drag".concat(e,"ControlStart"),s=n3(n,[i,o],r),u=n3(n,[a],r);this.enabledAbles=n,this.targetAbles=s,this.controlAbles=u},e.prototype.updateState=function(t,e){if(e)this.isUnmounted||this.setState(t);else{var r=this.state;for(var n in t)r[n]=t[n]}},e.prototype.getEnabledAbles=function(t){void 0===t&&(t=this.props.ables);var e=this.props;return t.filter(function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])})},e.prototype.renderAbles=function(){var t,e,r,n,i=this,a=this.props.triggerAblesSimultaneously,s={createElement:o.createElement};return this.renderState={},(t=n7(n3(this.getEnabledAbles(),["render"],a).map(function(t){return(0,t.render)(i,s)||[]})).filter(function(t){return t}),e=function(t){return t.key},r=[],n={},t.forEach(function(i,o){var a=e(i,o,t),s=n[a];s||(s=[],n[a]=s,r.push(s)),s.push(i)}),r).map(function(t){return t[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){return this.getEnabledAbles().reduce(function(t,e){var r,n,i=null!==(n=null===(r=e.requestStyle)||void 0===r?void 0:r.call(e))&&void 0!==n?n:[];return eS(eS([],ey(t),!1),ey(i),!1)},eS([],ey(this.props.requestStyles||[]),!1))},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.targetAbles.length,e=this.controlAbles.length,r=this._dragTarget;(!t&&this.targetGesto||this._isTargetChanged(!0))&&(n$(this,!1),this.updateState({gestos:{}})),e||n$(this,!0),r&&t&&!this.targetGesto&&(this.targetGesto=i4(this,r,"")),!this.controlGesto&&e&&(this.controlGesto=i5(this,"Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=is(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,e=t.zoom,r=t.hideDefaultLines,n=t.hideChildMoveableDefaultLines,i=t.parentMoveable;if(r||i&&n)return[];var a=this.getState(),s={createElement:o.createElement};return a.renderLines.map(function(t,r){return rg(s,"",t[0],t[1],e,"render-line-".concat(r))})},e.prototype._isTargetChanged=function(t){var e=this.props,r=e.dragTarget||e.target,n=this._prevOriginalDragTarget,i=this._prevDragArea,o=e.dragArea;return!o&&n!==r||(t||o)&&i!==o||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,r=this.events,n=L(r);if(this._isTargetChanged())for(var i in r){var o=r[i];o&&o.destroy(),r[i]=null}if(e){var a=this.enabledAbles;n.forEach(function(n){var i=n3(a,[n]),o=i.length>0,s=r[n];if(!o){s&&(s.destroy(),r[n]=null);return}s||(s=new i7(e,t,n),r[n]=s),s.setAbles(i)})}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=is(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=is(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(eS(eS([],ey(this._getAbleViewClassNames()),!1),[this.isDragging()?iR:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var e=this._viewContainer,r=n6(t.filter(Boolean),function(t){return t}).map(function(t){return ey(t,1)[0]}),n=this._viewClassNames,i=tL(n,r),o=i.removed,a=i.added;o.forEach(function(t){ti(e,n[t])}),a.forEach(function(t){tn(e,r[t])}),this._viewClassNames=r},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map(function(e){var r;return(null===(r=e.viewClassName)||void 0===r?void 0:r.call(e,t))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var e=this;void 0===t&&(t="");var r=this.getEnabledAbles(),n=this.targetGesto,i=this.controlGesto,o=(null==n?void 0:n.isFlag())?n.getEventData():{},a=(null==i?void 0:i.isFlag())?i.getEventData():{};return r.map(function(r){var n,i,s,u=r.name,l=(null===(n=r.className)||void 0===n?void 0:n.call(r,e))||"";return((null===(i=o[u])||void 0===i?void 0:i.isEventStart)||(null===(s=a[u])||void 0===s?void 0:s.isEventStart))&&(l+=" ".concat(ny("".concat(u).concat(t,"-dragging")))),l.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var e,r=this.props,n=r.target,i=tc(this.getControlBoxElement());if(!i.ResizeObserver||!n||!r.useResizeObserver){null===(e=this._reiszeObserver)||void 0===e||e.disconnect();return}if(t.target!==n||!this._reiszeObserver){var o=new i.ResizeObserver(this.checkUpdateRect);o.observe(n,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(t){var e,r=this,n=this.props,i=n.target,o=tc(this.getControlBoxElement());if(!o.MutationObserver||!i||!n.useMutationObserver){null===(e=this._mutationObserver)||void 0===e||e.disconnect();return}if(t.target!==i||!this._mutationObserver){var a=new o.MutationObserver(function(t){var e,n;try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),o=i.next();!o.done;o=i.next()){var a=o.value;"attributes"===a.type&&"style"===a.attributeName&&r.checkUpdateRect()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}});a.observe(i,{attributes:!0}),this._mutationObserver=a}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:nS,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(o.PureComponent),oe={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var r,n=t.props,i=n.targets||[],o=t.getState(),a=o.left,s=o.top,u=o.isPersisted,l=n.zoom||1,c=t.renderGroupRects,f=(null===(r=n.persistData)||void 0===r?void 0:r.children)||[];u?i=f.map(function(){return null}):f=[];var d=ih(t,"parentPosition",[a,s],function(t){return t.join(",")}),p=ih(t,"requestStyles",t.getRequestChildStyles(),function(t){return t.join(",")});return t.moveables=t.moveables.slice(0,i.length),eS(eS([],ey(i.map(function(r,i){return e.createElement(ot,{key:"moveable"+i,ref:E(t,"moveables",i),target:r,origin:!1,requestStyles:p,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[a,s],persistData:f[i],zoom:l})})),!1),ey(n7(c.map(function(t,r){var n=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map(function(t,i){var o=ey(t,2),a=o[0],s=o[1];return rg(e,"",tS(n[a],d),tS(n[s],d),l,"group-rect-".concat(r,"-").concat(i))})}))),!1)}},or=eE("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,n=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.contains(i);if(!(!n||!i||e.isDrag||t.isMoveableElement(i))&&!o){var a=r.contains(i);n1(t,"onClick",nJ(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.inputTarget;if(!(!r||!n||e.isDrag||t.isMoveableElement(n))&&e.datas.inputTarget!==n){var i=t.props.targets,o=i.indexOf(n),a=o>-1,s=!1;-1===o&&(s=(o=q(i,function(t){return t.contains(n)}))>-1),n1(t,"onClickGroup",nJ(t,e,{isDouble:e.isDouble,targets:i,inputTarget:n,targetIndex:o,isTarget:a,containsTarget:s,moveableTarget:i[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function on(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ex(ex({},t),{datas:e})}var oi=eE("edgeDraggable",{css:[".edge.edgeDraggable.line {\ncursor: move;\n}"],render:function(t,e){var r=t.props,n=r.edgeDraggable;return n?rm(e,"edgeDraggable",n,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,n=t.props,i=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!!n.edgeDraggable&&!!i&&!n.draggable&&tr(i,ny("direction"))&&tr(i,ny("edge"))&&tr(i,ny("edgeDraggable"))},dragStart:function(t,e){return r4.dragStart(t,on(e))},drag:function(t,e){return r4.drag(t,on(e))},dragEnd:function(t,e){return r4.dragEnd(t,on(e))},dragGroupCondition:function(t,e){var r,n=t.props,i=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!!n.edgeDraggable&&!!i&&!n.draggable&&tr(i,ny("direction"))&&tr(i,ny("line"))},dragGroupStart:function(t,e){return r4.dragGroupStart(t,on(e))},dragGroup:function(t,e){return r4.dragGroup(t,on(e))},dragGroupEnd:function(t,e){return r4.dragGroupEnd(t,on(e))},unset:function(t){return r4.unset(t)}}),oo={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},oa=[i0,ik,{name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",rG,rk,rI,rN,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[":host {\n--bounds-color: #d66;\n}\n.guideline {\npointer-events: none;\nz-index: 2;\n}\n.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}\n.guideline-group {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.guideline-group .size-value {\nposition: absolute;\ncolor: #f55;\nfont-size: 12px;\nfont-size: calc(12px * var(--zoom));\nfont-weight: bold;\n}\n.guideline-group.horizontal .size-value {\ntransform-origin: 50% 100%;\ntransform: translateX(-50%);\nleft: 50%;\nbottom: 5px;\nbottom: calc(2px + 3px * var(--zoom));\n}\n.guideline-group.vertical .size-value {\ntransform-origin: 0% 50%;\ntop: 50%;\ntransform: translateY(-50%);\nleft: 5px;\nleft: calc(2px + 3px * var(--zoom));\n}\n.guideline.gap {\nbackground: #f55;\n}\n.size-value.gap {\ncolor: #f55;\n}\n"],render:function(t,e){var r,n,i,o,a,s=t.state,u=s.top,l=s.left,c=s.pos1,f=s.pos2,d=s.pos3,p=s.pos4,h=s.snapRenderInfo,v=t.props.snapRenderThreshold,g=void 0===v?1:v;if(!h||!h.render||!rO(t,""))return ih(t,"boundMap",r_(),function(t){return JSON.stringify(t)}),ih(t,"innerBoundMap",r_(),function(t){return JSON.stringify(t)}),[];s.guidelines=nu(t);var m=Math.min(c[0],f[0],d[0],p[0]),b=Math.min(c[1],f[1],d[1],p[1]),x=h.externalPoses||[],y=nV(t.state),S=[],E=[],D=[],C=[],w=[],M=nz(y),P=M.width,R=M.height,_=M.top,O=M.left,T=M.bottom,z=M.right,G={left:O,right:z,top:_,bottom:T,center:(O+z)/2,middle:(_+T)/2},k=x.length>0,I=k?nz(x):{};if(!h.request){if(h.direction&&w.push((N=h.direction,B=[],N[0]&&N[1]?B=[N,[-N[0],N[1]],[N[0],-N[1]]]:N[0]||N[1]?t.props.keepRatio?B.push([-1,-1],[-1,1],[1,-1],[1,1],N):(B.push.apply(B,eS([],ey((A=[[-1,-1],[1,-1],[-1,-1],[1,1]],eQ(N).map(function(t){return A[t]}))),!1)),B.length>1&&B.push([(B[0][0]+B[1][0])/2,(B[0][1]+B[1][1])/2])):[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(t,e,r){var n=r[e+1]||r[0];B.push(t),B.push([(t[0]+n[0])/2,(t[1]+n[1])/2])}),j=rA(t,(F=B.map(function(t){return e1(y,t)})).map(function(t){return t[0]}),F.map(function(t){return t[1]}),B.map(function(t){return rF(t[0])}),B.map(function(t){return rF(t[1])}),g,g),q=rF(B.map(function(t){return t[0]})[j.vertical.index]),W=rF(B.map(function(t){return t[1]})[j.horizontal.index]),{vertical:ex(ex({},j.vertical),{direction:q}),horizontal:ex(ex({},j.horizontal),{direction:W})})),h.snap){var N,A,B,F,j,q,W,Y=nz(y);h.center&&(Y.middle=(Y.top+Y.bottom)/2,Y.center=(Y.left+Y.right)/2),w.push(rj(t,Y,g,g))}k&&(h.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),w.push(rj(t,I,g,g))),w.forEach(function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;S.push.apply(S,eS([],ey(e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),!1)),E.push.apply(E,eS([],ey(r.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),!1)),D.push.apply(D,eS([],ey(nm(e)),!1)),C.push.apply(C,eS([],ey(nm(r)),!1))})}var X=nb(t,[O,z],[_,T],S,E),L=X.boundMap,H=X.innerBoundMap;k&&nb(t,[I.left,I.right],[I.top,I.bottom],S,E,h.externalBounds);var V=eS(eS([],ey(D),!1),ey(C),!1),U=V.filter(function(t){return t.element&&!t.gapRects}),$=V.filter(function(t){return t.gapRects}).sort(function(t,e){return t.gap-e.gap});n1(t,"onSnap",{guidelines:V.filter(function(t){return!t.element}),elements:U,gaps:$},!0);var K=ih(t,"boundMap",L,function(t){return JSON.stringify(t)},r_()),Z=ih(t,"innerBoundMap",H,function(t){return JSON.stringify(t)},r_());return(L===K||H===Z)&&n1(t,"onBound",{bounds:L,innerBounds:H},!0),eS(eS(eS(eS(eS(eS([],ey((r=[m,b],n=t.props.isDisplayInnerSnapDigit,i=[],["vertical","horizontal"].forEach(function(o){var a,s,u,l,c,f=U.filter(function(t){return t.type===o}),d="vertical"===o?1:0,p=d?0:1,h=(a="vertical"===o?0:1,s="vertical"===o?1:0,l=G[(u=a?rP:rR).start],c=G[u.end],n6(f,function(t){return t.pos[a]}).map(function(t){var e=[],r=[];return t.forEach(function(t){var i,f,d=t.element,p=t.elementRect.rect;if(p[u.end]<l)e.push(t);else if(c<p[u.start])r.push(t);else if(p[u.start]<=l&&c<=p[u.end]&&n){var h=t.pos,v={element:d,rect:ex(ex({},p),((i={})[u.end]=p[u.start],i))},g={element:d,rect:ex(ex({},p),((f={})[u.start]=p[u.end],f))},m=[0,0],b=[0,0];m[a]=h[a],m[s]=h[s],b[a]=h[a],b[s]=h[s]+t.size,e.push({type:o,pos:m,size:0,elementRect:v,direction:"",elementDirection:"end"}),r.push({type:o,pos:b,size:0,elementRect:g,direction:"",elementDirection:"start"})}}),e.sort(function(t,e){return e.pos[s]-t.pos[s]}),r.sort(function(t,e){return t.pos[s]-e.pos[s]}),{total:t,start:e,end:r,inner:[]}})),v=d?rR:rP,g=d?rP:rR,m=G[v.start],b=G[v.end];h.forEach(function(n){var a=n.total,s=n.start,u=n.end,l=n.inner,c=r[p]+a[0].pos[p]-G[g.start],f=G;s.forEach(function(n){var a=n.elementRect.rect,s=f[v.start]-a[v.end];if(s>0){var u=[0,0];u[d]=r[d]+f[v.start]-m-s,u[p]=c,i.push(ns(t,o,"dashed",i.length,s,u,n.className,e))}f=a}),f=G,u.forEach(function(n){var a=n.elementRect.rect,s=a[v.start]-f[v.end];if(s>0){var u=[0,0];u[d]=r[d]+f[v.end]-m,u[p]=c,i.push(ns(t,o,"dashed",i.length,s,u,n.className,e))}f=a}),l.forEach(function(n){var a=n.elementRect.rect,s=m-a[v.start],u=a[v.end]-b,l=[0,0],f=[0,0];l[d]=r[d]-s,l[p]=c,f[d]=r[d]+b-m,f[p]=c,i.push(ns(t,o,"dashed",i.length,s,l,n.className,e)),i.push(ns(t,o,"dashed",i.length,u,f,n.className,e))})})}),i)),!1),ey((o=[m,b],a=[],["horizontal","vertical"].forEach(function(r){var n=$.filter(function(t){return t.type===r}).slice(0,1),i="vertical"===r?0:1,s=i?0:1,u=i?rR:rP,l=i?rP:rR,c=G[u.start],f=G[u.end],d=G[l.start],p=G[l.end];n.forEach(function(r){var n=r.gap,h=r.gapRects,v=Math.max.apply(Math,eS([d],ey(h.map(function(t){return t.rect[l.start]})),!1)),g=Math.min.apply(Math,eS([p],ey(h.map(function(t){return t.rect[l.end]})),!1)),m=(v+g)/2;v!==g&&m!==(d+p)/2&&h.forEach(function(r){var l=r.rect,p=r.className,h=[o[0],o[1]];if(l[u.end]<c)h[i]+=l[u.end]-c;else{if(!(f<l[u.start]))return;h[i]+=l[u.start]-c-n}h[s]+=m-d,a.push(ns(t,i?"vertical":"horizontal","gap",a.length,n,h,p,e))})})}),a)),!1),ey(na(t,"horizontal",C,[l,u],G,e)),!1),ey(na(t,"vertical",D,[l,u],G,e)),!1),ey(no(t,"horizontal",E,m,u,P,0,e)),!1),ey(no(t,"vertical",S,b,l,R,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},nd(t)},drag:function(t){var e=t.state;nd(t)||(e.guidelines=nu(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!!(nx(t,e)||nn(t,e))||(!e.isRequest&&e.inputEvent?tr(e.inputEvent.target,ny("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,nd(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,nd(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}},ix,r4,oi,r8,iS,iC,{name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[".rotation {\nposition: absolute;\nheight: 40px;\nwidth: 1px;\ntransform-origin: 50% 100%;\nheight: calc(40px * var(--zoom));\ntop: auto;\nleft: 0;\nbottom: 100%;\nwill-change: transform;\n}\n.rotation .rotation-line {\ndisplay: block;\nwidth: 100%;\nheight: 100%;\ntransform-origin: 50% 50%;\n}\n.rotation .rotation-control {\nborder-color: #4af;\nborder-color: var(--moveable-color);\nbackground:#fff;\ncursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\ncursor: alias;\n}\n.rotatable.direction.control.move {\ncursor: move;\n}\n"],viewClassName:function(t){return t.isDragging("rotatable")?ny("view-rotation-dragging"):""},render:function(t,e){var r=nA(t.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,o=r.zoom,a=r.renderDirections,s=r.rotateAroundControls,u=r.resolveAblesWithRotatable,l=t.getState(),c=l.renderPoses,f=l.direction;if(!n)return null;var d=function t(e,r,n){var i=ey(r,4),o=i[0],a=i[1],s=i[2],u=i[3];if("none"===e)return[];if(O(e))return e.map(function(e){return t(e,[o,a,s,u],n)[0]});var l=ey((e||"top").split("-"),2),c=l[0],f=l[1],d=[o,a];"left"===c?d=[s,o]:"right"===c?d=[a,u]:"bottom"===c&&(d=[u,s]);var p=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2],h=nF(d,n);if(f){var v="top"===f||"left"===f,g="bottom"===c||"left"===c;p=d[v&&!g||!v&&g?0:1]}return[[p,h]]}(i,c,f),p=[];if(d.forEach(function(t,r){var n=ey(t,2),i=n[0],a=n[1];p.push(e.createElement("div",{key:"rotation".concat(r),className:ny("rotation"),style:{transform:"translate(-50%) translate(".concat(i[0],"px, ").concat(i[1],"px) rotate(").concat(a,"rad)")}},e.createElement("div",{className:ny("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:ny("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),a){var h=L(u||{}),v={};h.forEach(function(t){u[t].forEach(function(e){v[e]=t})});var g=[];O(a)&&(g=a.map(function(t){var e=v[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}})),p.push.apply(p,eS([],ey(rh(t,"rotatable",g,e)),!1))}return s&&p.push.apply(p,eS([],ey(rx(t,e)),!1)),p},dragControlCondition:nn,dragControlStart:function(t,e){var r,n,i,o,a,s,u,l,c,f,d=e.datas,p=e.clientX,h=e.clientY,v=e.parentRotate,g=e.parentFlag,m=e.isPinch,b=e.isRequest,x=t.state,y=x.target,S=x.left,E=x.top,D=x.direction,C=x.beforeDirection,w=x.targetTransform,M=x.moveableClientRect,P=x.offsetMatrix,R=x.targetMatrix,_=x.allMatrix,O=x.width,T=x.height;if(!b&&!y)return!1;var z=t.getRect();d.rect=z,d.transform=w,d.left=S,d.top=E;var G=function(e){var r=r6(t.state,e);d.fixedDirection=r.fixedDirection,d.fixedOffset=r.fixedOffset,d.fixedPosition=r.fixedPosition,$&&$.setFixedPosition(e)},k=function(e){var r,n,i,o,a,s=(n=(r=t.state).allMatrix,i=r.is3d,o=r.width,a=r.height,{fixedPosition:nO(n,[o/2*(1+e[0]),a/2*(1+e[1])],i?4:3),fixedDirection:e,fixedOffset:[0,0]});d.fixedDirection=s.fixedDirection,d.fixedOffset=s.fixedOffset,d.fixedPosition=s.fixedPosition,$&&$.setFixedDirection(e)},I=p,N=h;if(b||m||g){var A=v||0;d.beforeInfo={origin:z.beforeOrigin,prevDeg:A,defaultDeg:A,prevSnapDeg:0,startDist:0},d.afterInfo=ex(ex({},d.beforeInfo),{origin:z.origin}),d.absoluteInfo=ex(ex({},d.beforeInfo),{origin:z.origin,startValue:A})}else{var B=null===(f=e.inputEvent)||void 0===f?void 0:f.target;if(B){var F=eF[B.getAttribute("data-direction")||""];if(F){d.isControl=!0,d.isAroundControl=tr(B,ny("around-control")),d.controlDirection=F;var j,q,W,Y,X,L,H=B.getAttribute("data-resolve");H&&(d.resolveAble=H),I=(c=ey(e1((j=x.rootMatrix,q=x.renderPoses,W=16===j.length?4:3,Y=q.map(function(t){return nO(j,t,W)}),X=M.left,L=M.top,Y.map(function(t){return[t[0]+X,t[1]+L]})),F),2))[0],N=c[1]}}d.beforeInfo={origin:z.beforeOrigin},d.afterInfo={origin:z.origin},d.absoluteInfo={origin:z.origin,startValue:z.rotation};var V=G;G=function(e){var r=x.is3d?4:3,n=ey(ty(tv(R,r),e),2),i=tD(P,tg([n[0],n[1]],r)),o=tD(_,tg([e[0],e[1]],r));V(e);var a=x.posDelta;d.beforeInfo.origin=tS(i,a),d.afterInfo.origin=tS(o,a),d.absoluteInfo.origin=tS(o,a),r9(t,d.beforeInfo,I,N,M),r9(t,d.afterInfo,I,N,M),r9(t,d.absoluteInfo,I,N,M)},k=function(t){var e=e1([[0,0],[O,0],[0,T],[O,T]],t);G(e)}}d.startClientX=I,d.startClientY=N,d.direction=D,d.beforeDirection=C,d.startValue=0,d.datas={},e4(t,e,"rotate");var U=!1,$=!1;d.isControl&&d.resolveAble&&"resizable"===d.resolveAble&&($=r8.dragControlStart(t,ex(ex({},new eX("resizable").dragStart([0,0],e)),{parentPosition:d.controlPosition,parentFixedPosition:d.fixedPosition}))),$||(U=r4.dragStart(t,new eX().dragStart([0,0],e))),G((n=(r=t.props).groupable,i=r.svgOrigin,a=(o=t.getState()).offsetWidth,s=o.offsetHeight,u=o.svg,l=o.transformOrigin,!n&&u&&i?ip(i,a,s):l));var K=nJ(t,e,ex(ex({set:function(t){d.startValue=t*Math.PI/180},setFixedDirection:k,setFixedPosition:G},e3(t,e)),{dragStart:U,resizeStart:$})),Z=n1(t,"onRotateStart",K);return d.isRotate=!1!==Z,x.snapRenderInfo={request:e.isRequest},!!d.isRotate&&K},dragControl:function(t,e){var r,n,i,o,a,s,u,l,c,f,d,p,h,v=e.datas,g=e.clientDistX,m=e.clientDistY,b=e.parentRotate,x=e.parentFlag,y=e.isPinch,S=e.groupDelta,E=e.resolveMatrix,D=v.beforeDirection,C=v.beforeInfo,w=v.afterInfo,M=v.absoluteInfo,P=v.isRotate,R=v.startValue,_=v.rect,O=v.startClientX,T=v.startClientY;if(P){eU(t,e,"rotate");var z=D*eL(e.datas.beforeTransform,[50,50],100,100).direction,G=t.props.parentMoveable,k=0,I=0,N=0,A=180/Math.PI*R,B=M.startValue,F=!1,j=O+g,q=T+m;if(!x&&"parentDist"in e){var W=e.parentDist;l=W,f=W,p=W}else y||x?(l=nt(b,D,C),f=nt(b,z,w),p=nt(b,z,M)):(l=ne(j,q,D,C),f=ne(j,q,z,w),p=ne(j,q,z,M),F=!0);if(n1(t,"onBeforeRotate",nJ(t,e,{beforeRotation:c=A+l,rotation:d=A+f,absoluteRotation:h=B+p,setRotation:function(t){l=f=t-A,p=f}},!0)),k=(a=ey(nr(t,_,C,l,A,F),3))[0],l=a[1],c=a[2],I=(s=ey(nr(t,_,w,f,A,F),3))[0],f=s[1],d=s[2],N=(u=ey(nr(t,_,M,p,B,F),3))[0],p=u[1],h=u[2],N||I||k||G||E){var Y=e$(v,"rotate(".concat(d,"deg)"),"rotate(".concat(f,"deg)"));E&&(v.fixedPosition=rr(t,v.targetAllTransform,v.fixedDirection,v.fixedOffset,v));var X=(r=f,n=v.fixedDirection,i=v.fixedPosition,o=v.fixedOffset,rn(t,"rotate(".concat(r,"deg)"),n,i,o,v)),L=tS(ty(S||[0,0],X),v.prevInverseDist||[0,0]);v.prevInverseDist=X,v.requestValue=null;var H=re(t,Y,L,y,e),V=H,U=Q([j,q],M.startAbsoluteOrigin)-M.startDist,$=void 0;if("resizable"===v.resolveAble){var K=r8.dragControl(t,ex(ex({},eY(e,t.state,[e.deltaX,e.deltaY],!!y,!1,"resizable")),{resolveMatrix:!0,parentDistance:U}));K&&($=K,V=nZ(V,K,e))}var Z=nJ(t,e,ex(ex({delta:I,dist:f,rotate:d,rotation:d,beforeDist:l,beforeDelta:k,beforeRotate:c,beforeRotation:c,absoluteDist:p,absoluteDelta:N,absoluteRotate:h,absoluteRotation:h,isPinch:!!y,resize:$},H),V));return n1(t,"onRotate",Z),Z}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var n=nQ(t,e,{});return n1(t,"onRotateEnd",n),n}},dragGroupControlCondition:nn,dragGroupControlStart:function(t,e){var r=e.datas,n=t.state,i=n.left,o=n.top,a=n.beforeOrigin,s=this.dragControlStart(t,e);if(!s)return!1;s.set(r.beforeDirection*t.rotation);var u=rd(t,this,"dragControlStart",e,function(t,e){var r=t.state,n=r.left,s=r.top,u=r.beforeOrigin,l=ty(tS([n,s],[i,o]),tS(u,a));return e.datas.startGroupClient=l,e.datas.groupClient=l,ex(ex({},e),{parentRotate:0})}),l=ex(ex({},s),{targets:t.props.targets,events:u}),c=n1(t,"onRotateGroupStart",l);return r.isRotate=!1!==c,!!r.isRotate&&s},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){n0(t,"onBeforeRotate",function(r){n1(t,"onBeforeRotateGroup",nJ(t,e,ex(ex({},r),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=r.beforeDirection,o=n.beforeDist,a=o/180*Math.PI,s=rd(t,this,"dragControl",e,function(t,e){var r=e.datas.startGroupClient,n=ey(e.datas.groupClient,2),s=n[0],u=n[1],l=ey(tR(r,a*i),2),c=l[0],f=l[1];return e.datas.groupClient=[c,f],ex(ex({},e),{parentRotate:o,groupDelta:[c-s,f-u]})});t.rotation=i*n.beforeRotation;var u=ex({targets:t.props.targets,events:s,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},n);return n1(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var n=rd(t,this,"dragControlEnd",e),i=nQ(t,e,{targets:t.props.targets,events:n});return n1(t,"onRotateGroupEnd",i),r}},request:function(t){var e={},r=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-n),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},{name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var r=t.props,n=r.scrollContainer,i=void 0===n?t.getContainer():n,o=r.scrollOptions,a=new t2,s=is(i,!0);e.datas.dragScroll=a,t.state.dragScroll=a;var u=e.isControl?"controlGesto":"targetGesto",l=e.targets;a.on("scroll",function(r){var n=nJ(t,e,{scrollContainer:r.container,direction:r.direction});l&&(n.targets=l),n1(t,l?"onScrollGroup":"onScroll",n)}).on("move",function(e){var r=e.offsetX,n=e.offsetY,i=e.inputEvent;t[u].scrollBy(r,n,i.inputEvent,!1)}).on("scrollDrag",function(e){(0,e.next)(t[u].getCurrentEvent())}),a.dragStart(e,ex({container:s},o))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,i=n.scrollContainer,o=void 0===i?t.getContainer():i,a=n.scrollThreshold,s=n.scrollThrottleTime,u=n.getScrollPosition,l=void 0===u?iG:u,c=n.scrollOptions;return r.drag(e,ex({container:o,threshold:void 0===a?0:a,throttleTime:void 0===s?0:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}},c)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ex(ex({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ex(ex({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ex(ex({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ex(ex({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ex(ex({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ex(ex({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ex(ex({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;null===(e=r.dragScroll)||void 0===e||e.dragEnd(),r.dragScroll=null}},iI,iz,{name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[":host[data-able-origindraggable] .control.origin {\npointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:tr(e.inputEvent.target,ny("origin"))},dragControlStart:function(t,e){var r=e.datas;eV(t,e);var n=nJ(t,e,{dragStart:r4.dragStart(t,new eX().dragStart([0,0],e))}),i=n1(t,"onDragOriginStart",n);return(r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,!1===i)?(r.isDragOrigin=!1,!1):n},dragControl:function(t,e){var r=e.datas,n=e.isPinch,i=e.isRequest;if(!r.isDragOrigin)return!1;var o=ey(eJ(e),2),a=o[0],s=o[1],u=t.state,l=u.width,c=u.height,f=u.offsetMatrix,d=u.targetMatrix,p=u.is3d,h=t.props.originRelative,v=void 0===h||h,g=p?4:3,m=[a,s];if(i){var b=e.distOrigin;(b[0]||b[1])&&(m=b)}var x=ty(r.startOrigin,m),y=ty(r.startTargetOrigin,m),S=tS(m,r.prevOrigin),E=e2(f,d,x,g),D=t.getRect(),C=nz(nT(E,l,c,g)),w=[D.left-C.left,D.top-C.top];r.prevOrigin=m;var M=[ir(y[0],l,v),ir(y[1],c,v)].join(" "),P=r4.drag(t,eY(e,t.state,w,!!n,!1)),R=nJ(t,e,ex(ex({width:l,height:c,origin:x,dist:m,delta:S,transformOrigin:M,drag:P},nK({transformOrigin:M,transform:P.transform},e)),{afterTransform:P.transform}));return n1(t,"onDragOrigin",R),R},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(n1(t,"onDragOriginEnd",nQ(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var e={},r=t.getRect(),n=0,i=0,o=r.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:n,distY:i,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},{name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[".control.clip-control {\nbackground: #6d6;\ncursor: pointer;\n}\n.control.clip-control.clip-radius {\nbackground: #d66;\n}\n.line.clip-line {\nbackground: #6e6;\ncursor: move;\nz-index: 1;\n}\n.clip-area {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.clip-ellipse {\nposition: absolute;\ncursor: move;\nborder: 1px solid #6d6;\nborder: var(--zoompx) solid #6d6;\nborder-radius: 50%;\ntransform-origin: 0px 0px;\n}",":host {\n--bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}"],render:function(t,e){var r=t.props,n=r.customClipPath,i=r.defaultClipPath,o=r.clipArea,a=r.zoom,s=r.groupable,u=t.getState(),l=u.target,c=u.width,f=u.height,d=u.allMatrix,p=u.is3d,h=u.left,v=u.top,g=u.pos1,m=u.pos2,b=u.pos3,x=u.pos4,y=u.clipPathState,S=u.snapBoundInfos,E=u.rotation;if(!l||s)return[];var D=iK(l,c,f,i||"inset",y||n);if(!D)return[];var C=p?4:3,w=D.type,M=D.poses.map(function(t){var e=nO(d,t.pos,C);return[e[0]-h,e[1]-v]}),P=[],R=[],_="rect"===w,O="inset"===w,T="polygon"===w;if(_||O||T){var z=O?M.slice(0,8):M;R=z.map(function(t,r){var n=0===r?z[z.length-1]:z[r-1],i=Z(n,t),o=nk(n,t);return e.createElement("div",{key:"clipLine".concat(r),className:ny("line","clip-line","snap-control"),"data-clip-index":r,style:{width:"".concat(o,"px"),transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(i,"rad) scaleY(").concat(a,")")}})})}if(P=M.map(function(t,r){return e.createElement("div",{key:"clipControl".concat(r),className:ny("control","clip-control","snap-control"),"data-clip-index":r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(E,"rad) scale(").concat(a,")")}})}),O&&P.push.apply(P,eS([],ey(M.slice(8).map(function(t,r){return e.createElement("div",{key:"clipRadiusControl".concat(r),className:ny("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(E,"rad) scale(").concat(a,")")}})})),!1)),"circle"===w||"ellipse"===w){var G=D.left,k=D.top,I=D.radiusX,N=D.radiusY,A=ey(tS(nO(d,[G,k],C),nO(d,[0,0],C)),2),B=A[0],F=A[1],j="none";if(!o){for(var q=Math.max(10,I/5,N/5),W=[],Y=0;Y<=q;++Y){var X=2*Math.PI/q*Y;W.push([I+(I-a)*Math.cos(X),N+(N-a)*Math.sin(X)])}W.push([I,-2]),W.push([-2,-2]),W.push([-2,2*N+2]),W.push([2*I+2,2*N+2]),W.push([2*I+2,-2]),W.push([I,-2]),j="polygon(".concat(W.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(", "),")")}P.push(e.createElement("div",{key:"clipEllipse",className:ny("clip-ellipse","snap-control"),style:{width:"".concat(2*I,"px"),height:"".concat(2*N,"px"),clipPath:j,transform:"translate(".concat(-h+B,"px, ").concat(-v+F,"px) ").concat(nR(d))}}))}if(o){var L=nz(eS([g,m,b,x],ey(M),!1)),H=L.width,V=L.height,U=L.left,$=L.top;if(T||_||O){var W=O?M.slice(0,8):M;P.push(e.createElement("div",{key:"clipArea",className:ny("clip-area","snap-control"),style:{width:"".concat(H,"px"),height:"".concat(V,"px"),transform:"translate(".concat(U,"px, ").concat($,"px)"),clipPath:"polygon(".concat(W.map(function(t){return"".concat(t[0]-U,"px ").concat(t[1]-$,"px")}).join(", "),")")}}))}}return S&&["vertical","horizontal"].forEach(function(t){var r=S[t],n="horizontal"===t;r.isSnap&&R.push.apply(R,eS([],ey(r.snap.posInfos.map(function(r,i){var o=r.pos;return rg(e,"",tS(nO(d,n?[0,o]:[o,0],C),[h,v]),tS(nO(d,n?[c,o]:[o,f],C),[h,v]),a,"clip".concat(t,"snap").concat(i),"guideline")})),!1)),r.isBound&&R.push.apply(R,eS([],ey(r.bounds.map(function(r,i){var o=r.pos;return rg(e,"",tS(nO(d,n?[0,o]:[o,0],C),[h,v]),tS(nO(d,n?[c,o]:[o,f],C),[h,v]),a,"clip".concat(t,"bounds").concat(i),"guideline","bounds","bold")})),!1))}),eS(eS([],ey(P),!1),ey(R),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props.dragWithClip;return void 0!==r&&!r&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ex(ex({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,n=t.props,i=n.defaultClipPath,o=n.customClipPath,a=r.target,s=r.width,u=r.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",f=e.datas,d=iK(a,s,u,i||"inset",o);if(!d)return!1;var p=d.clipText;return!1===n1(t,"onClipStart",nJ(t,e,{clipType:d.type,clipStyle:p,poses:d.poses.map(function(t){return t.pos})}))?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=d,f.isClipStart=!0,r.clipPathState=p,eV(t,e),!0)},dragControl:function(t,e){var r,n,i,o=e.datas,a=e.originalDatas,s=e.isDragTarget;if(!o.isClipStart)return!1;var u=o.isControl,l=o.isLine,c=o.isArea,f=o.clipIndex,d=o.clipPath;if(!d)return!1;var p=nA(t.props,"clippable"),h=p.keepRatio,v=0,g=0,m=a.draggable,b=eJ(e);s&&m?(v=(r=ey(m.prevBeforeDist,2))[0],g=r[1]):(v=(n=ey(b,2))[0],g=n[1]);var x=[v,g],y=t.state,S=y.width,E=y.height,D=d.type,C=d.poses,w=d.splitter,M=C.map(function(t){return t.pos});c||u||l||(v=-v,g=-g);var P=!u||"nesw"===C[f].direction,R="inset"===D||"rect"===D,_=C.map(function(){return[0,0]});if(u&&!P){var O=C[f],T=O.horizontal,z=O.vertical;_=function(t,e,r,n,i){var o=t[e],a=o.direction,s=o.sub,u=t.map(function(){return[0,0]}),l=a?a.split(""):[];if(n&&e<8){var c=l.filter(function(t){return"w"===t||"e"===t}),f=l.filter(function(t){return"n"===t||"s"===t}),d=c[0],p=f[0];u[e]=r;var h=ey(i$(t),2),v=h[0],g=h[1],m=v&&g?v/g:0;if(m&&i){var b=t[(e+4)%8].pos,x=[0,0];a.indexOf("w")>-1?x[0]=-1:a.indexOf("e")>-1&&(x[0]=1),a.indexOf("n")>-1?x[1]=-1:a.indexOf("s")>-1&&(x[1]=1);var y=ic([v,g],r,m,x,!0),S=v+y[0],E=g+y[1],D=b[1],C=b[1],w=b[0],M=b[0];-1===x[0]?w=M-S:1===x[0]?M=w+S:(w-=S/2,M+=S/2),-1===x[1]?D=C-E:C=1===x[1]?D+E:(D=C-E/2)+E;var P=iU(D,M,C,w);t.forEach(function(t,e){u[e][0]=P[e].pos[0]-t.pos[0],u[e][1]=P[e].pos[1]-t.pos[1]})}else t.forEach(function(t,e){var n=t.direction;n&&(n.indexOf(d)>-1&&(u[e][0]=r[0]),n.indexOf(p)>-1&&(u[e][1]=r[1]))}),d&&(u[1][0]=r[0]/2,u[5][0]=r[0]/2),p&&(u[3][1]=r[1]/2,u[7][1]=r[1]/2)}else a&&!s?l.forEach(function(e){var n="n"===e||"s"===e;t.forEach(function(t,i){var o=t.direction,a=t.horizontal,s=t.vertical;o&&-1!==o.indexOf(e)&&(u[i]=[n||!a?0:r[0],n&&s?r[1]:0])})}):u[e]=r;return u}(C,f,[v*ig(T),g*ig(z)],R,h)}else P&&(_=M.map(function(){return[v,g]}));var G=M.map(function(t,e){return ty(t,_[e])}),k=eS([],ey(G),!1);y.snapBoundInfos=null;var I="circle"===d.type,N="ellipse"===d.type;if(I||N){var A=nz(G),B=ig(A.bottom-A.top),F=ig(N?A.right-A.left:B),j=G[0][1]+B,q=G[0][0]-F,W=G[0][0]+F;I&&(k.push([W,A.bottom]),_.push([1,0])),k.push([A.left,j]),_.push([0,1]),k.push([q,A.bottom]),_.push([1,0])}var Y=nf((p.clipHorizontalGuidelines||[]).map(function(t){return H("".concat(t),E)}),(p.clipVerticalGuidelines||[]).map(function(t){return H("".concat(t),S)}),S,E),X=[],L=[];if(I||N)X=[k[4][0],k[2][0]],L=[k[1][1],k[3][1]];else if(R){var V=[k[0],k[2],k[4],k[6]],U=[_[0],_[2],_[4],_[6]];X=V.filter(function(t,e){return U[e][0]}).map(function(t){return t[0]}),L=V.filter(function(t,e){return U[e][1]}).map(function(t){return t[1]})}else X=k.filter(function(t,e){return _[e][0]}).map(function(t){return t[0]}),L=k.filter(function(t,e){return _[e][1]}).map(function(t){return t[1]});var $=[0,0],K=r2(Y,p.clipTargetBounds&&{left:0,top:0,right:S,bottom:E},X,L,5,5),Z=K.horizontal,J=K.vertical,Q=Z.offset,tt=J.offset;if(Z.isBound&&($[1]+=Q),J.isBound&&($[0]+=tt),(N||I)&&0===_[0][0]&&0===_[0][1]){var A=nz(G),te=A.bottom-A.top,tr=N?A.right-A.left:te,tn=J.isBound?ig(tt):0===J.snapIndex?-tt:tt,ti=Z.isBound?ig(Q):0===Z.snapIndex?-Q:Q;tr-=tn,te-=ti,I&&(tr=te=rY(J,Z)>0?te:tr);var to=k[0];k[1][1]=to[1]-te,k[2][0]=to[0]+tr,k[3][1]=to[1]+te,k[4][0]=to[0]-tr}else if(R&&h&&u){var ta=ey(i$(C),2),ts=ta[0],tu=ta[1],tl=ts&&tu?ts/tu:0,tc=C[f].direction||"",tf=k[1][1],j=k[5][1],q=k[7][0],W=k[3][0];ig(Q)<=ig(tt)?Q=iv(Q)*ig(tt)/tl:tt=iv(tt)*ig(Q)*tl,tc.indexOf("w")>-1?q-=tt:tc.indexOf("e")>-1?W-=tt:(q+=tt/2,W-=tt/2),tc.indexOf("n")>-1?tf-=Q:tc.indexOf("s")>-1?j-=Q:(tf+=Q/2,j-=Q/2);var td=iU(tf,W,j,q);k.forEach(function(t,e){var r;r=ey(td[e].pos,2),t[0]=r[0],t[1]=r[1]})}else k.forEach(function(t,e){var r=_[e];r[0]&&(t[0]-=tt),r[1]&&(t[1]-=Q)});var tp=iV(t,d,G),th="".concat(D,"(").concat(tp.join(w),")");if(y.clipPathState=th,I||N)X=[k[4][0],k[2][0]],L=[k[1][1],k[3][1]];else if(R){var V=[k[0],k[2],k[4],k[6]];X=V.map(function(t){return t[0]}),L=V.map(function(t){return t[1]})}else X=k.map(function(t){return t[0]}),L=k.map(function(t){return t[1]});if(y.snapBoundInfos=r2(Y,p.clipTargetBounds&&{left:0,top:0,right:S,bottom:E},X,L,1,1),m){var tv=y.is3d,tg=y.allMatrix,tm=$;s&&(tm=[x[0]+$[0]-b[0],x[1]+$[1]-b[1]]),m.deltaOffset=tx(tg,[tm[0],tm[1],0,0],tv?4:3)}return n1(t,"onClip",nJ(t,e,ex({clipEventType:"changed",clipType:D,poses:G,clipStyle:th,clipStyles:tp,distX:v,distY:g},nK(((i={})["rect"===D?"clip":"clipPath"]=th,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,n=e.datas,i=e.isDouble,o=n.isLine,a=n.isClipStart,s=n.isControl;return!!a&&(n1(t,"onClipEnd",nQ(t,e,{})),i&&(s?function(t,e){var r=e.datas,n=r.clipPath,i=r.clipIndex,o=n.type,a=n.poses,s=n.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else if("inset"!==o||i<8||(function(t,e,r,n,i){void 0===i&&(i=e.length);var o=iY(t.slice(8)),a=o.horizontalRange,s=o.verticalRange,u=r-8,l=0;if(0===u)l=i;else if(u>0&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),e.splice(r,l)}(a,u,i,0,l),l===a.length))return;var c=iV(t,n,u),f="".concat(o,"(").concat(c.join(s),")");n1(t,"onClip",nJ(t,e,ex({clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:f,distX:0,distY:0},nK({clipPath:f},e))))}(t,e):o&&function(t,e){var r=ey(eH(t,e),2),n=r[0],i=r[1],o=e.datas,a=o.clipPath,s=o.clipIndex,u=a.type,l=a.poses,c=a.splitter,f=l.map(function(t){return t.pos});if("polygon"===u)f.splice(s,0,[n,i]);else{if("inset"!==u)return;var d=iB.indexOf(s),p=iF.indexOf(s),h=l.length;if(function(t,e,r,n,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=iY(t.slice(8)),d=f.horizontalRange,p=f.verticalRange;if(n>-1)for(var h=1===ij[n]?o-l:s-o,v=d[1];v<=n;++v){var g=1===iq[v]?c:u,m=0;if(n===v?m=o:0===v?m=l+h:-1===ij[v]&&(m=s-(e[8][0]-l)),t.splice(8+v,0,{horizontal:ij[v],vertical:0,pos:[m,g]}),e.splice(r+v,0,[m,g]),0===v)break}else if(i>-1){var b=1===iq[i]?a-c:u-a;if(0===d[1]&&0===p[1]){var x=[l+b,c];t.push({horizontal:1,vertical:0,pos:x}),e.push(x)}for(var y=p[0],v=p[1];v<=i;++v){var m=1===ij[v]?l:s,g=0;if(i===v?g=a:0===v?g=c+b:1===iq[v]?g=e[r+y][1]:-1===iq[v]&&(g=u-(e[r+y][1]-c)),t.push({horizontal:0,vertical:iq[v],pos:[m,g]}),e.push([m,g]),0===v)break}}}(l,f,8,d,p,n,i,f[4][0],f[4][1],f[0][0],f[0][1]),h===l.length)return}var v=iV(t,a,f),g="".concat(u,"(").concat(v.join(c),")");n1(t,"onClip",nJ(t,e,ex({clipEventType:"added",clipType:u,poses:f,clipStyles:v,clipStyle:g,distX:0,distY:0},nK({clipPath:g},e))))}(t,e)),i||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},{name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[".control.border-radius {\nbackground: #d66;\ncursor: pointer;\nz-index: 3;\n}",".control.border-radius.vertical {\nbackground: #d6d;\nz-index: 2;\n}",".control.border-radius.virtual {\nopacity: 0.5;\nz-index: 1;\n}",":host.round-line-clickable .line.direction {\ncursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?ny("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),n=r.target,i=r.width,o=r.height,a=r.allMatrix,s=r.is3d,u=r.left,l=r.top,c=r.borderRadiusState,f=t.props,d=f.minRoundControls,p=f.maxRoundControls,h=void 0===p?[4,4]:p,v=f.zoom,g=f.roundPadding,m=void 0===g?0:g,b=f.isDisplayShadowRoundControls,x=f.groupable;if(!n)return null;var y=c||iQ(t),S=s?4:3,E=iZ(y,i,o,void 0===d?[0,0]:d,!0);if(!E)return null;var D=0,C=0,w=x?[0,0]:[u,l];return E.map(function(t,r){var n=t.horizontal,i=t.vertical,o=t.direction||"",s=eS([],ey(t.pos),!1);C+=Math.abs(n),D+=Math.abs(i),n&&o.indexOf("n")>-1&&(s[1]-=m),i&&o.indexOf("w")>-1&&(s[0]-=m),n&&o.indexOf("s")>-1&&(s[1]+=m),i&&o.indexOf("e")>-1&&(s[0]+=m);var u=tS(nO(a,s,S),w),l=t.vertical?D<=h[1]&&(b&&"horizontal"!==b||!t.virtual):C<=h[0]&&(b||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(r),className:ny("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":r,style:{display:l?"block":"none",transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) scale(").concat(v,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,n=e.datas,i=r.target,o=i.getAttribute("class")||"",a=o.indexOf("border-radius")>-1,s=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=-1;if(s){var c=i.getAttribute("data-line-key")||"";c&&isNaN(l=parseInt(c.replace(/render-line-/g,""),10))&&(l=-1)}if(!a&&!s)return!1;var f=nJ(t,e,{});if(!1===n1(t,"onRoundStart",f))return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=a,n.isLine=s,eV(t,e);var d=t.props,p=d.roundRelative,h=d.minRoundControls,v=t.state,g=v.width,m=v.height;n.isRound=!0,n.prevDist=[0,0];var b=iZ(iQ(t)||"",g,m,void 0===h?[0,0]:h,!0)||[];return n.controlPoses=b,v.borderRadiusState=iW(b,p,g,m).styles.join(" "),f},dragControl:function(t,e){var r=e.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var i=r.controlIndex,o=ey(eJ(e),2),a=o[0],s=o[1],u=[a,s],l=tS(u,r.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,d=t.state,p=d.width,h=d.height,v=n[i],g=v.vertical,m=v.horizontal,b=n.map(function(t){var e=t.horizontal,r=t.vertical,n=[e*m*u[0],r*g*u[1]];if(e){if(1===f[0]||f[0]<4&&e!==m)return n}else if(0===f[1])return n[1]=r*m*u[0]/p*h,n;else if(g&&(1===f[1]||f[1]<4&&r!==g))return n;return[0,0]});b[i]=u;var x=n.map(function(t,e){return ex(ex({},t),{pos:ty(t.pos,b[e])})});return i<4?x.slice(0,i+1).forEach(function(t){t.virtual=!1}):x.slice(4,i+1).forEach(function(t){t.virtual=!1}),r.prevDist=[a,s],iJ(t,e,u,l,x)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var n=e.datas,i=e.isDouble;if(!n.isRound)return!1;var o=n.isControl,a=n.controlIndex,s=n.isLine,u=n.lineIndex,l=n.controlPoses,c=l.filter(function(t){return t.virtual}).length,f=t.props.roundClickable,d=void 0===f||f;if(i&&d){if(o&&(!0===d||"control"===d))a<4?l.slice(a,4).forEach(function(t){t.virtual=!0}):l.slice(a).forEach(function(t){t.virtual=!0});else if(s&&(!0===d||"line"===d)){var p=ey(eH(t,e),2);!function(t,e,r,n){var i=t.filter(function(t){var e=t.virtual;return t.horizontal&&!e}).length,o=t.filter(function(t){var e=t.virtual;return t.vertical&&!e}).length,a=-1;if(0===e&&(0===i?a=0:1===i&&(a=1)),2===e&&(i<=2?a=2:i<=3&&(a=3)),3===e&&(0===o?a=4:o<4&&(a=7)),1===e&&(o<=1?a=5:o<=2&&(a=6)),-1!==a&&t[a].virtual){var s,u=t[a];(s=a)<4?t.slice(0,s+1).forEach(function(t){t.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,s+1).forEach(function(t){t.virtual=!1})),a<4?u.pos[0]=r:u.pos[1]=n}}(l,u,p[0],p[1])}c!==l.filter(function(t){return t.virtual}).length&&iJ(t,e,[0,0],[0,0],l)}var h=nQ(t,e,{});return n1(t,"onRoundEnd",h),r.borderRadiusState="",h},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var n=t.moveables,i=t.props.targets,o=rc(t,"roundable",e),a=ex({targets:t.props.targets,events:o.map(function(t,e){return ex(ex({},t),{target:i[e],moveable:n[e],currentTarget:n[e]})})},r);return n1(t,"onRoundGroupStart",a),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var n=t.moveables,i=t.props.targets,o=rc(t,"roundable",e),a=ex({targets:t.props.targets,events:o.map(function(t,e){return ex(ex(ex({},t),{target:i[e],moveable:n[e],currentTarget:n[e]}),nK({borderRadius:r.borderRadius},t))})},r);return n1(t,"onRoundGroup",a),a},dragGroupControlEnd:function(t,e){var r=t.moveables,n=t.props.targets,i=rc(t,"roundable",e);n0(t,"onRound",function(e){var o=ex({targets:t.props.targets,events:i.map(function(t,i){return ex(ex(ex({},t),{target:n[i],moveable:r[i],currentTarget:r[i]}),nK({borderRadius:e.borderRadius},t))})},e);n1(t,"onRoundGroup",o)});var o=this.dragControlEnd(t,e);if(!o)return!1;var a=ex({targets:t.props.targets,events:i.map(function(t,e){var i;return ex(ex({},t),{target:n[e],moveable:r[e],currentTarget:r[e],lastEvent:null===(i=t.datas)||void 0===i?void 0:i.lastEvent})})},o);return n1(t,"onRoundGroupEnd",a),a},unset:function(t){t.state.borderRadiusState=""}},oe,oo,or,iT,i1];function os(t,e){var r=ey(t,3),n=r[0],i=r[1],o=r[2];return(n*e[0]+i*e[1]+o)/Math.sqrt(n*n+i*i)}function ou(t,e){var r=ey(t,2),n=r[0],i=r[1];return-n*e[0]-i*e[1]}function ol(t,e){return Math.max.apply(Math,eS([],ey(t.map(function(t){var r=ey(t,4),n=r[0],i=r[1],o=r[2],a=r[3];return Math.max(n[e],i[e],o[e],a[e])})),!1))}function oc(t,e){return Math.min.apply(Math,eS([],ey(t.map(function(t){var r=ey(t,4),n=r[0],i=r[1],o=r[2],a=r[3];return Math.min(n[e],i[e],o[e],a[e])})),!1))}var of=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new t$,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return eb(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0);var n,i,o,a,s,u,l=this.state;if(this.controlBox&&!l.isPersisted){ru(!0),this.moveables.forEach(function(e){e.updateRect(t,!1,!1)});var c=this.props,f=this.moveables,d=l.target||c.target,p=f.map(function(t){return{finded:!1,manager:t}}),h=this.props.targetGroups||[],v=function t(e,r){var n=r.map(function(r){if(O(r)){var n=t(e,r),i=n.length;return i>1?n:1===i?n[0]:null}var o=W(e,function(t){return t.manager.props.target===r});return o?(o.finded=!0,o.manager):null}).filter(Boolean);return 1===n.length&&O(n[0])?n[0]:n}(p,h),g=c.useDefaultGroupRotate;v.push.apply(v,eS([],ey(p.filter(function(t){return!t.finded}).map(function(t){return t.manager})),!1));var m=[],b=!e||""!==t&&c.updateGroup,x=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var y=null===(u=c.persistData)||void 0===u?void 0:u.rotation;null!=y&&(x=y)}var S=function t(e,r,n){var i=e.map(function(e){if(!O(e))return{poses:nV(e.state),rotation:e.getRotation()};var n=t(e,r),i=[n.pos1,n.pos2,n.pos3,n.pos4];return m.push(n),{poses:i,rotation:n.rotation}}),o=i.map(function(t){return t.rotation}),a=0,s=o[0],u=o.every(function(t){return .1>Math.abs(s-t)});return a=b?!g&&u?s:x:g||n||!u?r:s,function(t,e){var r,n,i,o=[0,0],a=[0,0],s=[0,0],u=[0,0],l=0,c=0;if(!t.length)return{pos1:o,pos2:a,pos3:s,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:l,height:c,rotation:e};var f=tt(e,1e-7);if(f%90){var d=Math.tan(f/180*Math.PI),p=-1/d,h=[1e10,-1e10],v=[[0,0],[0,0]],g=[1e10,-1e10],m=[[0,0],[0,0]];t.forEach(function(t){t.forEach(function(t){var e=os([-d,1,0],t),r=os([-p,1,0],t);h[0]>e&&(v[0]=t,h[0]=e),h[1]<e&&(v[1]=t,h[1]=e),g[0]>r&&(m[0]=t,g[0]=r),g[1]<r&&(m[1]=t,g[1]=r)})});var b=ey(v,2),x=b[0],y=b[1],S=ey(m,2),E=S[0],D=S[1],C=[-d,1,ou([-d,1],x)],w=[-d,1,ou([-d,1],y)],M=[-p,1,ou([-p,1],E)],P=[-p,1,ou([-p,1],D)];o=(r=ey([[C,M],[C,P],[w,M],[w,P]].map(function(t){var e=ey(t,2);return t9(e[0],e[1])[0]}),4))[0],a=r[1],s=r[2],u=r[3],l=g[1]-g[0],c=h[1]-h[0]}else{var R=oc(t,0),_=oc(t,1),O=ol(t,0),T=ol(t,1);if(o=[R,_],a=[O,_],s=[R,T],u=[O,T],l=O-R,c=T-_,f%180){var z=[s,o,u,a];o=(n=ey(z,4))[0],a=n[1],s=n[2],u=n[3],l=T-_,c=O-R}}if(f%360>180){var z=[u,s,a,o];o=(i=ey(z,4))[0],a=i[1],s=i[2],u=i[3]}var G=t6([o,a,s,u]);return{pos1:o,pos2:a,pos3:s,pos4:u,width:l,height:c,minX:G.minX,minY:G.minY,maxX:G.maxX,maxY:G.maxY,rotation:e}}(i.map(function(t){return t.poses}),a)}(v,this.rotation,!0);b&&(this.rotation=S.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=m;var E=this.transformOrigin,D=this.rotation,C=this.scale,w=S.width,M=S.height,P=S.minX,R=S.minY,_=t6((n=[[0,0],[w,0],[0,M],[w,M]],i=ip(E,w,M),o=this.rotation/180*Math.PI,s=(a=n.map(function(t){return tS(t,i)})).map(function(t){return tR(t,o)}),{prev:a,next:s,result:s.map(function(t){return ty(t,i)})}).result),T=_.minX,z=_.minY,G=" rotate(".concat(D,"deg)")+" scale(".concat(iv(C[0]),", ").concat(iv(C[1]),")"),k="translate(".concat(-T,"px, ").concat(-z,"px)").concat(G);this.controlBox.style.transform="translate3d(".concat(P,"px, ").concat(R,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(E,";")+"width:".concat(w,"px;height:").concat(M,"px;")+"transform: ".concat(k),l.width=w,l.height=M;var I=this.getContainer(),N=i8(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||I,[]),A=[N.left,N.top],B=ey(nV(N),4),F=B[0],j=B[1],q=B[2],Y=B[3],X=t6([F,j,q,Y]),L=[X.minX,X.minY],H=iv(C[0]*C[1]);N.pos1=tS(F,L),N.pos2=tS(j,L),N.pos3=tS(q,L),N.pos4=tS(Y,L),N.left=P-N.left+L[0],N.top=R-N.top+L[1],N.origin=tS(ty(A,N.origin),L),N.beforeOrigin=tS(ty(A,N.beforeOrigin),L),N.originalBeforeOrigin=ty(A,N.originalBeforeOrigin),N.transformOrigin=tS(ty(A,N.transformOrigin),L),d.style.transform="translate(".concat(-T-L[0],"px, ").concat(-z-L[1],"px)")+G,ru(),this.updateState(ex(ex({},N),{posDelta:L,direction:H,beforeDirection:H}),r)}},e.prototype.getRect=function(){return ex(ex({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.triggerEvent=function(e,r,n){if(n||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,r);this._emitter.trigger(e,r)},e.prototype.getRequestChildStyles=function(){return this.getEnabledAbles().reduce(function(t,e){var r,n,i=null!==(n=null===(r=e.requestChildStyle)||void 0===r?void 0:r.call(e))&&void 0!==n?n:[];return eS(eS([],ey(t),!1),ey(i),!1)},[])},e.prototype.getMoveables=function(){return eS([],ey(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,eS(eS([],ey(this.props.ables),!1),[oe],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=is(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,e=this.props,r=this._prevDragTarget,n=e.dragTarget||this.areaElement,i=e.targets,o=this.differ.update(i),a=o.added,s=o.changed,u=o.removed,l=a.length||u.length;(l||this._prevOriginalDragTarget!==this._originalDragTarget)&&(n$(this,!1),n$(this,!0),this.updateState({gestos:{}})),r!==n&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=i4(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=i5(this,"GroupControl")));var c=!n4(t.container,e.container);c&&(t.container=e.container),(c||l||this.transformOrigin!==(e.defaultGroupOrigin||"50% 50%")||s.length||i.length&&!function t(e,r){return e.length===r.length&&e.every(function(e,n){var i=r[n],o=O(e),a=O(i);return o&&a?t(e,i):!o&&!a&&e===i})}(this._targetGroups,e.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!l},e.prototype._updateObserver=function(){},e.defaultProps=ex(ex({},ot.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(ot),od=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}return eb(e,t),e.prototype.render=function(){var t,e=this,r=this.props,n=r.cspNonce,i=r.cssStyled,a=r.persistData,s=r.targets||[],u=s.length,l=this.isUnmounted||!u,c=null!==(t=null==a?void 0:a.children)&&void 0!==t?t:[];return l&&!u&&c.length?s=c.map(function(){return null}):l||(c=[]),o.createElement(i,{cspNonce:n,ref:S(this,"controlBox"),className:ny("control-box")},s.map(function(t,n){var i,a,s=null!==(a=null===(i=r.individualGroupableProps)||void 0===i?void 0:i.call(r,t,n))&&void 0!==a?a:{};return o.createElement(ot,ex({key:"moveable"+n,ref:E(e,"moveables",n)},r,s,{target:t,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:c[n]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0),ru(!0),this.moveables.forEach(function(n){n.updateRect(t,e,r)}),ru()},e.prototype.getRect=function(){return ex(ex({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.request=function(t,e,r){void 0===e&&(e={});var n=this.moveables.map(function(r){return r.request(t,ex(ex({},e),{isInstant:!1}),!1)}),i=r||e.isInstant,o={request:function(t){return n.forEach(function(e){return e.request(t)}),this},requestEnd:function(){return n.forEach(function(t){return t.requestEnd()}),this}};return i?o.request(e).requestEnd():o},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var r=e,n=W(this.moveables,function(t){var e=t.getTargets()[0],n=t.getControlBoxElement(),i=t.getDragElement();return!!e&&!!i&&(i===r||i.contains(r)||i!==e&&e===r||e.contains(r)||n===r||n.contains(r))});return n&&n.dragStart(t,e),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return eS([],ey(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(ot),op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e.defaultAbles=oa,e}(function(t){var e;function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new t$,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return eb(r,t),r.makeStyled=function(){var t={};this.getTotalAbles().forEach(function(e){var r=e.css;r&&r.forEach(function(e){t[e]=!0})});var e=L(t).join("\n");this.defaultStyled=eg("div",(eA+e).replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+eI+"$1")+"{"}))},r.getTotalAbles=function(){return eS([ik,oe,oo,iT],ey(this.defaultAbles),!1)},r.prototype.render=function(){var t,e=this.constructor;e.defaultStyled||e.makeStyled();var r=this.props,n=r.ables,i=r.props,a=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)0>e.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}(r,["ables","props"]),s=ey(this._updateRefs(!0),2),u=s[0],l=s[1],c=function t(e,r){var n=[];return e.forEach(function(e){if(e){if(T(e)){r[e]&&n.push.apply(n,eS([],ey(r[e]),!1));return}O(e)?n.push.apply(n,eS([],ey(t(e,r)),!1)):n.push(e)}}),n}(u,l),f=c.length>1,d=eS(eS([],ey(e.getTotalAbles()),!1),ey(n||[]),!1),p=ex(ex(ex({},a),i||{}),{ables:d,cssStyled:e.defaultStyled,customStyledMap:e.customStyledMap});this._elementTargets=c;var h=null,v=this.moveable,g=a.persistData;if((null==g?void 0:g.children)&&(f=!0),a.individualGroupable)return o.createElement(od,ex({key:"individual-group",ref:S(this,"moveable")},p,{target:null,targets:c}));if(f){var m=function t(e,r){var n=[];return e.forEach(function(e){if(e){if(T(e)){r[e]&&n.push.apply(n,eS([],ey(r[e]),!1));return}O(e)?n.push(t(e,r)):n.push(e)}}),n}(u,l);if(v&&!v.props.groupable&&!v.props.individualGroupable){var b=v.props.target;b&&c.indexOf(b)>-1&&(h=ex({},v.state))}return o.createElement(of,ex({key:"group",ref:S(this,"moveable")},p,null!==(t=a.groupableProps)&&void 0!==t?t:{},{target:null,targets:c,targetGroups:m,firstRenderState:h}))}var x=c[0];if(v&&(v.props.groupable||v.props.individualGroupable)){var y=W(v.moveables||[],function(t){return t.props.target===x});y&&(h=ex({},y.state))}return o.createElement(ot,ex({key:"single",ref:S(this,"moveable")},p,{target:x,firstRenderState:h}))},r.prototype.componentDidMount=function(){this._checkChangeTargets()},r.prototype.componentDidUpdate=function(){this._checkChangeTargets()},r.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.prototype.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},r.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},r.prototype.waitToChangeTarget=function(){var t,e=this;return this._onChangeTargets=function(){e._onChangeTargets=null,t()},new Promise(function(e){t=e})},r.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},r.prototype.getManager=function(){return this.moveable},r.prototype.getMoveables=function(){return this.moveable.getMoveables()},r.prototype.getDragElement=function(){return this.moveable.getDragElement()},r.prototype._updateRefs=function(t){var e=this.refTargets,r=iu(this.props.target||this.props.targets),n="undefined"!=typeof document,i=function t(e,r){return e.length!==r.length||e.some(function(e,n){var i=r[n];return(!!e||!!i)&&e!=i&&(!(O(e)&&O(i))||t(e,i))})}(e,r),o=this.selectorMap,a={};return this.refTargets.forEach(function t(e){T(e)?o[e]?a[e]=o[e]:n&&(i=!0,a[e]=[].slice.call(document.querySelectorAll(e))):O(e)&&e.forEach(t)}),this._tmpRefTargets=r,this._tmpSelectorMap=a,[r,a,!t&&i]},r.prototype._checkChangeTargets=function(){this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var t,e,r,n=this._differ.update(this._elementTargets),i=n.added,o=n.removed;(i.length||o.length)&&(null===(e=(t=this.props).onChangeTargets)||void 0===e||e.call(t,{moveable:this.moveable,targets:this._elementTargets}),null===(r=this._onChangeTargets)||void 0===r||r.call(this));var a=ey(this._updateRefs(),3),s=a[0],u=a[1],l=a[2];this.refTargets=s,this.selectorMap=u,l&&this.forceUpdate()},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);o>3&&a&&Object.defineProperty(e,r,a)}([(void 0===e&&(e={}),function(t,r){eW.forEach(function(n){var i=e[n]||n;i in t||(t[i]=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=(t=this[r])[n].apply(t,e);return o===this[r]?this:o})})})],r.prototype,"moveable",void 0),r}(o.PureComponent)),oh=r(3679);function ov(t="id"){return`${t}_${Math.random().toString(36).slice(2,9)}`}function og(t,e){let r={left:t.x,top:t.y,right:t.x+t.w,bottom:t.y+t.h},n={left:e.x,top:e.y,right:e.x+e.w,bottom:e.y+e.h};return!(r.right<n.left||r.left>n.right||r.bottom<n.top||r.top>n.bottom)}function om({classes:t,rooms:e}){let[n,a]=(0,o.useState)(null),[s,u]=(0,o.useState)(""),[l,c]=(0,o.useState)(""),[f,d]=(0,o.useState)(null),[p,h]=(0,o.useState)(null),[v,g]=(0,o.useState)("owner"),[m,b]=(0,o.useState)([]),[x,y]=(0,o.useState)([]),[S,E]=(0,o.useState)(null),[D,C]=(0,o.useState)("idle"),w=(0,o.useRef)(null),M=(0,o.useCallback)(async t=>{if(!n?.id||!s||!l)return;let e=await fetch(`/api/plan?ownerProfileId=${n.id}&classId=${s}&roomId=${l}&create=${t?"1":"0"}&includeLead=1`);if(!e.ok)return;let r=await e.json();d(r.plan),h(r.leadPlan),b(r.plan.elements.map(t=>({...t}))),E(null)},[n?.id,s,l]),P=(0,o.useCallback)(()=>{f&&(w.current&&clearTimeout(w.current),C("saving"),w.current=setTimeout(async()=>{try{await fetch("/api/plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:f.id,elements:m})}),C("saved"),setTimeout(()=>C("idle"),1200)}catch{C("idle")}},900))},[f,m]),R=(0,o.useMemo)(()=>m.find(t=>t.id===S),[m,S]),_="lead"===v,O=(t,e,r)=>{_||b(n=>{let i=n.find(e=>e.id===t);if(!i)return n;let o=new Set((i.groupId?n.filter(t=>t.groupId===i.groupId):[i]).map(t=>t.id));return n.map(t=>o.has(t.id)?{...t,x:t.x+e,y:t.y+r}:t)})},T=t=>{_||(b(e=>{let r=e.find(e=>e.id===t);if(!r)return e;let n=r.groupId||null;for(let i of e)if(i.id!==t&&og(r,i)){n=n||i.groupId||ov("grp");break}return n?e.map(e=>e.id===t||og(r,e)?{...e,groupId:n}:e):e.map(e=>e.id===t?{...e,groupId:null}:e)}),P())},z=(t,e)=>{if(_)return;let r={id:ov("el"),type:t,refId:e??null,x:120,y:120,w:80,h:50,rotation:0,z:m.length,groupId:null};("WINDOW_SIDE"===t||"WALL_SIDE"===t)&&(r.w=240,r.h=8),"DOOR"===t&&(r.w=36,r.h=8),"TEACHER_DESK"===t&&(r.w=200,r.h=60),b(t=>[...t,r]),P()},[G,k]=(0,o.useState)({w:1200,h:700}),I=(0,o.useRef)(null),N=(0,o.useRef)(null);async function A(){if(!N.current)return;let{toPng:t}=await r.e(546).then(r.bind(r,17546)),e=await t(N.current,{cacheBust:!0,pixelRatio:2}),n=document.createElement("a");n.href=e,n.download=`sitzplan-${s}-${l}.png`,n.click()}async function B(){if(!N.current)return;let[{toPng:t},{jsPDF:e}]=await Promise.all([r.e(546).then(r.bind(r,17546)),r.e(296).then(r.bind(r,87296))]),n=await t(N.current,{cacheBust:!0,pixelRatio:2}),i=new e({orientation:"landscape",unit:"pt",format:"a4"}),o=i.internal.pageSize.getWidth(),a=i.internal.pageSize.getHeight(),u=new Image;u.src=n,await new Promise(t=>{u.onload=t});let c=Math.min(o/u.width,a/u.height),f=u.width*c,d=u.height*c;i.addImage(n,"PNG",(o-f)/2,(a-d)/2,f,d),i.save(`sitzplan-${s}-${l}.pdf`)}return(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-5",children:[(0,i.jsxs)("div",{className:"lg:col-span-4 min-h-[60vh] rounded border border-neutral-900 bg-neutral-950/40",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between border-b border-neutral-900 px-3 py-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("label",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-fg-muted",children:"Klasse"}),(0,i.jsxs)("select",{value:s,onChange:t=>u(t.target.value),className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800",children:[i.jsx("option",{value:"",children:" w\xe4hlen "}),t.map(t=>i.jsx("option",{value:t.id,children:t.name},t.id))]})]}),(0,i.jsxs)("label",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-fg-muted",children:"Raum"}),(0,i.jsxs)("select",{value:l,onChange:t=>c(t.target.value),className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800",children:[i.jsx("option",{value:"",children:" w\xe4hlen "}),e.map(t=>i.jsx("option",{value:t.id,children:t.name},t.id))]})]}),i.jsx(oh.z,{onClick:()=>M(!0),variant:"primary",disabled:!n||!s||!l,children:"Plan laden/erstellen"}),p&&(0,i.jsxs)("div",{className:"ml-2 flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-fg-muted",children:"Ansicht:"}),i.jsx(oh.z,{onClick:()=>g("owner"),className:"owner"===v?"bg-primary/20 text-primary":"",children:"Eigen"}),i.jsx(oh.z,{onClick:()=>g("lead"),className:"lead"===v?"bg-primary/20 text-primary":"",children:"Klassenleitung"})]})]}),(0,i.jsxs)("div",{className:"text-xs text-fg-muted",children:[n?`Profil: ${n.name}`:"Kein aktives Profil gew\xe4hlt","saving"===D&&i.jsx("span",{className:"ml-3",children:"Speichern"}),"saved"===D&&i.jsx("span",{className:"ml-3 text-primary",children:"Gespeichert"})]})]}),i.jsx("div",{ref:I,className:"relative h-[70vh] w-full overflow-auto",children:i.jsx("div",{ref:N,className:"relative",style:{width:G.w,height:G.h},children:("owner"===v?m:p?.elements||[]).map(t=>(0,i.jsxs)("div",{role:"button",onClick:()=>!_&&E(t.id),className:`absolute select-none ${S===t.id?"ring-2 ring-primary/60":""}`,"data-el":t.id,style:{left:t.x,top:t.y,width:t.w,height:t.h,transform:`rotate(${t.rotation}deg)`,zIndex:t.z},children:[(0,i.jsxs)("div",{className:"h-full w-full rounded border border-neutral-700 bg-neutral-800/60 flex items-center justify-center text-xs",children:["STUDENT"===t.type&&(0,i.jsxs)("span",{children:["Sch\xfcler",t.refId?"":" (leer)"]}),"TEACHER_DESK"===t.type&&i.jsx("span",{children:"Lehrerpult"}),"DOOR"===t.type&&i.jsx("span",{children:"T\xfcr"}),"WINDOW_SIDE"===t.type&&i.jsx("span",{children:"Fensterseite"}),"WALL_SIDE"===t.type&&i.jsx("span",{children:"Wandseite"})]}),!_&&S===t.id&&i.jsx(op,{target:()=>document.querySelector(`[data-el='${t.id}']`),draggable:!0,resizable:!0,rotatable:!0,throttleDrag:0,throttleResize:0,throttleRotate:0,snappable:!0,snapThreshold:10,elementGuidelines:[],bounds:{left:0,top:0,right:G.w,bottom:G.h},onDrag:e=>{let r=e.beforeDelta[0],n=e.beforeDelta[1];O(t.id,r,n)},onDragEnd:()=>T(t.id),onResize:e=>{b(r=>r.map(r=>r.id===t.id?{...r,w:Math.max(10,e.width),h:Math.max(10,e.height),x:r.x+e.delta[0],y:r.y+e.delta[1]}:r))},onResizeEnd:()=>P(),onRotate:e=>{b(r=>r.map(r=>r.id===t.id?{...r,rotation:e.beforeRotate}:r))},onRotateEnd:()=>P()})]},t.id))})})]}),(0,i.jsxs)("aside",{className:"lg:col-span-1 grid content-start gap-4",children:[p&&"lead"===v&&(0,i.jsxs)("div",{className:"rounded border border-neutral-900 p-3 grid gap-2",children:[i.jsx("div",{className:"text-sm font-medium",children:"KL-Plan"}),i.jsx("div",{className:"text-xs text-fg-muted",children:"Du kannst den Plan der Klassenleitung ansehen. \xc4nderungen sind hier nicht m\xf6glich."}),n&&i.jsx(oh.z,{variant:"primary",onClick:async()=>{await fetch("/api/plan/copy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ownerProfileId:n.id,classId:s,roomId:l,sourcePlanId:p.id})}),g("owner"),await M(!1)},children:"Als Kopie \xfcbernehmen"})]}),(0,i.jsxs)("div",{className:"rounded border border-neutral-900 p-3",children:[i.jsx("div",{className:"text-sm font-medium mb-2",children:"Palette"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[i.jsx(oh.z,{onClick:()=>z("TEACHER_DESK"),children:"Lehrerpult"}),i.jsx(oh.z,{onClick:()=>z("DOOR"),children:"T\xfcr"}),i.jsx(oh.z,{onClick:()=>z("WINDOW_SIDE"),children:"Fensterseite"}),i.jsx(oh.z,{onClick:()=>z("WALL_SIDE"),children:"Wandseite"})]})]}),(0,i.jsxs)("div",{className:"rounded border border-neutral-900 p-3",children:[i.jsx("div",{className:"text-sm font-medium mb-2",children:"Sch\xfcler hinzuf\xfcgen"}),(0,i.jsxs)("div",{className:"grid gap-2 max-h-[260px] overflow-auto",children:[x.map(t=>i.jsx(oh.z,{onClick:()=>z("STUDENT",t.id),className:"justify-start",children:t.foreName},t.id)),0===x.length&&i.jsx("div",{className:"text-xs text-fg-muted",children:"Keine Sch\xfcler geladen."})]})]}),(0,i.jsxs)("div",{className:"rounded border border-neutral-900 p-3 grid gap-2",children:[i.jsx("div",{className:"text-sm font-medium",children:"Auswahl"}),!R&&i.jsx("div",{className:"text-xs text-fg-muted",children:"Nichts ausgew\xe4hlt"}),R&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-xs text-fg-muted",children:["Typ: ",R.type]}),i.jsx("div",{className:"flex gap-2",children:i.jsx(oh.z,{onClick:()=>{!_&&S&&(b(t=>t.filter(t=>t.id!==S)),E(null),P())},variant:"danger",children:"L\xf6schen"})})]})]}),(0,i.jsxs)("div",{className:"rounded border border-neutral-900 p-3 grid gap-2",children:[i.jsx("div",{className:"text-sm font-medium",children:"Export"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(oh.z,{onClick:A,children:"PNG"}),i.jsx(oh.z,{onClick:B,children:"PDF (A4 Quer)"})]})]})]})]})}},3679:(t,e,r)=>{"use strict";r.d(e,{z:()=>i});var n=r(10326);function i({variant:t="ghost",className:e="",...r}){return n.jsx("button",{className:`inline-flex items-center rounded px-3 py-2 text-sm transition-colors ${{primary:"bg-primary/20 text-primary hover:bg-primary/30",ghost:"bg-neutral-800 text-fg hover:bg-neutral-700",danger:"bg-red-900/40 text-red-300 hover:bg-red-900/60"}[t]} ${e}`,...r})}r(17577)},55427:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>f});var n=r(19510),i=r(31803),o=r(41379),a=r(68570);let s=(0,a.createProxy)(String.raw`/Users/jz/Platzhirsch/components/editor/Editor.tsx`),{__esModule:u,$$typeof:l}=s;s.default;let c=(0,a.createProxy)(String.raw`/Users/jz/Platzhirsch/components/editor/Editor.tsx#Editor`);async function f(){let[t,e]=await Promise.all([(0,i.listClasses)(),(0,o.listRooms)()]),r=t.map(t=>({id:t.id,name:t.name})),a=e.map(t=>({id:t.id,name:t.name,type:t.type}));return(0,n.jsxs)("main",{className:"container py-8 grid gap-6",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"Editor"}),n.jsx(c,{classes:r,rooms:a})]})}},99540:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d,metadata:()=>f});var n=r(19510);r(67272);var i=r(57371),o=r(68570);let a=(0,o.createProxy)(String.raw`/Users/jz/Platzhirsch/components/Layout/ActiveProfileNav.tsx`),{__esModule:s,$$typeof:u}=a;a.default;let l=(0,o.createProxy)(String.raw`/Users/jz/Platzhirsch/components/Layout/ActiveProfileNav.tsx#ActiveProfileNav`);function c(){return n.jsx("header",{className:"border-b border-neutral-900 bg-bg-soft/60 backdrop-blur",children:(0,n.jsxs)("div",{className:"container flex h-12 items-center justify-between",children:[n.jsx(i.default,{href:"/",className:"font-semibold",children:"Sitzplan"}),(0,n.jsxs)("nav",{className:"space-x-4 text-sm text-fg-muted",children:[n.jsx(i.default,{href:"/profiles",className:"hover:text-fg",children:"Profile"}),n.jsx(i.default,{href:"/classes",className:"hover:text-fg",children:"Klassen"}),n.jsx(i.default,{href:"/rooms",className:"hover:text-fg",children:"R\xe4ume"}),n.jsx(i.default,{href:"/students",className:"hover:text-fg",children:"Sch\xfcler"}),n.jsx(i.default,{href:"/import",className:"hover:text-fg",children:"Import"}),n.jsx(i.default,{href:"/editor",className:"hover:text-fg",children:"Editor"}),n.jsx(l,{})]})]})})}let f={title:"Sitzplan",description:"Sitzpl\xe4ne f\xfcr Klassen und R\xe4ume"};function d({children:t}){return n.jsx("html",{lang:"de",className:"dark",children:(0,n.jsxs)("body",{children:[n.jsx(c,{}),t]})})}},31803:(t,e,r)=>{"use strict";r.r(e),r.d(e,{createClass:()=>u,deleteClass:()=>c,listClasses:()=>s,setClassLead:()=>l});var n=r(24330);r(60166);var i=r(90071),o=r(50883),a=r(57708);async function s(){let t=(0,o.I)();if(!(0,o.u)(t,"read","class"))throw Error("forbidden");return i._.class.findMany({orderBy:{name:"asc"},include:{leadProfile:!0}})}async function u(t,e){let r=(0,o.I)();if(!(0,o.u)(r,"create","class"))throw Error("forbidden");let n=await i._.class.create({data:{name:t,leadProfileId:e||null}});return(0,a.revalidatePath)("/classes"),n}async function l(t,e){let r=(0,o.I)();if(!(0,o.u)(r,"update","class"))throw Error("forbidden");await i._.class.update({where:{id:t},data:{leadProfileId:e}}),(0,a.revalidatePath)("/classes")}async function c(t){let e=(0,o.I)();if(!(0,o.u)(e,"delete","class"))throw Error("forbidden");await i._.class.delete({where:{id:t}}),(0,a.revalidatePath)("/classes")}(0,r(40618).h)([s,u,l,c]),(0,n.j)("b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d",s),(0,n.j)("4c018bc9b36e8e4ee0c64573afa34673fa514a06",u),(0,n.j)("7914dc5fbc064000e9e7e67beeae2d6d76de8861",l),(0,n.j)("1aad7720052bcbb3c3fff8073038f2a189fc9f98",c)},41379:(t,e,r)=>{"use strict";r.r(e),r.d(e,{createRoom:()=>l,deleteRoom:()=>c,listRooms:()=>u});var n=r(24330);r(60166);var i=r(90071),o=r(50883),a=r(57708),s=r(53524);async function u(){let t=(0,o.I)();if(!(0,o.u)(t,"read","room"))throw Error("forbidden");return i._.room.findMany({orderBy:{name:"asc"}})}async function l(t,e="normal"){let r=(0,o.I)();if(!(0,o.u)(r,"create","room"))throw Error("forbidden");let n=await i._.room.create({data:{name:t,type:"adHoc"===e?s.RoomType.ADHOC:s.RoomType.NORMAL}});return(0,a.revalidatePath)("/rooms"),n}async function c(t){let e=(0,o.I)();if(!(0,o.u)(e,"delete","room"))throw Error("forbidden");await i._.room.delete({where:{id:t}}),(0,a.revalidatePath)("/rooms")}(0,r(40618).h)([u,l,c]),(0,n.j)("8a57dfb094cf75dda1cd39da095655f2cc8d362e",u),(0,n.j)("51a097bff94b6d7bde5cfb7a76cc419ca2d2d897",l),(0,n.j)("88a28fa01bf8eb3ed6954f8a4f4ae43143c0f7e0",c)},90071:(t,e,r)=>{"use strict";r.d(e,{_:()=>i});var n=r(53524);let i=globalThis.prisma??new n.PrismaClient({log:["error"]})},50883:(t,e,r)=>{"use strict";function n(){return{id:"anonymous",role:"anonymous"}}function i(t,e,r){return!0}r.d(e,{I:()=>n,u:()=>i})},67272:()=>{}};var e=require("../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),n=e.X(0,[948,707,562],()=>r(80133));module.exports=n})();