(()=>{var e={};e.id=927,e.ids=[927],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5751:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>d.a,__next_app__:()=>b,originalPathname:()=>f,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(6652),s(5254),s(5866);var r=s(3191),t=s(8716),n=s(7922),d=s.n(n),l=s(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(a,i);let c=["",{children:["classes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6652)),"/Users/jz/Platzhirsch/app/classes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5254)),"/Users/jz/Platzhirsch/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/jz/Platzhirsch/app/classes/page.tsx"],f="/classes/page",b={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/classes/page",pathname:"/classes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9229:(e,a,s)=>{let r={"15b59f279af74e697a361e33499416c5c9723973":()=>Promise.resolve().then(s.bind(s,6652)).then(e=>e.$$ACTION_0),"30fcdea51a67a3d12a5b543808f385ed5267ff4d":()=>Promise.resolve().then(s.bind(s,6652)).then(e=>e.$$ACTION_2),d642db9048e3ef4136c056c42862dd1b8b5eb06b:()=>Promise.resolve().then(s.bind(s,6652)).then(e=>e.$$ACTION_1),"1aad7720052bcbb3c3fff8073038f2a189fc9f98":()=>Promise.resolve().then(s.bind(s,1803)).then(e=>e.deleteClass),"4c018bc9b36e8e4ee0c64573afa34673fa514a06":()=>Promise.resolve().then(s.bind(s,1803)).then(e=>e.createClass),"7914dc5fbc064000e9e7e67beeae2d6d76de8861":()=>Promise.resolve().then(s.bind(s,1803)).then(e=>e.setClassLead),b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d:()=>Promise.resolve().then(s.bind(s,1803)).then(e=>e.listClasses),"4f55b2736eb31ccfd4b7956d90ce22b919e8fd95":()=>Promise.resolve().then(s.bind(s,1607)).then(e=>e.listProfiles),"895f79a01128bdc5b0c482a41d09b5a10da7dd57":()=>Promise.resolve().then(s.bind(s,1607)).then(e=>e.createProfile),e0324c9f7f5f3c8109ac829419ca75fa73fdb2e9:()=>Promise.resolve().then(s.bind(s,1607)).then(e=>e.deleteProfile)};async function t(e,...a){return(await r[e]()).apply(null,a)}e.exports={"15b59f279af74e697a361e33499416c5c9723973":t.bind(null,"15b59f279af74e697a361e33499416c5c9723973"),"30fcdea51a67a3d12a5b543808f385ed5267ff4d":t.bind(null,"30fcdea51a67a3d12a5b543808f385ed5267ff4d"),d642db9048e3ef4136c056c42862dd1b8b5eb06b:t.bind(null,"d642db9048e3ef4136c056c42862dd1b8b5eb06b"),"1aad7720052bcbb3c3fff8073038f2a189fc9f98":t.bind(null,"1aad7720052bcbb3c3fff8073038f2a189fc9f98"),"4c018bc9b36e8e4ee0c64573afa34673fa514a06":t.bind(null,"4c018bc9b36e8e4ee0c64573afa34673fa514a06"),"7914dc5fbc064000e9e7e67beeae2d6d76de8861":t.bind(null,"7914dc5fbc064000e9e7e67beeae2d6d76de8861"),b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d:t.bind(null,"b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d"),"4f55b2736eb31ccfd4b7956d90ce22b919e8fd95":t.bind(null,"4f55b2736eb31ccfd4b7956d90ce22b919e8fd95"),"895f79a01128bdc5b0c482a41d09b5a10da7dd57":t.bind(null,"895f79a01128bdc5b0c482a41d09b5a10da7dd57"),e0324c9f7f5f3c8109ac829419ca75fa73fdb2e9:t.bind(null,"e0324c9f7f5f3c8109ac829419ca75fa73fdb2e9")}},5303:()=>{},6652:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$ACTION_0:()=>f,$$ACTION_1:()=>b,$$ACTION_2:()=>p,default:()=>u});var r=s(9510),t=s(4330),n=s(166),d=s(1803),l=s(1607),i=s(8465),c=s(206);async function o(){let[e,a]=await Promise.all([(0,d.listClasses)(),(0,l.listProfiles)()]);return(0,r.jsxs)("ul",{className:"divide-y divide-neutral-900 rounded border border-neutral-900",children:[e.map(e=>(0,r.jsxs)("li",{className:"grid gap-2 px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:e.name}),e.leadProfile&&(0,r.jsxs)("span",{className:"ml-2 text-xs text-fg-muted",children:["(Klassenleitung: ",e.leadProfile.name,")"]})]}),r.jsx("form",{action:(0,t.j)("15b59f279af74e697a361e33499416c5c9723973",f).bind(null,(0,n.encryptActionBoundArgs)("15b59f279af74e697a361e33499416c5c9723973",[e.id])),children:r.jsx(i.z,{type:"submit",variant:"danger",children:"L\xf6schen"})})]}),(0,r.jsxs)("form",{action:(0,t.j)("d642db9048e3ef4136c056c42862dd1b8b5eb06b",b).bind(null,(0,n.encryptActionBoundArgs)("d642db9048e3ef4136c056c42862dd1b8b5eb06b",[e.id])),className:"flex gap-2",children:[(0,r.jsxs)("label",{className:"text-xs text-fg-muted flex items-center gap-2",children:[r.jsx("span",{children:"Klassenleitung"}),(0,r.jsxs)("select",{name:"lead",defaultValue:e.leadProfile?.id??"",className:"rounded bg-neutral-900 px-2 py-1 border border-neutral-800",children:[r.jsx("option",{value:"",children:"Keine"}),a.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),r.jsx(i.z,{type:"submit",children:"Speichern"})]})]},e.id)),0===e.length&&r.jsx("li",{className:"px-4 py-6 text-sm text-fg-muted",children:"Noch keine Klassen vorhanden."})]})}async function f(e){var[a]=await (0,n.decryptActionBoundArgs)("15b59f279af74e697a361e33499416c5c9723973",e);await (0,d.deleteClass)(a)}async function b(e,a){var[s]=await (0,n.decryptActionBoundArgs)("d642db9048e3ef4136c056c42862dd1b8b5eb06b",e);let r=a.get("lead")||"";await (0,d.setClassLead)(s,r||null)}async function u(){let e=await (0,l.listProfiles)();return(0,r.jsxs)("main",{className:"container py-8 grid gap-6",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Klassen"}),r.jsx("section",{className:"grid gap-3",children:(0,r.jsxs)("form",{action:(0,t.j)("30fcdea51a67a3d12a5b543808f385ed5267ff4d",p),className:"flex items-end gap-3",children:[r.jsx(c.I,{name:"name",label:"Neue Klasse",placeholder:"z. B. W11"}),(0,r.jsxs)("label",{className:"text-sm text-fg-muted grid gap-2",children:[r.jsx("span",{children:"Klassenleitung"}),(0,r.jsxs)("select",{name:"lead",className:"rounded bg-neutral-900 px-2 py-2 border border-neutral-800",children:[r.jsx("option",{value:"",children:"Keine"}),e.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),r.jsx(i.z,{type:"submit",variant:"primary",children:"Anlegen"})]})}),r.jsx(o,{})]})}async function p(e){let a=e.get("name")?.trim(),s=e.get("lead")||void 0;a&&await (0,d.createClass)(a,s)}},8465:(e,a,s)=>{"use strict";s.d(a,{z:()=>t});var r=s(9510);function t({variant:e="ghost",className:a="",...s}){return r.jsx("button",{className:`inline-flex items-center rounded px-3 py-2 text-sm transition-colors ${{primary:"bg-primary/20 text-primary hover:bg-primary/30",ghost:"bg-neutral-800 text-fg hover:bg-neutral-700",danger:"bg-red-900/40 text-red-300 hover:bg-red-900/60"}[e]} ${a}`,...s})}s(1159)},206:(e,a,s)=>{"use strict";s.d(a,{I:()=>t});var r=s(9510);let t=s(1159).forwardRef(({label:e,className:a="",...s},t)=>(0,r.jsxs)("label",{className:"grid gap-2 text-sm",children:[e?r.jsx("span",{className:"text-fg-muted",children:e}):null,r.jsx("input",{ref:t,className:"rounded border border-neutral-800 bg-neutral-900 px-3 py-2 outline-none ring-0 focus:border-neutral-600 "+a,...s})]}));t.displayName="Input"},1803:(e,a,s)=>{"use strict";s.r(a),s.d(a,{createClass:()=>i,deleteClass:()=>o,listClasses:()=>l,setClassLead:()=>c});var r=s(4330);s(166);var t=s(71),n=s(883),d=s(7708);async function l(){let e=(0,n.I)();if(!(0,n.u)(e,"read","class"))throw Error("forbidden");return t._.class.findMany({orderBy:{name:"asc"},include:{leadProfile:!0}})}async function i(e,a){let s=(0,n.I)();if(!(0,n.u)(s,"create","class"))throw Error("forbidden");let r=await t._.class.create({data:{name:e,leadProfileId:a||null}});return(0,d.revalidatePath)("/classes"),r}async function c(e,a){let s=(0,n.I)();if(!(0,n.u)(s,"update","class"))throw Error("forbidden");await t._.class.update({where:{id:e},data:{leadProfileId:a}}),(0,d.revalidatePath)("/classes")}async function o(e){let a=(0,n.I)();if(!(0,n.u)(a,"delete","class"))throw Error("forbidden");await t._.class.delete({where:{id:e}}),(0,d.revalidatePath)("/classes")}(0,s(618).h)([l,i,c,o]),(0,r.j)("b1a86aeaa537ef061ece06ae838f0f0fbfb3aa3d",l),(0,r.j)("4c018bc9b36e8e4ee0c64573afa34673fa514a06",i),(0,r.j)("7914dc5fbc064000e9e7e67beeae2d6d76de8861",c),(0,r.j)("1aad7720052bcbb3c3fff8073038f2a189fc9f98",o)},1607:(e,a,s)=>{"use strict";s.r(a),s.d(a,{createProfile:()=>i,deleteProfile:()=>c,listProfiles:()=>l});var r=s(4330);s(166);var t=s(71),n=s(883),d=s(7708);async function l(){let e=(0,n.I)();if(!(0,n.u)(e,"read","profile"))throw Error("forbidden");return t._.profile.findMany({orderBy:{name:"asc"}})}async function i(e){let a=(0,n.I)();if(!(0,n.u)(a,"create","profile"))throw Error("forbidden");let s=await t._.profile.create({data:{name:e}});return(0,d.revalidatePath)("/profiles"),s}async function c(e){let a=(0,n.I)();if(!(0,n.u)(a,"delete","profile"))throw Error("forbidden");await t._.profile.delete({where:{id:e}}),(0,d.revalidatePath)("/profiles")}(0,s(618).h)([l,i,c]),(0,r.j)("4f55b2736eb31ccfd4b7956d90ce22b919e8fd95",l),(0,r.j)("895f79a01128bdc5b0c482a41d09b5a10da7dd57",i),(0,r.j)("e0324c9f7f5f3c8109ac829419ca75fa73fdb2e9",c)},71:(e,a,s)=>{"use strict";s.d(a,{_:()=>t});var r=s(3524);let t=globalThis.prisma??new r.PrismaClient({log:["error"]})},883:(e,a,s)=>{"use strict";function r(){return{id:"anonymous",role:"anonymous"}}function t(e,a,s){return!0}s.d(a,{I:()=>r,u:()=>t})}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[948,471,562,553],()=>s(5751));module.exports=r})();